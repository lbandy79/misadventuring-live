var uP=Object.defineProperty;var cP=(t,e,n)=>e in t?uP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Br=(t,e,n)=>cP(t,typeof e!="symbol"?e+"":e,n);function hP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dT={exports:{}},yh={},pT={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ul=Symbol.for("react.element"),dP=Symbol.for("react.portal"),pP=Symbol.for("react.fragment"),mP=Symbol.for("react.strict_mode"),gP=Symbol.for("react.profiler"),yP=Symbol.for("react.provider"),_P=Symbol.for("react.context"),vP=Symbol.for("react.forward_ref"),wP=Symbol.for("react.suspense"),TP=Symbol.for("react.memo"),xP=Symbol.for("react.lazy"),M_=Symbol.iterator;function EP(t){return t===null||typeof t!="object"?null:(t=M_&&t[M_]||t["@@iterator"],typeof t=="function"?t:null)}var mT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gT=Object.assign,yT={};function Bo(t,e,n){this.props=t,this.context=e,this.refs=yT,this.updater=n||mT}Bo.prototype.isReactComponent={};Bo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _T(){}_T.prototype=Bo.prototype;function Tm(t,e,n){this.props=t,this.context=e,this.refs=yT,this.updater=n||mT}var xm=Tm.prototype=new _T;xm.constructor=Tm;gT(xm,Bo.prototype);xm.isPureReactComponent=!0;var D_=Array.isArray,vT=Object.prototype.hasOwnProperty,Em={current:null},wT={key:!0,ref:!0,__self:!0,__source:!0};function TT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vT.call(e,r)&&!wT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ul,type:t,key:s,ref:o,props:i,_owner:Em.current}}function SP(t,e){return{$$typeof:Ul,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ul}function AP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N_=/\/+/g;function If(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AP(""+t.key):e.toString(36)}function Xu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ul:case dP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+If(o,0):r,D_(i)?(n="",t!=null&&(n=t.replace(N_,"$&/")+"/"),Xu(i,e,n,"",function(c){return c})):i!=null&&(Sm(i)&&(i=SP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(N_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",D_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+If(s,a);o+=Xu(s,e,n,l,i)}else if(l=EP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+If(s,a++),o+=Xu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Eu(t,e,n){if(t==null)return t;var r=[],i=0;return Xu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function CP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},Yu={transition:null},PP={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Yu,ReactCurrentOwner:Em};function xT(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Eu,forEach:function(t,e,n){Eu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Eu(t,function(){e++}),e},toArray:function(t){return Eu(t,function(e){return e})||[]},only:function(t){if(!Sm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Bo;me.Fragment=pP;me.Profiler=gP;me.PureComponent=Tm;me.StrictMode=mP;me.Suspense=wP;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;me.act=xT;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Em.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)vT.call(e,l)&&!wT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ul,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:_P,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yP,_context:t},t.Consumer=t};me.createElement=TT;me.createFactory=function(t){var e=TT.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:vP,render:t}};me.isValidElement=Sm;me.lazy=function(t){return{$$typeof:xP,_payload:{_status:-1,_result:t},_init:CP}};me.memo=function(t,e){return{$$typeof:TP,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Yu.transition;Yu.transition={};try{t()}finally{Yu.transition=e}};me.unstable_act=xT;me.useCallback=function(t,e){return qt.current.useCallback(t,e)};me.useContext=function(t){return qt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};me.useEffect=function(t,e){return qt.current.useEffect(t,e)};me.useId=function(){return qt.current.useId()};me.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return qt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};me.useRef=function(t){return qt.current.useRef(t)};me.useState=function(t){return qt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return qt.current.useTransition()};me.version="18.3.1";pT.exports=me;var D=pT.exports;const _h=fP(D),IP=hP({__proto__:null,default:_h},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kP=D,bP=Symbol.for("react.element"),RP=Symbol.for("react.fragment"),VP=Object.prototype.hasOwnProperty,MP=kP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DP={key:!0,ref:!0,__self:!0,__source:!0};function ET(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VP.call(e,r)&&!DP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bP,type:t,key:s,ref:o,props:i,_owner:MP.current}}yh.Fragment=RP;yh.jsx=ET;yh.jsxs=ET;dT.exports=yh;var E=dT.exports,Md={},ST={exports:{}},Cn={},AT={exports:{}},CT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,X){var F=z.length;z.push(X);e:for(;0<F;){var N=F-1>>>1,$=z[N];if(0<i($,X))z[N]=X,z[F]=$,F=N;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],F=z.pop();if(F!==X){z[0]=F;e:for(var N=0,$=z.length,K=$>>>1;N<K;){var Z=2*(N+1)-1,ne=z[Z],se=Z+1,J=z[se];if(0>i(ne,F))se<$&&0>i(J,ne)?(z[N]=J,z[se]=F,N=se):(z[N]=ne,z[Z]=F,N=Z);else if(se<$&&0>i(J,F))z[N]=J,z[se]=F,N=se;else break e}}return X}function i(z,X){var F=z.sortIndex-X.sortIndex;return F!==0?F:z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,f=3,p=!1,y=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=z)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function P(z){if(m=!1,x(z),!y)if(n(l)!==null)y=!0,Q(R);else{var X=n(c);X!==null&&re(P,X.startTime-z)}}function R(z,X){y=!1,m&&(m=!1,_(S),S=-1),p=!0;var F=f;try{for(x(X),u=n(l);u!==null&&(!(u.expirationTime>X)||z&&!V());){var N=u.callback;if(typeof N=="function"){u.callback=null,f=u.priorityLevel;var $=N(u.expirationTime<=X);X=t.unstable_now(),typeof $=="function"?u.callback=$:u===n(l)&&r(l),x(X)}else r(l);u=n(l)}if(u!==null)var K=!0;else{var Z=n(c);Z!==null&&re(P,Z.startTime-X),K=!1}return K}finally{u=null,f=F,p=!1}}var O=!1,C=null,S=-1,A=5,I=-1;function V(){return!(t.unstable_now()-I<A)}function M(){if(C!==null){var z=t.unstable_now();I=z;var X=!0;try{X=C(!0,z)}finally{X?b():(O=!1,C=null)}}else O=!1}var b;if(typeof v=="function")b=function(){v(M)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,te=q.port2;q.port1.onmessage=M,b=function(){te.postMessage(null)}}else b=function(){w(M,0)};function Q(z){C=z,O||(O=!0,b())}function re(z,X){S=w(function(){z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,Q(R))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var F=f;f=X;try{return z()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var F=f;f=z;try{return X()}finally{f=F}},t.unstable_scheduleCallback=function(z,X,F){var N=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?N+F:N):F=N,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=F+$,z={id:d++,callback:X,priorityLevel:z,startTime:F,expirationTime:$,sortIndex:-1},F>N?(z.sortIndex=F,e(c,z),n(l)===null&&z===n(c)&&(m?(_(S),S=-1):m=!0,re(P,F-N))):(z.sortIndex=$,e(l,z),y||p||(y=!0,Q(R))),z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(z){var X=f;return function(){var F=f;f=X;try{return z.apply(this,arguments)}finally{f=F}}}})(CT);AT.exports=CT;var NP=AT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OP=D,xn=NP;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PT=new Set,nl={};function _s(t,e){mo(t,e),mo(t+"Capture",e)}function mo(t,e){for(nl[t]=e,t=0;t<e.length;t++)PT.add(e[t])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dd=Object.prototype.hasOwnProperty,FP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O_={},F_={};function LP(t){return Dd.call(F_,t)?!0:Dd.call(O_,t)?!1:FP.test(t)?F_[t]=!0:(O_[t]=!0,!1)}function jP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BP(t,e,n,r){if(e===null||typeof e>"u"||jP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Am=/[\-:]([a-z])/g;function Cm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Am,Cm);Ct[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Am,Cm);Ct[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Am,Cm);Ct[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pm(t,e,n,r){var i=Ct.hasOwnProperty(e)?Ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BP(e,n,i,r)&&(n=null),r||i===null?LP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nr=OP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Su=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),Im=Symbol.for("react.strict_mode"),Nd=Symbol.for("react.profiler"),IT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),km=Symbol.for("react.forward_ref"),Od=Symbol.for("react.suspense"),Fd=Symbol.for("react.suspense_list"),bm=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),bT=Symbol.for("react.offscreen"),L_=Symbol.iterator;function ha(t){return t===null||typeof t!="object"?null:(t=L_&&t[L_]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,kf;function Ea(t){if(kf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kf=e&&e[1]||""}return`
`+kf+t}var bf=!1;function Rf(t,e){if(!t||bf)return"";bf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{bf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ea(t):""}function UP(t){switch(t.tag){case 5:return Ea(t.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return t=Rf(t.type,!1),t;case 11:return t=Rf(t.type.render,!1),t;case 1:return t=Rf(t.type,!0),t;default:return""}}function Ld(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case Fs:return"Portal";case Nd:return"Profiler";case Im:return"StrictMode";case Od:return"Suspense";case Fd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kT:return(t.displayName||"Context")+".Consumer";case IT:return(t._context.displayName||"Context")+".Provider";case km:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bm:return e=t.displayName||null,e!==null?e:Ld(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Ld(t(e))}catch{}}return null}function $P(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ld(e);case 8:return e===Im?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zP(t){var e=RT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Au(t){t._valueTracker||(t._valueTracker=zP(t))}function VT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=RT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jd(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function j_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MT(t,e){e=e.checked,e!=null&&Pm(t,"checked",e,!1)}function Bd(t,e){MT(t,e);var n=yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ud(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ud(t,e.type,yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function B_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ud(t,e,n){(e!=="number"||vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sa=Array.isArray;function no(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function U_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Sa(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yi(n)}}function DT(t,e){var n=yi(e.value),r=yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cu,OT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cu=Cu||document.createElement("div"),Cu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WP=["Webkit","ms","Moz","O"];Object.keys(Na).forEach(function(t){WP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Na[e]=Na[t]})});function FT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Na.hasOwnProperty(t)&&Na[t]?(""+e).trim():e+"px"}function LT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=FT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var HP=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wd(t,e){if(e){if(HP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=null;function Rm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gd=null,ro=null,io=null;function z_(t){if(t=Wl(t)){if(typeof Gd!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Eh(e),Gd(t.stateNode,t.type,e))}}function jT(t){ro?io?io.push(t):io=[t]:ro=t}function BT(){if(ro){var t=ro,e=io;if(io=ro=null,z_(t),e)for(t=0;t<e.length;t++)z_(e[t])}}function UT(t,e){return t(e)}function $T(){}var Vf=!1;function zT(t,e,n){if(Vf)return t(e,n);Vf=!0;try{return UT(t,e,n)}finally{Vf=!1,(ro!==null||io!==null)&&($T(),BT())}}function il(t,e){var n=t.stateNode;if(n===null)return null;var r=Eh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Kd=!1;if(Ar)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){Kd=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{Kd=!1}function qP(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Oa=!1,wc=null,Tc=!1,Qd=null,GP={onError:function(t){Oa=!0,wc=t}};function KP(t,e,n,r,i,s,o,a,l){Oa=!1,wc=null,qP.apply(GP,arguments)}function QP(t,e,n,r,i,s,o,a,l){if(KP.apply(this,arguments),Oa){if(Oa){var c=wc;Oa=!1,wc=null}else throw Error(H(198));Tc||(Tc=!0,Qd=c)}}function vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W_(t){if(vs(t)!==t)throw Error(H(188))}function XP(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return W_(i),t;if(s===r)return W_(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function HT(t){return t=XP(t),t!==null?qT(t):null}function qT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qT(t);if(e!==null)return e;t=t.sibling}return null}var GT=xn.unstable_scheduleCallback,H_=xn.unstable_cancelCallback,YP=xn.unstable_shouldYield,ZP=xn.unstable_requestPaint,tt=xn.unstable_now,JP=xn.unstable_getCurrentPriorityLevel,Vm=xn.unstable_ImmediatePriority,KT=xn.unstable_UserBlockingPriority,xc=xn.unstable_NormalPriority,eI=xn.unstable_LowPriority,QT=xn.unstable_IdlePriority,vh=null,ir=null;function tI(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(vh,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:iI,nI=Math.log,rI=Math.LN2;function iI(t){return t>>>=0,t===0?32:31-(nI(t)/rI|0)|0}var Pu=64,Iu=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Aa(a):(s&=o,s!==0&&(r=Aa(s)))}else o=n&~i,o!==0?r=Aa(o):s!==0&&(r=Aa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),i=1<<n,r|=t[n],e&=~i;return r}function sI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=sI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Xd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XT(){var t=Pu;return Pu<<=1,!(Pu&4194240)&&(Pu=64),t}function Mf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function aI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Mm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function YT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZT,Dm,JT,e1,t1,Yd=!1,ku=[],ri=null,ii=null,si=null,sl=new Map,ol=new Map,Gr=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q_(t,e){switch(t){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":si=null;break;case"pointerover":case"pointerout":sl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(e.pointerId)}}function da(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wl(e),e!==null&&Dm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uI(t,e,n,r,i){switch(e){case"focusin":return ri=da(ri,t,e,n,r,i),!0;case"dragenter":return ii=da(ii,t,e,n,r,i),!0;case"mouseover":return si=da(si,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return sl.set(s,da(sl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ol.set(s,da(ol.get(s)||null,t,e,n,r,i)),!0}return!1}function n1(t){var e=Qi(t.target);if(e!==null){var n=vs(e);if(n!==null){if(e=n.tag,e===13){if(e=WT(n),e!==null){t.blockedOn=e,t1(t.priority,function(){JT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);qd=r,n.target.dispatchEvent(r),qd=null}else return e=Wl(n),e!==null&&Dm(e),t.blockedOn=n,!1;e.shift()}return!0}function G_(t,e,n){Zu(t)&&n.delete(e)}function cI(){Yd=!1,ri!==null&&Zu(ri)&&(ri=null),ii!==null&&Zu(ii)&&(ii=null),si!==null&&Zu(si)&&(si=null),sl.forEach(G_),ol.forEach(G_)}function pa(t,e){t.blockedOn===e&&(t.blockedOn=null,Yd||(Yd=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,cI)))}function al(t){function e(i){return pa(i,t)}if(0<ku.length){pa(ku[0],t);for(var n=1;n<ku.length;n++){var r=ku[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ri!==null&&pa(ri,t),ii!==null&&pa(ii,t),si!==null&&pa(si,t),sl.forEach(e),ol.forEach(e),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)n1(n),n.blockedOn===null&&Gr.shift()}var so=Nr.ReactCurrentBatchConfig,Sc=!0;function hI(t,e,n,r){var i=Ie,s=so.transition;so.transition=null;try{Ie=1,Nm(t,e,n,r)}finally{Ie=i,so.transition=s}}function fI(t,e,n,r){var i=Ie,s=so.transition;so.transition=null;try{Ie=4,Nm(t,e,n,r)}finally{Ie=i,so.transition=s}}function Nm(t,e,n,r){if(Sc){var i=Zd(t,e,n,r);if(i===null)zf(t,e,r,Ac,n),q_(t,r);else if(uI(i,t,e,n,r))r.stopPropagation();else if(q_(t,r),e&4&&-1<lI.indexOf(t)){for(;i!==null;){var s=Wl(i);if(s!==null&&ZT(s),s=Zd(t,e,n,r),s===null&&zf(t,e,r,Ac,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zf(t,e,r,null,n)}}var Ac=null;function Zd(t,e,n,r){if(Ac=null,t=Rm(r),t=Qi(t),t!==null)if(e=vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ac=t,null}function r1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JP()){case Vm:return 1;case KT:return 4;case xc:case eI:return 16;case QT:return 536870912;default:return 16}default:return 16}}var Xr=null,Om=null,Ju=null;function i1(){if(Ju)return Ju;var t,e=Om,n=e.length,r,i="value"in Xr?Xr.value:Xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ju=i.slice(t,1<r?1-r:void 0)}function ec(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bu(){return!0}function K_(){return!1}function Pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bu:K_,this.isPropagationStopped=K_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bu)},persist:function(){},isPersistent:bu}),e}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fm=Pn(Uo),zl=Ge({},Uo,{view:0,detail:0}),dI=Pn(zl),Df,Nf,ma,wh=Ge({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(Df=t.screenX-ma.screenX,Nf=t.screenY-ma.screenY):Nf=Df=0,ma=t),Df)},movementY:function(t){return"movementY"in t?t.movementY:Nf}}),Q_=Pn(wh),pI=Ge({},wh,{dataTransfer:0}),mI=Pn(pI),gI=Ge({},zl,{relatedTarget:0}),Of=Pn(gI),yI=Ge({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),_I=Pn(yI),vI=Ge({},Uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wI=Pn(vI),TI=Ge({},Uo,{data:0}),X_=Pn(TI),xI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=SI[t])?!!e[t]:!1}function Lm(){return AI}var CI=Ge({},zl,{key:function(t){if(t.key){var e=xI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ec(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lm,charCode:function(t){return t.type==="keypress"?ec(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ec(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PI=Pn(CI),II=Ge({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y_=Pn(II),kI=Ge({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lm}),bI=Pn(kI),RI=Ge({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),VI=Pn(RI),MI=Ge({},wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DI=Pn(MI),NI=[9,13,27,32],jm=Ar&&"CompositionEvent"in window,Fa=null;Ar&&"documentMode"in document&&(Fa=document.documentMode);var OI=Ar&&"TextEvent"in window&&!Fa,s1=Ar&&(!jm||Fa&&8<Fa&&11>=Fa),Z_=" ",J_=!1;function o1(t,e){switch(t){case"keyup":return NI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function FI(t,e){switch(t){case"compositionend":return a1(e);case"keypress":return e.which!==32?null:(J_=!0,Z_);case"textInput":return t=e.data,t===Z_&&J_?null:t;default:return null}}function LI(t,e){if(js)return t==="compositionend"||!jm&&o1(t,e)?(t=i1(),Ju=Om=Xr=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return s1&&e.locale!=="ko"?null:e.data;default:return null}}var jI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jI[t.type]:e==="textarea"}function l1(t,e,n,r){jT(r),e=Cc(e,"onChange"),0<e.length&&(n=new Fm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var La=null,ll=null;function BI(t){v1(t,0)}function Th(t){var e=$s(t);if(VT(e))return t}function UI(t,e){if(t==="change")return e}var u1=!1;if(Ar){var Ff;if(Ar){var Lf="oninput"in document;if(!Lf){var t0=document.createElement("div");t0.setAttribute("oninput","return;"),Lf=typeof t0.oninput=="function"}Ff=Lf}else Ff=!1;u1=Ff&&(!document.documentMode||9<document.documentMode)}function n0(){La&&(La.detachEvent("onpropertychange",c1),ll=La=null)}function c1(t){if(t.propertyName==="value"&&Th(ll)){var e=[];l1(e,ll,t,Rm(t)),zT(BI,e)}}function $I(t,e,n){t==="focusin"?(n0(),La=e,ll=n,La.attachEvent("onpropertychange",c1)):t==="focusout"&&n0()}function zI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Th(ll)}function WI(t,e){if(t==="click")return Th(e)}function HI(t,e){if(t==="input"||t==="change")return Th(e)}function qI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:qI;function ul(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dd.call(e,i)||!Xn(t[i],e[i]))return!1}return!0}function r0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i0(t,e){var n=r0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=r0(n)}}function h1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f1(){for(var t=window,e=vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vc(t.document)}return e}function Bm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GI(t){var e=f1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&h1(n.ownerDocument.documentElement,n)){if(r!==null&&Bm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=i0(n,s);var o=i0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KI=Ar&&"documentMode"in document&&11>=document.documentMode,Bs=null,Jd=null,ja=null,ep=!1;function s0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ep||Bs==null||Bs!==vc(r)||(r=Bs,"selectionStart"in r&&Bm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ja&&ul(ja,r)||(ja=r,r=Cc(Jd,"onSelect"),0<r.length&&(e=new Fm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bs)))}function Ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Us={animationend:Ru("Animation","AnimationEnd"),animationiteration:Ru("Animation","AnimationIteration"),animationstart:Ru("Animation","AnimationStart"),transitionend:Ru("Transition","TransitionEnd")},jf={},d1={};Ar&&(d1=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function xh(t){if(jf[t])return jf[t];if(!Us[t])return t;var e=Us[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d1)return jf[t]=e[n];return t}var p1=xh("animationend"),m1=xh("animationiteration"),g1=xh("animationstart"),y1=xh("transitionend"),_1=new Map,o0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){_1.set(t,e),_s(e,[t])}for(var Bf=0;Bf<o0.length;Bf++){var Uf=o0[Bf],QI=Uf.toLowerCase(),XI=Uf[0].toUpperCase()+Uf.slice(1);Ii(QI,"on"+XI)}Ii(p1,"onAnimationEnd");Ii(m1,"onAnimationIteration");Ii(g1,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(y1,"onTransitionEnd");mo("onMouseEnter",["mouseout","mouseover"]);mo("onMouseLeave",["mouseout","mouseover"]);mo("onPointerEnter",["pointerout","pointerover"]);mo("onPointerLeave",["pointerout","pointerover"]);_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_s("onBeforeInput",["compositionend","keypress","textInput","paste"]);_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function a0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QP(r,e,void 0,t),t.currentTarget=null}function v1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;a0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;a0(i,a,c),s=l}}}if(Tc)throw t=Qd,Tc=!1,Qd=null,t}function Fe(t,e){var n=e[sp];n===void 0&&(n=e[sp]=new Set);var r=t+"__bubble";n.has(r)||(w1(e,t,2,!1),n.add(r))}function $f(t,e,n){var r=0;e&&(r|=4),w1(n,t,r,e)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function cl(t){if(!t[Vu]){t[Vu]=!0,PT.forEach(function(n){n!=="selectionchange"&&(YI.has(n)||$f(n,!1,t),$f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vu]||(e[Vu]=!0,$f("selectionchange",!1,e))}}function w1(t,e,n,r){switch(r1(e)){case 1:var i=hI;break;case 4:i=fI;break;default:i=Nm}n=i.bind(null,e,n,t),i=void 0,!Kd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function zf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}zT(function(){var c=s,d=Rm(n),u=[];e:{var f=_1.get(t);if(f!==void 0){var p=Fm,y=t;switch(t){case"keypress":if(ec(n)===0)break e;case"keydown":case"keyup":p=PI;break;case"focusin":y="focus",p=Of;break;case"focusout":y="blur",p=Of;break;case"beforeblur":case"afterblur":p=Of;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Q_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=mI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=bI;break;case p1:case m1:case g1:p=_I;break;case y1:p=VI;break;case"scroll":p=dI;break;case"wheel":p=DI;break;case"copy":case"cut":case"paste":p=wI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Y_}var m=(e&4)!==0,w=!m&&t==="scroll",_=m?f!==null?f+"Capture":null:f;m=[];for(var v=c,x;v!==null;){x=v;var P=x.stateNode;if(x.tag===5&&P!==null&&(x=P,_!==null&&(P=il(v,_),P!=null&&m.push(hl(v,P,x)))),w)break;v=v.return}0<m.length&&(f=new p(f,y,null,n,d),u.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==qd&&(y=n.relatedTarget||n.fromElement)&&(Qi(y)||y[Cr]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Qi(y):null,y!==null&&(w=vs(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(m=Q_,P="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=Y_,P="onPointerLeave",_="onPointerEnter",v="pointer"),w=p==null?f:$s(p),x=y==null?f:$s(y),f=new m(P,v+"leave",p,n,d),f.target=w,f.relatedTarget=x,P=null,Qi(d)===c&&(m=new m(_,v+"enter",y,n,d),m.target=x,m.relatedTarget=w,P=m),w=P,p&&y)t:{for(m=p,_=y,v=0,x=m;x;x=Vs(x))v++;for(x=0,P=_;P;P=Vs(P))x++;for(;0<v-x;)m=Vs(m),v--;for(;0<x-v;)_=Vs(_),x--;for(;v--;){if(m===_||_!==null&&m===_.alternate)break t;m=Vs(m),_=Vs(_)}m=null}else m=null;p!==null&&l0(u,f,p,m,!1),y!==null&&w!==null&&l0(u,w,y,m,!0)}}e:{if(f=c?$s(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var R=UI;else if(e0(f))if(u1)R=HI;else{R=zI;var O=$I}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=WI);if(R&&(R=R(t,c))){l1(u,R,n,d);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Ud(f,"number",f.value)}switch(O=c?$s(c):window,t){case"focusin":(e0(O)||O.contentEditable==="true")&&(Bs=O,Jd=c,ja=null);break;case"focusout":ja=Jd=Bs=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,s0(u,n,d);break;case"selectionchange":if(KI)break;case"keydown":case"keyup":s0(u,n,d)}var C;if(jm)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else js?o1(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(s1&&n.locale!=="ko"&&(js||S!=="onCompositionStart"?S==="onCompositionEnd"&&js&&(C=i1()):(Xr=d,Om="value"in Xr?Xr.value:Xr.textContent,js=!0)),O=Cc(c,S),0<O.length&&(S=new X_(S,t,null,n,d),u.push({event:S,listeners:O}),C?S.data=C:(C=a1(n),C!==null&&(S.data=C)))),(C=OI?FI(t,n):LI(t,n))&&(c=Cc(c,"onBeforeInput"),0<c.length&&(d=new X_("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=C))}v1(u,e)})}function hl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=il(t,n),s!=null&&r.unshift(hl(t,s,i)),s=il(t,e),s!=null&&r.push(hl(t,s,i))),t=t.return}return r}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=il(n,s),l!=null&&o.unshift(hl(n,l,a))):i||(l=il(n,s),l!=null&&o.push(hl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ZI=/\r\n?/g,JI=/\u0000|\uFFFD/g;function u0(t){return(typeof t=="string"?t:""+t).replace(ZI,`
`).replace(JI,"")}function Mu(t,e,n){if(e=u0(e),u0(t)!==e&&n)throw Error(H(425))}function Pc(){}var tp=null,np=null;function rp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ip=typeof setTimeout=="function"?setTimeout:void 0,ek=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,tk=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(t){return c0.resolve(null).then(t).catch(nk)}:ip;function nk(t){setTimeout(function(){throw t})}function Wf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),al(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);al(e)}function oi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $o=Math.random().toString(36).slice(2),tr="__reactFiber$"+$o,fl="__reactProps$"+$o,Cr="__reactContainer$"+$o,sp="__reactEvents$"+$o,rk="__reactListeners$"+$o,ik="__reactHandles$"+$o;function Qi(t){var e=t[tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cr]||n[tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h0(t);t!==null;){if(n=t[tr])return n;t=h0(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[tr]||t[Cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Eh(t){return t[fl]||null}var op=[],zs=-1;function ki(t){return{current:t}}function Le(t){0>zs||(t.current=op[zs],op[zs]=null,zs--)}function De(t,e){zs++,op[zs]=t.current,t.current=e}var _i={},Bt=ki(_i),Jt=ki(!1),cs=_i;function go(t,e){var n=t.type.contextTypes;if(!n)return _i;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function en(t){return t=t.childContextTypes,t!=null}function Ic(){Le(Jt),Le(Bt)}function f0(t,e,n){if(Bt.current!==_i)throw Error(H(168));De(Bt,e),De(Jt,n)}function T1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,$P(t)||"Unknown",i));return Ge({},n,r)}function kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_i,cs=Bt.current,De(Bt,t),De(Jt,Jt.current),!0}function d0(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=T1(t,e,cs),r.__reactInternalMemoizedMergedChildContext=t,Le(Jt),Le(Bt),De(Bt,t)):Le(Jt),De(Jt,n)}var yr=null,Sh=!1,Hf=!1;function x1(t){yr===null?yr=[t]:yr.push(t)}function sk(t){Sh=!0,x1(t)}function bi(){if(!Hf&&yr!==null){Hf=!0;var t=0,e=Ie;try{var n=yr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yr=null,Sh=!1}catch(i){throw yr!==null&&(yr=yr.slice(t+1)),GT(Vm,bi),i}finally{Ie=e,Hf=!1}}return null}var Ws=[],Hs=0,bc=null,Rc=0,Mn=[],Dn=0,hs=null,vr=1,wr="";function $i(t,e){Ws[Hs++]=Rc,Ws[Hs++]=bc,bc=t,Rc=e}function E1(t,e,n){Mn[Dn++]=vr,Mn[Dn++]=wr,Mn[Dn++]=hs,hs=t;var r=vr;t=wr;var i=32-Kn(r)-1;r&=~(1<<i),n+=1;var s=32-Kn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,vr=1<<32-Kn(e)+i|n<<i|r,wr=s+t}else vr=1<<s|n<<i|r,wr=t}function Um(t){t.return!==null&&($i(t,1),E1(t,1,0))}function $m(t){for(;t===bc;)bc=Ws[--Hs],Ws[Hs]=null,Rc=Ws[--Hs],Ws[Hs]=null;for(;t===hs;)hs=Mn[--Dn],Mn[Dn]=null,wr=Mn[--Dn],Mn[Dn]=null,vr=Mn[--Dn],Mn[Dn]=null}var vn=null,mn=null,je=!1,Gn=null;function S1(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,mn=oi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:vr,overflow:wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,mn=null,!0):!1;default:return!1}}function ap(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lp(t){if(je){var e=mn;if(e){var n=e;if(!p0(t,e)){if(ap(t))throw Error(H(418));e=oi(n.nextSibling);var r=vn;e&&p0(t,e)?S1(r,n):(t.flags=t.flags&-4097|2,je=!1,vn=t)}}else{if(ap(t))throw Error(H(418));t.flags=t.flags&-4097|2,je=!1,vn=t}}}function m0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function Du(t){if(t!==vn)return!1;if(!je)return m0(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rp(t.type,t.memoizedProps)),e&&(e=mn)){if(ap(t))throw A1(),Error(H(418));for(;e;)S1(t,e),e=oi(e.nextSibling)}if(m0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mn=oi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mn=null}}else mn=vn?oi(t.stateNode.nextSibling):null;return!0}function A1(){for(var t=mn;t;)t=oi(t.nextSibling)}function yo(){mn=vn=null,je=!1}function zm(t){Gn===null?Gn=[t]:Gn.push(t)}var ok=Nr.ReactCurrentBatchConfig;function ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Nu(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g0(t){var e=t._init;return e(t._payload)}function C1(t){function e(_,v){if(t){var x=_.deletions;x===null?(_.deletions=[v],_.flags|=16):x.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=ci(_,v),_.index=0,_.sibling=null,_}function s(_,v,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<v?(_.flags|=2,v):x):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,x,P){return v===null||v.tag!==6?(v=Zf(x,_.mode,P),v.return=_,v):(v=i(v,x),v.return=_,v)}function l(_,v,x,P){var R=x.type;return R===Ls?d(_,v,x.props.children,P,x.key):v!==null&&(v.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Wr&&g0(R)===v.type)?(P=i(v,x.props),P.ref=ga(_,v,x),P.return=_,P):(P=ac(x.type,x.key,x.props,null,_.mode,P),P.ref=ga(_,v,x),P.return=_,P)}function c(_,v,x,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Jf(x,_.mode,P),v.return=_,v):(v=i(v,x.children||[]),v.return=_,v)}function d(_,v,x,P,R){return v===null||v.tag!==7?(v=ns(x,_.mode,P,R),v.return=_,v):(v=i(v,x),v.return=_,v)}function u(_,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Zf(""+v,_.mode,x),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Su:return x=ac(v.type,v.key,v.props,null,_.mode,x),x.ref=ga(_,null,v),x.return=_,x;case Fs:return v=Jf(v,_.mode,x),v.return=_,v;case Wr:var P=v._init;return u(_,P(v._payload),x)}if(Sa(v)||ha(v))return v=ns(v,_.mode,x,null),v.return=_,v;Nu(_,v)}return null}function f(_,v,x,P){var R=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return R!==null?null:a(_,v,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Su:return x.key===R?l(_,v,x,P):null;case Fs:return x.key===R?c(_,v,x,P):null;case Wr:return R=x._init,f(_,v,R(x._payload),P)}if(Sa(x)||ha(x))return R!==null?null:d(_,v,x,P,null);Nu(_,x)}return null}function p(_,v,x,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(x)||null,a(v,_,""+P,R);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Su:return _=_.get(P.key===null?x:P.key)||null,l(v,_,P,R);case Fs:return _=_.get(P.key===null?x:P.key)||null,c(v,_,P,R);case Wr:var O=P._init;return p(_,v,x,O(P._payload),R)}if(Sa(P)||ha(P))return _=_.get(x)||null,d(v,_,P,R,null);Nu(v,P)}return null}function y(_,v,x,P){for(var R=null,O=null,C=v,S=v=0,A=null;C!==null&&S<x.length;S++){C.index>S?(A=C,C=null):A=C.sibling;var I=f(_,C,x[S],P);if(I===null){C===null&&(C=A);break}t&&C&&I.alternate===null&&e(_,C),v=s(I,v,S),O===null?R=I:O.sibling=I,O=I,C=A}if(S===x.length)return n(_,C),je&&$i(_,S),R;if(C===null){for(;S<x.length;S++)C=u(_,x[S],P),C!==null&&(v=s(C,v,S),O===null?R=C:O.sibling=C,O=C);return je&&$i(_,S),R}for(C=r(_,C);S<x.length;S++)A=p(C,_,S,x[S],P),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?S:A.key),v=s(A,v,S),O===null?R=A:O.sibling=A,O=A);return t&&C.forEach(function(V){return e(_,V)}),je&&$i(_,S),R}function m(_,v,x,P){var R=ha(x);if(typeof R!="function")throw Error(H(150));if(x=R.call(x),x==null)throw Error(H(151));for(var O=R=null,C=v,S=v=0,A=null,I=x.next();C!==null&&!I.done;S++,I=x.next()){C.index>S?(A=C,C=null):A=C.sibling;var V=f(_,C,I.value,P);if(V===null){C===null&&(C=A);break}t&&C&&V.alternate===null&&e(_,C),v=s(V,v,S),O===null?R=V:O.sibling=V,O=V,C=A}if(I.done)return n(_,C),je&&$i(_,S),R;if(C===null){for(;!I.done;S++,I=x.next())I=u(_,I.value,P),I!==null&&(v=s(I,v,S),O===null?R=I:O.sibling=I,O=I);return je&&$i(_,S),R}for(C=r(_,C);!I.done;S++,I=x.next())I=p(C,_,S,I.value,P),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?S:I.key),v=s(I,v,S),O===null?R=I:O.sibling=I,O=I);return t&&C.forEach(function(M){return e(_,M)}),je&&$i(_,S),R}function w(_,v,x,P){if(typeof x=="object"&&x!==null&&x.type===Ls&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Su:e:{for(var R=x.key,O=v;O!==null;){if(O.key===R){if(R=x.type,R===Ls){if(O.tag===7){n(_,O.sibling),v=i(O,x.props.children),v.return=_,_=v;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Wr&&g0(R)===O.type){n(_,O.sibling),v=i(O,x.props),v.ref=ga(_,O,x),v.return=_,_=v;break e}n(_,O);break}else e(_,O);O=O.sibling}x.type===Ls?(v=ns(x.props.children,_.mode,P,x.key),v.return=_,_=v):(P=ac(x.type,x.key,x.props,null,_.mode,P),P.ref=ga(_,v,x),P.return=_,_=P)}return o(_);case Fs:e:{for(O=x.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(_,v.sibling),v=i(v,x.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=Jf(x,_.mode,P),v.return=_,_=v}return o(_);case Wr:return O=x._init,w(_,v,O(x._payload),P)}if(Sa(x))return y(_,v,x,P);if(ha(x))return m(_,v,x,P);Nu(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(_,v.sibling),v=i(v,x),v.return=_,_=v):(n(_,v),v=Zf(x,_.mode,P),v.return=_,_=v),o(_)):n(_,v)}return w}var _o=C1(!0),P1=C1(!1),Vc=ki(null),Mc=null,qs=null,Wm=null;function Hm(){Wm=qs=Mc=null}function qm(t){var e=Vc.current;Le(Vc),t._currentValue=e}function up(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oo(t,e){Mc=t,Wm=qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(Wm!==t)if(t={context:t,memoizedValue:e,next:null},qs===null){if(Mc===null)throw Error(H(308));qs=t,Mc.dependencies={lanes:0,firstContext:t}}else qs=qs.next=t;return e}var Xi=null;function Gm(t){Xi===null?Xi=[t]:Xi.push(t)}function I1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Gm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pr(t,r)}function Pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hr=!1;function Km(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pr(t,n)}return i=r.interleaved,i===null?(e.next=e,Gm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pr(t,n)}function tc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mm(t,n)}}function y0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var i=t.updateQueue;Hr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,m=a;switch(f=e,p=n,m.tag){case 1:if(y=m.payload,typeof y=="function"){u=y.call(p,u,f);break e}u=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,f=typeof y=="function"?y.call(p,u,f):y,f==null)break e;u=Ge({},u,f);break e;case 2:Hr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=u):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=u}}function _0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var Hl={},sr=ki(Hl),dl=ki(Hl),pl=ki(Hl);function Yi(t){if(t===Hl)throw Error(H(174));return t}function Qm(t,e){switch(De(pl,e),De(dl,t),De(sr,Hl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zd(e,t)}Le(sr),De(sr,e)}function vo(){Le(sr),Le(dl),Le(pl)}function b1(t){Yi(pl.current);var e=Yi(sr.current),n=zd(e,t.type);e!==n&&(De(dl,t),De(sr,n))}function Xm(t){dl.current===t&&(Le(sr),Le(dl))}var $e=ki(0);function Nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qf=[];function Ym(){for(var t=0;t<qf.length;t++)qf[t]._workInProgressVersionPrimary=null;qf.length=0}var nc=Nr.ReactCurrentDispatcher,Gf=Nr.ReactCurrentBatchConfig,fs=0,qe=null,lt=null,pt=null,Oc=!1,Ba=!1,ml=0,ak=0;function bt(){throw Error(H(321))}function Zm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function Jm(t,e,n,r,i,s){if(fs=s,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nc.current=t===null||t.memoizedState===null?hk:fk,t=n(r,i),Ba){s=0;do{if(Ba=!1,ml=0,25<=s)throw Error(H(301));s+=1,pt=lt=null,e.updateQueue=null,nc.current=dk,t=n(r,i)}while(Ba)}if(nc.current=Fc,e=lt!==null&&lt.next!==null,fs=0,pt=lt=qe=null,Oc=!1,e)throw Error(H(300));return t}function eg(){var t=ml!==0;return ml=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?qe.memoizedState=pt=t:pt=pt.next=t,pt}function Bn(){if(lt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=pt===null?qe.memoizedState:pt.next;if(e!==null)pt=e,lt=t;else{if(t===null)throw Error(H(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?qe.memoizedState=pt=t:pt=pt.next=t}return pt}function gl(t,e){return typeof e=="function"?e(t):e}function Kf(t){var e=Bn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((fs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,qe.lanes|=d,ds|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Xn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qe.lanes|=s,ds|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qf(t){var e=Bn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Xn(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function R1(){}function V1(t,e){var n=qe,r=Bn(),i=e(),s=!Xn(r.memoizedState,i);if(s&&(r.memoizedState=i,Zt=!0),r=r.queue,tg(N1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,yl(9,D1.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(H(349));fs&30||M1(n,e,i)}return i}function M1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D1(t,e,n,r){e.value=n,e.getSnapshot=r,O1(e)&&F1(t)}function N1(t,e,n){return n(function(){O1(e)&&F1(t)})}function O1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function F1(t){var e=Pr(t,1);e!==null&&Qn(e,t,1,-1)}function v0(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:t},e.queue=t,t=t.dispatch=ck.bind(null,qe,t),[e.memoizedState,t]}function yl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function L1(){return Bn().memoizedState}function rc(t,e,n,r){var i=Jn();qe.flags|=t,i.memoizedState=yl(1|e,n,void 0,r===void 0?null:r)}function Ah(t,e,n,r){var i=Bn();r=r===void 0?null:r;var s=void 0;if(lt!==null){var o=lt.memoizedState;if(s=o.destroy,r!==null&&Zm(r,o.deps)){i.memoizedState=yl(e,n,s,r);return}}qe.flags|=t,i.memoizedState=yl(1|e,n,s,r)}function w0(t,e){return rc(8390656,8,t,e)}function tg(t,e){return Ah(2048,8,t,e)}function j1(t,e){return Ah(4,2,t,e)}function B1(t,e){return Ah(4,4,t,e)}function U1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $1(t,e,n){return n=n!=null?n.concat([t]):null,Ah(4,4,U1.bind(null,e,t),n)}function ng(){}function z1(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W1(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H1(t,e,n){return fs&21?(Xn(n,e)||(n=XT(),qe.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function lk(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Gf.transition;Gf.transition={};try{t(!1),e()}finally{Ie=n,Gf.transition=r}}function q1(){return Bn().memoizedState}function uk(t,e,n){var r=ui(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G1(t))K1(e,n);else if(n=I1(t,e,n,r),n!==null){var i=Ht();Qn(n,t,r,i),Q1(n,e,r)}}function ck(t,e,n){var r=ui(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G1(t))K1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xn(a,o)){var l=e.interleaved;l===null?(i.next=i,Gm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=I1(t,e,i,r),n!==null&&(i=Ht(),Qn(n,t,r,i),Q1(n,e,r))}}function G1(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function K1(t,e){Ba=Oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Mm(t,n)}}var Fc={readContext:jn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},hk={readContext:jn,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:w0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rc(4194308,4,U1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return rc(4,2,t,e)},useMemo:function(t,e){var n=Jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uk.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:v0,useDebugValue:ng,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=v0(!1),e=t[0];return t=lk.bind(null,t[1]),Jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,i=Jn();if(je){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),mt===null)throw Error(H(349));fs&30||M1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,w0(N1.bind(null,r,s,t),[t]),r.flags|=2048,yl(9,D1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Jn(),e=mt.identifierPrefix;if(je){var n=wr,r=vr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ml++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ak++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fk={readContext:jn,useCallback:z1,useContext:jn,useEffect:tg,useImperativeHandle:$1,useInsertionEffect:j1,useLayoutEffect:B1,useMemo:W1,useReducer:Kf,useRef:L1,useState:function(){return Kf(gl)},useDebugValue:ng,useDeferredValue:function(t){var e=Bn();return H1(e,lt.memoizedState,t)},useTransition:function(){var t=Kf(gl)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:R1,useSyncExternalStore:V1,useId:q1,unstable_isNewReconciler:!1},dk={readContext:jn,useCallback:z1,useContext:jn,useEffect:tg,useImperativeHandle:$1,useInsertionEffect:j1,useLayoutEffect:B1,useMemo:W1,useReducer:Qf,useRef:L1,useState:function(){return Qf(gl)},useDebugValue:ng,useDeferredValue:function(t){var e=Bn();return lt===null?e.memoizedState=t:H1(e,lt.memoizedState,t)},useTransition:function(){var t=Qf(gl)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:R1,useSyncExternalStore:V1,useId:q1,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ch={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=ui(t),s=xr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ai(t,s,i),e!==null&&(Qn(e,t,i,r),tc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=ui(t),s=xr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ai(t,s,i),e!==null&&(Qn(e,t,i,r),tc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=ui(t),i=xr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ai(t,i,r),e!==null&&(Qn(e,t,r,n),tc(e,t,r))}};function T0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ul(n,r)||!ul(i,s):!0}function X1(t,e,n){var r=!1,i=_i,s=e.contextType;return typeof s=="object"&&s!==null?s=jn(s):(i=en(e)?cs:Bt.current,r=e.contextTypes,s=(r=r!=null)?go(t,i):_i),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ch,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function x0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ch.enqueueReplaceState(e,e.state,null)}function hp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Km(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jn(s):(s=en(e)?cs:Bt.current,i.context=go(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ch.enqueueReplaceState(i,i.state,null),Dc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wo(t,e){try{var n="",r=e;do n+=UP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Xf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pk=typeof WeakMap=="function"?WeakMap:Map;function Y1(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jc||(jc=!0,xp=r),fp(t,e)},n}function Z1(t,e,n){n=xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fp(t,e),typeof r!="function"&&(li===null?li=new Set([this]):li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function E0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ik.bind(null,t,e,n),e.then(t,t))}function S0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,ai(n,e,1))),n.lanes|=1),t)}var mk=Nr.ReactCurrentOwner,Zt=!1;function zt(t,e,n,r){e.child=t===null?P1(e,null,n,r):_o(e,t.child,n,r)}function C0(t,e,n,r,i){n=n.render;var s=e.ref;return oo(e,i),r=Jm(t,e,n,r,s,i),n=eg(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ir(t,e,i)):(je&&n&&Um(e),e.flags|=1,zt(t,e,r,i),e.child)}function P0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!cg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,J1(t,e,s,r,i)):(t=ac(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ul,n(o,r)&&t.ref===e.ref)return Ir(t,e,i)}return e.flags|=1,t=ci(s,r),t.ref=e.ref,t.return=e,e.child=t}function J1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ul(s,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Ir(t,e,i)}return dp(t,e,n,r,i)}function ex(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ks,fn),fn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Ks,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(Ks,fn),fn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(Ks,fn),fn|=r;return zt(t,e,i,n),e.child}function tx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dp(t,e,n,r,i){var s=en(n)?cs:Bt.current;return s=go(e,s),oo(e,i),n=Jm(t,e,n,r,s,i),r=eg(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ir(t,e,i)):(je&&r&&Um(e),e.flags|=1,zt(t,e,n,i),e.child)}function I0(t,e,n,r,i){if(en(n)){var s=!0;kc(e)}else s=!1;if(oo(e,i),e.stateNode===null)ic(t,e),X1(e,n,r),hp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=en(n)?cs:Bt.current,c=go(e,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&x0(e,o,r,c),Hr=!1;var f=e.memoizedState;o.state=f,Dc(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Jt.current||Hr?(typeof d=="function"&&(cp(e,n,d,r),l=e.memoizedState),(a=Hr||T0(e,n,a,r,f,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,k1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hn(e.type,a),o.props=c,u=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jn(l):(l=en(n)?cs:Bt.current,l=go(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||f!==l)&&x0(e,o,r,l),Hr=!1,f=e.memoizedState,o.state=f,Dc(e,r,o,i);var y=e.memoizedState;a!==u||f!==y||Jt.current||Hr?(typeof p=="function"&&(cp(e,n,p,r),y=e.memoizedState),(c=Hr||T0(e,n,c,r,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return pp(t,e,n,r,s,i)}function pp(t,e,n,r,i,s){tx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&d0(e,n,!1),Ir(t,e,s);r=e.stateNode,mk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_o(e,t.child,null,s),e.child=_o(e,null,a,s)):zt(t,e,a,s),e.memoizedState=r.state,i&&d0(e,n,!0),e.child}function nx(t){var e=t.stateNode;e.pendingContext?f0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f0(t,e.context,!1),Qm(t,e.containerInfo)}function k0(t,e,n,r,i){return yo(),zm(i),e.flags|=256,zt(t,e,n,r),e.child}var mp={dehydrated:null,treeContext:null,retryLane:0};function gp(t){return{baseLanes:t,cachePool:null,transitions:null}}function rx(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De($e,i&1),t===null)return lp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kh(o,r,0,null),t=ns(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gp(n),e.memoizedState=mp,t):rg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return gk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ci(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ci(a,s):(s=ns(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?gp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=mp,r}return s=t.child,t=s.sibling,r=ci(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rg(t,e){return e=kh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ou(t,e,n,r){return r!==null&&zm(r),_o(e,t.child,null,n),t=rg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Xf(Error(H(422))),Ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=kh({mode:"visible",children:r.children},i,0,null),s=ns(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_o(e,t.child,null,o),e.child.memoizedState=gp(o),e.memoizedState=mp,s);if(!(e.mode&1))return Ou(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=Xf(s,r,void 0),Ou(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zt||a){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pr(t,i),Qn(r,t,i,-1))}return ug(),r=Xf(Error(H(421))),Ou(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mn=oi(i.nextSibling),vn=e,je=!0,Gn=null,t!==null&&(Mn[Dn++]=vr,Mn[Dn++]=wr,Mn[Dn++]=hs,vr=t.id,wr=t.overflow,hs=e),e=rg(e,r.children),e.flags|=4096,e)}function b0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),up(t.return,e,n)}function Yf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ix(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(zt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,n,e);else if(t.tag===19)b0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Nc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Nc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yf(e,!0,n,null,s);break;case"together":Yf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yk(t,e,n){switch(e.tag){case 3:nx(e),yo();break;case 5:b1(e);break;case 1:en(e.type)&&kc(e);break;case 4:Qm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(Vc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?rx(t,e,n):(De($e,$e.current&1),t=Ir(t,e,n),t!==null?t.sibling:null);De($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ix(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,ex(t,e,n)}return Ir(t,e,n)}var sx,yp,ox,ax;sx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yp=function(){};ox=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yi(sr.current);var s=null;switch(n){case"input":i=jd(t,i),r=jd(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=$d(t,i),r=$d(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pc)}Wd(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(nl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(nl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ax=function(t,e,n,r){n!==r&&(e.flags|=4)};function ya(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _k(t,e,n){var r=e.pendingProps;switch($m(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return en(e.type)&&Ic(),Rt(e),null;case 3:return r=e.stateNode,vo(),Le(Jt),Le(Bt),Ym(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gn!==null&&(Ap(Gn),Gn=null))),yp(t,e),Rt(e),null;case 5:Xm(e);var i=Yi(pl.current);if(n=e.type,t!==null&&e.stateNode!=null)ox(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Rt(e),null}if(t=Yi(sr.current),Du(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tr]=e,r[fl]=s,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<Ca.length;i++)Fe(Ca[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":j_(r,s),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fe("invalid",r);break;case"textarea":U_(r,s),Fe("invalid",r)}Wd(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Mu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Mu(r.textContent,a,t),i=["children",""+a]):nl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Au(r),B_(r,s,!0);break;case"textarea":Au(r),$_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tr]=e,t[fl]=r,sx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hd(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ca.length;i++)Fe(Ca[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":j_(t,r),i=jd(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":U_(t,r),i=$d(t,r),Fe("invalid",t);break;default:i=r}Wd(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&rl(t,l):typeof l=="number"&&rl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Fe("scroll",t):l!=null&&Pm(t,s,l,o))}switch(n){case"input":Au(t),B_(t,r,!1);break;case"textarea":Au(t),$_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?no(t,!!r.multiple,s,!1):r.defaultValue!=null&&no(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)ax(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Yi(pl.current),Yi(sr.current),Du(e)){if(r=e.stateNode,n=e.memoizedProps,r[tr]=e,(s=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:Mu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=e,e.stateNode=r}return Rt(e),null;case 13:if(Le($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&mn!==null&&e.mode&1&&!(e.flags&128))A1(),yo(),e.flags|=98560,s=!1;else if(s=Du(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[tr]=e}else yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),s=!1}else Gn!==null&&(Ap(Gn),Gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ct===0&&(ct=3):ug())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return vo(),yp(t,e),t===null&&cl(e.stateNode.containerInfo),Rt(e),null;case 10:return qm(e.type._context),Rt(e),null;case 17:return en(e.type)&&Ic(),Rt(e),null;case 19:if(Le($e),s=e.memoizedState,s===null)return Rt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ya(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nc(t),o!==null){for(e.flags|=128,ya(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>To&&(e.flags|=128,r=!0,ya(s,!1),e.lanes=4194304)}else{if(!r)if(t=Nc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ya(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Rt(e),null}else 2*tt()-s.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,r=!0,ya(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=$e.current,De($e,r?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return lg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function vk(t,e){switch($m(e),e.tag){case 1:return en(e.type)&&Ic(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vo(),Le(Jt),Le(Bt),Ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xm(e),null;case 13:if(Le($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le($e),null;case 4:return vo(),null;case 10:return qm(e.type._context),null;case 22:case 23:return lg(),null;case 24:return null;default:return null}}var Fu=!1,Ot=!1,wk=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function _p(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var R0=!1;function Tk(t,e){if(tp=Sc,t=f1(),Bm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=t,f=null;t:for(;;){for(var p;u!==n||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(p=u.firstChild)!==null;)f=u,u=p;for(;;){if(u===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++d===r&&(l=o),(p=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(np={focusedElem:t,selectionRange:n},Sc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,w=y.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?m:Hn(e.type,m),w);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(P){Xe(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return y=R0,R0=!1,y}function Ua(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_p(e,n,s)}i=i.next}while(i!==r)}}function Ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lx(t){var e=t.alternate;e!==null&&(t.alternate=null,lx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[fl],delete e[sp],delete e[rk],delete e[ik])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ux(t){return t.tag===5||t.tag===3||t.tag===4}function V0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ux(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pc));else if(r!==4&&(t=t.child,t!==null))for(wp(t,e,n),t=t.sibling;t!==null;)wp(t,e,n),t=t.sibling}function Tp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tp(t,e,n),t=t.sibling;t!==null;)Tp(t,e,n),t=t.sibling}var vt=null,qn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)cx(t,e,n),n=n.sibling}function cx(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(vh,n)}catch{}switch(n.tag){case 5:Ot||Gs(n,e);case 6:var r=vt,i=qn;vt=null,Ur(t,e,n),vt=r,qn=i,vt!==null&&(qn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(qn?(t=vt,n=n.stateNode,t.nodeType===8?Wf(t.parentNode,n):t.nodeType===1&&Wf(t,n),al(t)):Wf(vt,n.stateNode));break;case 4:r=vt,i=qn,vt=n.stateNode.containerInfo,qn=!0,Ur(t,e,n),vt=r,qn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_p(n,e,o),i=i.next}while(i!==r)}Ur(t,e,n);break;case 1:if(!Ot&&(Gs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Ur(t,e,n),Ot=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function M0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wk),e.forEach(function(r){var i=bk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,qn=!1;break e;case 3:vt=a.stateNode.containerInfo,qn=!0;break e;case 4:vt=a.stateNode.containerInfo,qn=!0;break e}a=a.return}if(vt===null)throw Error(H(160));cx(s,o,i),vt=null,qn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Xe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hx(e,t),e=e.sibling}function hx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),Zn(t),r&4){try{Ua(3,t,t.return),Ph(3,t)}catch(m){Xe(t,t.return,m)}try{Ua(5,t,t.return)}catch(m){Xe(t,t.return,m)}}break;case 1:Wn(e,t),Zn(t),r&512&&n!==null&&Gs(n,n.return);break;case 5:if(Wn(e,t),Zn(t),r&512&&n!==null&&Gs(n,n.return),t.flags&32){var i=t.stateNode;try{rl(i,"")}catch(m){Xe(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&MT(i,s),Hd(a,o);var c=Hd(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?LT(i,u):d==="dangerouslySetInnerHTML"?OT(i,u):d==="children"?rl(i,u):Pm(i,d,u,c)}switch(a){case"input":Bd(i,s);break;case"textarea":DT(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?no(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?no(i,!!s.multiple,s.defaultValue,!0):no(i,!!s.multiple,s.multiple?[]:"",!1))}i[fl]=s}catch(m){Xe(t,t.return,m)}}break;case 6:if(Wn(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Xe(t,t.return,m)}}break;case 3:if(Wn(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{al(e.containerInfo)}catch(m){Xe(t,t.return,m)}break;case 4:Wn(e,t),Zn(t);break;case 13:Wn(e,t),Zn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(og=tt())),r&4&&M0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||d,Wn(e,t),Ot=c):Wn(e,t),Zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Y=t,d=t.child;d!==null;){for(u=Y=d;Y!==null;){switch(f=Y,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ua(4,f,f.return);break;case 1:Gs(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(m){Xe(r,n,m)}}break;case 5:Gs(f,f.return);break;case 22:if(f.memoizedState!==null){N0(u);continue}}p!==null?(p.return=f,Y=p):N0(u)}d=d.sibling}e:for(d=null,u=t;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=FT("display",o))}catch(m){Xe(t,t.return,m)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){Xe(t,t.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Wn(e,t),Zn(t),r&4&&M0(t);break;case 21:break;default:Wn(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ux(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rl(i,""),r.flags&=-33);var s=V0(t);Tp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=V0(t);wp(t,a,o);break;default:throw Error(H(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xk(t,e,n){Y=t,fx(t)}function fx(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=Fu;var c=Ot;if(Fu=o,(Ot=l)&&!c)for(Y=i;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?O0(i):l!==null?(l.return=o,Y=l):O0(i);for(;s!==null;)Y=s,fx(s),s=s.sibling;Y=i,Fu=a,Ot=c}D0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):D0(t)}}function D0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Ph(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&al(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ot||e.flags&512&&vp(e)}catch(f){Xe(e,e.return,f)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function N0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function O0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ph(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Xe(e,i,l)}}var s=e.return;try{vp(e)}catch(l){Xe(e,s,l)}break;case 5:var o=e.return;try{vp(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var Ek=Math.ceil,Lc=Nr.ReactCurrentDispatcher,ig=Nr.ReactCurrentOwner,Ln=Nr.ReactCurrentBatchConfig,Se=0,mt=null,ot=null,Et=0,fn=0,Ks=ki(0),ct=0,_l=null,ds=0,Ih=0,sg=0,$a=null,Xt=null,og=0,To=1/0,mr=null,jc=!1,xp=null,li=null,Lu=!1,Yr=null,Bc=0,za=0,Ep=null,sc=-1,oc=0;function Ht(){return Se&6?tt():sc!==-1?sc:sc=tt()}function ui(t){return t.mode&1?Se&2&&Et!==0?Et&-Et:ok.transition!==null?(oc===0&&(oc=XT()),oc):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:r1(t.type)),t):1}function Qn(t,e,n,r){if(50<za)throw za=0,Ep=null,Error(H(185));$l(t,n,r),(!(Se&2)||t!==mt)&&(t===mt&&(!(Se&2)&&(Ih|=n),ct===4&&Kr(t,Et)),tn(t,r),n===1&&Se===0&&!(e.mode&1)&&(To=tt()+500,Sh&&bi()))}function tn(t,e){var n=t.callbackNode;oI(t,e);var r=Ec(t,t===mt?Et:0);if(r===0)n!==null&&H_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&H_(n),e===1)t.tag===0?sk(F0.bind(null,t)):x1(F0.bind(null,t)),tk(function(){!(Se&6)&&bi()}),n=null;else{switch(YT(r)){case 1:n=Vm;break;case 4:n=KT;break;case 16:n=xc;break;case 536870912:n=QT;break;default:n=xc}n=wx(n,dx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dx(t,e){if(sc=-1,oc=0,Se&6)throw Error(H(327));var n=t.callbackNode;if(ao()&&t.callbackNode!==n)return null;var r=Ec(t,t===mt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uc(t,r);else{e=r;var i=Se;Se|=2;var s=mx();(mt!==t||Et!==e)&&(mr=null,To=tt()+500,ts(t,e));do try{Ck();break}catch(a){px(t,a)}while(!0);Hm(),Lc.current=s,Se=i,ot!==null?e=0:(mt=null,Et=0,e=ct)}if(e!==0){if(e===2&&(i=Xd(t),i!==0&&(r=i,e=Sp(t,i))),e===1)throw n=_l,ts(t,0),Kr(t,r),tn(t,tt()),n;if(e===6)Kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Sk(i)&&(e=Uc(t,r),e===2&&(s=Xd(t),s!==0&&(r=s,e=Sp(t,s))),e===1))throw n=_l,ts(t,0),Kr(t,r),tn(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:zi(t,Xt,mr);break;case 3:if(Kr(t,r),(r&130023424)===r&&(e=og+500-tt(),10<e)){if(Ec(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ip(zi.bind(null,t,Xt,mr),e);break}zi(t,Xt,mr);break;case 4:if(Kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ek(r/1960))-r,10<r){t.timeoutHandle=ip(zi.bind(null,t,Xt,mr),r);break}zi(t,Xt,mr);break;case 5:zi(t,Xt,mr);break;default:throw Error(H(329))}}}return tn(t,tt()),t.callbackNode===n?dx.bind(null,t):null}function Sp(t,e){var n=$a;return t.current.memoizedState.isDehydrated&&(ts(t,e).flags|=256),t=Uc(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Ap(e)),t}function Ap(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function Sk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~sg,e&=~Ih,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function F0(t){if(Se&6)throw Error(H(327));ao();var e=Ec(t,0);if(!(e&1))return tn(t,tt()),null;var n=Uc(t,e);if(t.tag!==0&&n===2){var r=Xd(t);r!==0&&(e=r,n=Sp(t,r))}if(n===1)throw n=_l,ts(t,0),Kr(t,e),tn(t,tt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,Xt,mr),tn(t,tt()),null}function ag(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(To=tt()+500,Sh&&bi())}}function ps(t){Yr!==null&&Yr.tag===0&&!(Se&6)&&ao();var e=Se;Se|=1;var n=Ln.transition,r=Ie;try{if(Ln.transition=null,Ie=1,t)return t()}finally{Ie=r,Ln.transition=n,Se=e,!(Se&6)&&bi()}}function lg(){fn=Ks.current,Le(Ks)}function ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ek(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch($m(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ic();break;case 3:vo(),Le(Jt),Le(Bt),Ym();break;case 5:Xm(r);break;case 4:vo();break;case 13:Le($e);break;case 19:Le($e);break;case 10:qm(r.type._context);break;case 22:case 23:lg()}n=n.return}if(mt=t,ot=t=ci(t.current,null),Et=fn=e,ct=0,_l=null,sg=Ih=ds=0,Xt=$a=null,Xi!==null){for(e=0;e<Xi.length;e++)if(n=Xi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xi=null}return t}function px(t,e){do{var n=ot;try{if(Hm(),nc.current=Fc,Oc){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Oc=!1}if(fs=0,pt=lt=qe=null,Ba=!1,ml=0,ig.current=null,n===null||n.return===null){ct=1,_l=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=S0(o);if(p!==null){p.flags&=-257,A0(p,o,a,s,e),p.mode&1&&E0(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var m=new Set;m.add(l),e.updateQueue=m}else y.add(l);break e}else{if(!(e&1)){E0(s,c,e),ug();break e}l=Error(H(426))}}else if(je&&a.mode&1){var w=S0(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),A0(w,o,a,s,e),zm(wo(l,a));break e}}s=l=wo(l,a),ct!==4&&(ct=2),$a===null?$a=[s]:$a.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=Y1(s,l,e);y0(s,_);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(li===null||!li.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=Z1(s,a,e);y0(s,P);break e}}s=s.return}while(s!==null)}yx(n)}catch(R){e=R,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function mx(){var t=Lc.current;return Lc.current=Fc,t===null?Fc:t}function ug(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(ds&268435455)&&!(Ih&268435455)||Kr(mt,Et)}function Uc(t,e){var n=Se;Se|=2;var r=mx();(mt!==t||Et!==e)&&(mr=null,ts(t,e));do try{Ak();break}catch(i){px(t,i)}while(!0);if(Hm(),Se=n,Lc.current=r,ot!==null)throw Error(H(261));return mt=null,Et=0,ct}function Ak(){for(;ot!==null;)gx(ot)}function Ck(){for(;ot!==null&&!YP();)gx(ot)}function gx(t){var e=vx(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?yx(t):ot=e,ig.current=null}function yx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vk(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,ot=null;return}}else if(n=_k(n,e,fn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ct===0&&(ct=5)}function zi(t,e,n){var r=Ie,i=Ln.transition;try{Ln.transition=null,Ie=1,Pk(t,e,n,r)}finally{Ln.transition=i,Ie=r}return null}function Pk(t,e,n,r){do ao();while(Yr!==null);if(Se&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(aI(t,s),t===mt&&(ot=mt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lu||(Lu=!0,wx(xc,function(){return ao(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var o=Ie;Ie=1;var a=Se;Se|=4,ig.current=null,Tk(t,n),hx(n,t),GI(np),Sc=!!tp,np=tp=null,t.current=n,xk(n),ZP(),Se=a,Ie=o,Ln.transition=s}else t.current=n;if(Lu&&(Lu=!1,Yr=t,Bc=i),s=t.pendingLanes,s===0&&(li=null),tI(n.stateNode),tn(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jc)throw jc=!1,t=xp,xp=null,t;return Bc&1&&t.tag!==0&&ao(),s=t.pendingLanes,s&1?t===Ep?za++:(za=0,Ep=t):za=0,bi(),null}function ao(){if(Yr!==null){var t=YT(Bc),e=Ln.transition,n=Ie;try{if(Ln.transition=null,Ie=16>t?16:t,Yr===null)var r=!1;else{if(t=Yr,Yr=null,Bc=0,Se&6)throw Error(H(331));var i=Se;for(Se|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Ua(8,d,s)}var u=d.child;if(u!==null)u.return=d,Y=u;else for(;Y!==null;){d=Y;var f=d.sibling,p=d.return;if(lx(d),d===c){Y=null;break}if(f!==null){f.return=p,Y=f;break}Y=p}}}var y=s.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ua(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Y=_;break e}Y=s.return}}var v=t.current;for(Y=v;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else e:for(o=v;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ph(9,a)}}catch(R){Xe(a,a.return,R)}if(a===o){Y=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Y=P;break e}Y=a.return}}if(Se=i,bi(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(vh,t)}catch{}r=!0}return r}finally{Ie=n,Ln.transition=e}}return!1}function L0(t,e,n){e=wo(n,e),e=Y1(t,e,1),t=ai(t,e,1),e=Ht(),t!==null&&($l(t,1,e),tn(t,e))}function Xe(t,e,n){if(t.tag===3)L0(t,t,n);else for(;e!==null;){if(e.tag===3){L0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(li===null||!li.has(r))){t=wo(n,t),t=Z1(e,t,1),e=ai(e,t,1),t=Ht(),e!==null&&($l(e,1,t),tn(e,t));break}}e=e.return}}function Ik(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(Et&n)===n&&(ct===4||ct===3&&(Et&130023424)===Et&&500>tt()-og?ts(t,0):sg|=n),tn(t,e)}function _x(t,e){e===0&&(t.mode&1?(e=Iu,Iu<<=1,!(Iu&130023424)&&(Iu=4194304)):e=1);var n=Ht();t=Pr(t,e),t!==null&&($l(t,e,n),tn(t,n))}function kk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_x(t,n)}function bk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),_x(t,n)}var vx;vx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,yk(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,je&&e.flags&1048576&&E1(e,Rc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ic(t,e),t=e.pendingProps;var i=go(e,Bt.current);oo(e,n),i=Jm(null,e,r,t,i,n);var s=eg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,en(r)?(s=!0,kc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Km(e),i.updater=Ch,e.stateNode=i,i._reactInternals=e,hp(e,r,t,n),e=pp(null,e,r,!0,s,n)):(e.tag=0,je&&s&&Um(e),zt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ic(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Vk(r),t=Hn(r,t),i){case 0:e=dp(null,e,r,t,n);break e;case 1:e=I0(null,e,r,t,n);break e;case 11:e=C0(null,e,r,t,n);break e;case 14:e=P0(null,e,r,Hn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),dp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),I0(t,e,r,i,n);case 3:e:{if(nx(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,k1(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wo(Error(H(423)),e),e=k0(t,e,r,n,i);break e}else if(r!==i){i=wo(Error(H(424)),e),e=k0(t,e,r,n,i);break e}else for(mn=oi(e.stateNode.containerInfo.firstChild),vn=e,je=!0,Gn=null,n=P1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yo(),r===i){e=Ir(t,e,n);break e}zt(t,e,r,n)}e=e.child}return e;case 5:return b1(e),t===null&&lp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,rp(r,i)?o=null:s!==null&&rp(r,s)&&(e.flags|=32),tx(t,e),zt(t,e,o,n),e.child;case 6:return t===null&&lp(e),null;case 13:return rx(t,e,n);case 4:return Qm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_o(e,null,r,n):zt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),C0(t,e,r,i,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(Vc,r._currentValue),r._currentValue=o,s!==null)if(Xn(s.value,o)){if(s.children===i.children&&!Jt.current){e=Ir(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=xr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),up(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),up(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}zt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oo(e,n),i=jn(i),r=r(i),e.flags|=1,zt(t,e,r,n),e.child;case 14:return r=e.type,i=Hn(r,e.pendingProps),i=Hn(r.type,i),P0(t,e,r,i,n);case 15:return J1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),ic(t,e),e.tag=1,en(r)?(t=!0,kc(e)):t=!1,oo(e,n),X1(e,r,i),hp(e,r,i,n),pp(null,e,r,!0,t,n);case 19:return ix(t,e,n);case 22:return ex(t,e,n)}throw Error(H(156,e.tag))};function wx(t,e){return GT(t,e)}function Rk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new Rk(t,e,n,r)}function cg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vk(t){if(typeof t=="function")return cg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===km)return 11;if(t===bm)return 14}return 2}function ci(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ac(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")cg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ls:return ns(n.children,i,s,e);case Im:o=8,i|=8;break;case Nd:return t=Nn(12,n,e,i|2),t.elementType=Nd,t.lanes=s,t;case Od:return t=Nn(13,n,e,i),t.elementType=Od,t.lanes=s,t;case Fd:return t=Nn(19,n,e,i),t.elementType=Fd,t.lanes=s,t;case bT:return kh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IT:o=10;break e;case kT:o=9;break e;case km:o=11;break e;case bm:o=14;break e;case Wr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Nn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ns(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function kh(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=bT,t.lanes=n,t.stateNode={isHidden:!1},t}function Zf(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function Jf(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mf(0),this.expirationTimes=Mf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hg(t,e,n,r,i,s,o,a,l){return t=new Mk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Km(s),t}function Dk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tx(t){if(!t)return _i;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(en(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(en(n))return T1(t,n,e)}return e}function xx(t,e,n,r,i,s,o,a,l){return t=hg(n,r,!0,t,i,s,o,a,l),t.context=Tx(null),n=t.current,r=Ht(),i=ui(n),s=xr(r,i),s.callback=e??null,ai(n,s,i),t.current.lanes=i,$l(t,i,r),tn(t,r),t}function bh(t,e,n,r){var i=e.current,s=Ht(),o=ui(i);return n=Tx(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ai(i,e,o),t!==null&&(Qn(t,i,o,s),tc(t,i,o)),o}function $c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function j0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fg(t,e){j0(t,e),(t=t.alternate)&&j0(t,e)}function Nk(){return null}var Ex=typeof reportError=="function"?reportError:function(t){console.error(t)};function dg(t){this._internalRoot=t}Rh.prototype.render=dg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));bh(t,e,null,null)};Rh.prototype.unmount=dg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ps(function(){bh(null,t,null,null)}),e[Cr]=null}};function Rh(t){this._internalRoot=t}Rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=e1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gr.length&&e!==0&&e<Gr[n].priority;n++);Gr.splice(n,0,t),n===0&&n1(t)}};function pg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B0(){}function Ok(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=$c(o);s.call(c)}}var o=xx(e,r,t,0,null,!1,!1,"",B0);return t._reactRootContainer=o,t[Cr]=o.current,cl(t.nodeType===8?t.parentNode:t),ps(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=$c(l);a.call(c)}}var l=hg(t,0,!1,null,null,!1,!1,"",B0);return t._reactRootContainer=l,t[Cr]=l.current,cl(t.nodeType===8?t.parentNode:t),ps(function(){bh(e,l,n,r)}),l}function Mh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$c(o);a.call(l)}}bh(e,o,t,i)}else o=Ok(n,e,t,i,r);return $c(o)}ZT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(Mm(e,n|1),tn(e,tt()),!(Se&6)&&(To=tt()+500,bi()))}break;case 13:ps(function(){var r=Pr(t,1);if(r!==null){var i=Ht();Qn(r,t,1,i)}}),fg(t,1)}};Dm=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var n=Ht();Qn(e,t,134217728,n)}fg(t,134217728)}};JT=function(t){if(t.tag===13){var e=ui(t),n=Pr(t,e);if(n!==null){var r=Ht();Qn(n,t,e,r)}fg(t,e)}};e1=function(){return Ie};t1=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Gd=function(t,e,n){switch(e){case"input":if(Bd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Eh(r);if(!i)throw Error(H(90));VT(r),Bd(r,i)}}}break;case"textarea":DT(t,n);break;case"select":e=n.value,e!=null&&no(t,!!n.multiple,e,!1)}};UT=ag;$T=ps;var Fk={usingClientEntryPoint:!1,Events:[Wl,$s,Eh,jT,BT,ag]},_a={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lk={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HT(t),t===null?null:t.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||Nk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{vh=ju.inject(Lk),ir=ju}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fk;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pg(e))throw Error(H(200));return Dk(t,e,null,n)};Cn.createRoot=function(t,e){if(!pg(t))throw Error(H(299));var n=!1,r="",i=Ex;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hg(t,1,!1,null,null,n,!1,r,i),t[Cr]=e.current,cl(t.nodeType===8?t.parentNode:t),new dg(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=HT(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return ps(t)};Cn.hydrate=function(t,e,n){if(!Vh(e))throw Error(H(200));return Mh(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!pg(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ex;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xx(e,null,t,1,n??null,i,!1,s,o),t[Cr]=e.current,cl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rh(e)};Cn.render=function(t,e,n){if(!Vh(e))throw Error(H(200));return Mh(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Vh(t))throw Error(H(40));return t._reactRootContainer?(ps(function(){Mh(null,null,t,!1,function(){t._reactRootContainer=null,t[Cr]=null})}),!0):!1};Cn.unstable_batchedUpdates=ag;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vh(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Mh(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Sx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sx)}catch(t){console.error(t)}}Sx(),ST.exports=Cn;var jk=ST.exports,U0=jk;Md.createRoot=U0.createRoot,Md.hydrateRoot=U0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zc.apply(this,arguments)}var Zr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zr||(Zr={}));const $0="popstate";function Bk(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Cp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Cx(i)}return $k(e,n,null,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ax(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Uk(){return Math.random().toString(36).substr(2,8)}function z0(t,e){return{usr:t.state,key:t.key,idx:e}}function Cp(t,e,n,r){return n===void 0&&(n=null),zc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Dh(e):e,{state:n,key:e&&e.key||r||Uk()})}function Cx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Dh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $k(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zr.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(zc({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function u(){a=Zr.Pop;let w=d(),_=w==null?null:w-c;c=w,l&&l({action:a,location:m.location,delta:_})}function f(w,_){a=Zr.Push;let v=Cp(m.location,w,_);c=d()+1;let x=z0(v,c),P=m.createHref(v);try{o.pushState(x,"",P)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(P)}s&&l&&l({action:a,location:m.location,delta:1})}function p(w,_){a=Zr.Replace;let v=Cp(m.location,w,_);c=d();let x=z0(v,c),P=m.createHref(v);o.replaceState(x,"",P),s&&l&&l({action:a,location:m.location,delta:0})}function y(w){let _=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof w=="string"?w:Cx(w);return v=v.replace(/ $/,"%20"),an(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let m={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener($0,u),l=w,()=>{i.removeEventListener($0,u),l=null}},createHref(w){return e(i,w)},createURL:y,encodeLocation(w){let _=y(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(w){return o.go(w)}};return m}var W0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(W0||(W0={}));function zk(t,e,n){return n===void 0&&(n="/"),Wk(t,e,n)}function Wk(t,e,n,r){let i=typeof e=="string"?Dh(e):e,s=kx(i.pathname||"/",n);if(s==null)return null;let o=Px(t);Hk(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=rb(s);a=eb(o[l],c)}return a}function Px(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(an(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=lo([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(an(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Px(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Zk(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Ix(s.path))i(s,o,l)}),e}function Ix(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Ix(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Hk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Jk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qk=/^:[\w-]+$/,Gk=3,Kk=2,Qk=1,Xk=10,Yk=-2,H0=t=>t==="*";function Zk(t,e){let n=t.split("/"),r=n.length;return n.some(H0)&&(r+=Yk),e&&(r+=Kk),n.filter(i=>!H0(i)).reduce((i,s)=>i+(qk.test(s)?Gk:s===""?Qk:Xk),r)}function Jk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function eb(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",u=tb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:lo([s,u.pathname]),pathnameBase:ib(lo([s,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(s=lo([s,u.pathnameBase]))}return o}function tb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nb(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,u)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let m=a[u]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const y=a[u];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function nb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ax(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ax(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const lo=t=>t.join("/").replace(/\/\/+/g,"/"),ib=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function sb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bx=["post","put","patch","delete"];new Set(bx);const ob=["get",...bx];new Set(ob);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wc.apply(this,arguments)}const ab=D.createContext(null),lb=D.createContext(null),Rx=D.createContext(null),Nh=D.createContext(null),Oh=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Vx=D.createContext(null);function mg(){return D.useContext(Nh)!=null}function ub(){return mg()||an(!1),D.useContext(Nh).location}function cb(t,e){return hb(t,e)}function hb(t,e,n,r){mg()||an(!1);let{navigator:i}=D.useContext(Rx),{matches:s}=D.useContext(Oh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ub(),d;if(e){var u;let w=typeof e=="string"?Dh(e):e;l==="/"||(u=w.pathname)!=null&&u.startsWith(l)||an(!1),d=w}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=zk(t,{pathname:p}),m=gb(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:lo([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:lo([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return e&&m?D.createElement(Nh.Provider,{value:{location:Wc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Zr.Pop}},m):m}function fb(){let t=wb(),e=sb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const db=D.createElement(fb,null);class pb extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Oh.Provider,{value:this.props.routeContext},D.createElement(Vx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mb(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(ab);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Oh.Provider,{value:e},r)}function gb(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);d>=0||an(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let u=o[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:f,errors:p}=n,y=u.route.loader&&f[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,u,f)=>{let p,y=!1,m=null,w=null;n&&(p=a&&u.route.id?a[u.route.id]:void 0,m=u.route.errorElement||db,l&&(c<0&&f===0?(Tb("route-fallback"),y=!0,w=null):c===f&&(y=!0,w=u.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),v=()=>{let x;return p?x=m:y?x=w:u.route.Component?x=D.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=d,D.createElement(mb,{match:u,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:x})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?D.createElement(pb,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var Mx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mx||{});function yb(t){let e=D.useContext(lb);return e||an(!1),e}function _b(t){let e=D.useContext(Oh);return e||an(!1),e}function vb(t){let e=_b(),n=e.matches[e.matches.length-1];return n.route.id||an(!1),n.route.id}function wb(){var t;let e=D.useContext(Vx),n=yb(Mx.UseRouteError),r=vb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const q0={};function Tb(t,e,n){q0[t]||(q0[t]=!0)}function xb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lc(t){an(!1)}function Eb(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zr.Pop,navigator:s,static:o=!1,future:a}=t;mg()&&an(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:Wc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Dh(r));let{pathname:d="/",search:u="",hash:f="",state:p=null,key:y="default"}=r,m=D.useMemo(()=>{let w=kx(d,l);return w==null?null:{location:{pathname:w,search:u,hash:f,state:p,key:y},navigationType:i}},[l,d,u,f,p,y,i]);return m==null?null:D.createElement(Rx.Provider,{value:c},D.createElement(Nh.Provider,{children:n,value:m}))}function Sb(t){let{children:e,location:n}=t;return cb(Pp(e),n)}new Promise(()=>{});function Pp(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Pp(r.props.children,s));return}r.type!==lc&&an(!1),!r.props.index||!r.props.children||an(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Pp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Ab="6";try{window.__reactRouterVersion=Ab}catch{}const Cb="startTransition",G0=IP[Cb];function Pb(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=Bk({window:i,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=D.useCallback(u=>{c&&G0?G0(()=>l(u)):l(u)},[l,c]);return D.useLayoutEffect(()=>o.listen(d),[o,d]),D.useEffect(()=>xb(r),[r]),D.createElement(Eb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var K0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(K0||(K0={}));var Q0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Q0||(Q0={}));const Ib="--tmp",kb={id:"tmp-base",name:"TMP Base",description:"The Misadventuring Party flagship theme - Where Failing is Fun!",system:"universal",colors:{primary:"#e84393",secondary:"#5dade2",tertiary:"#f39c12",background:{main:"#0a1628",card:"#0f2137",elevated:"#163354"},text:{primary:"#ffffff",secondary:"#a8c5d8",onPrimary:"#ffffff"},voting:{optionA:"#e84393",optionB:"#5dade2",optionC:"#f39c12",progressTrack:"#0a1628"},status:{success:"#27ae60",warning:"#f39c12",error:"#e74c3c",info:"#5dade2"}},typography:{fonts:{display:'"Righteous", "Impact", sans-serif',body:'"Nunito", "Segoe UI", sans-serif',accent:'"Bangers", cursive'},googleFontsUrl:"https://fonts.googleapis.com/css2?family=Righteous&family=Nunito:wght@400;600;700;800&family=Bangers&display=swap",sizes:{hero:"4rem",h1:"2.5rem",h2:"2rem",h3:"1.5rem",body:"1rem",small:"0.875rem"},weights:{normal:400,medium:600,bold:700,black:800}},animations:{easing:{default:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",bounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",enter:"cubic-bezier(0, 0.55, 0.45, 1)",exit:"cubic-bezier(0.55, 0, 1, 0.45)"},duration:{fast:150,normal:300,slow:500,voteUpdate:400},keyframes:{voteSelect:"tmp-pop",voteIncrement:"tmp-pulse",progressUpdate:"tmp-grow",idle:"tmp-float",victory:"tmp-explode",buttonHover:"tmp-glow"}},sounds:{votecast:"/sounds/tmp/dice-roll.mp3",timerTick:"/sounds/tmp/tick.mp3",timerEnd:"/sounds/tmp/buzzer.mp3",victory:"/sounds/tmp/fanfare.mp3",uiClick:"/sounds/tmp/click.mp3",error:"/sounds/tmp/fumble.mp3",ambient:"/sounds/tmp/tavern-ambience.mp3"},effects:{borderRadius:{small:"4px",medium:"8px",large:"16px",button:"12px",card:"16px"},shadows:{small:"0 2px 4px rgba(0, 0, 0, 0.3)",medium:"0 4px 12px rgba(0, 0, 0, 0.4)",large:"0 8px 24px rgba(0, 0, 0, 0.5)",glow:"0 0 30px rgba(232, 67, 147, 0.5)"},backgroundEffects:{main:`
        radial-gradient(ellipse at 30% 20%, rgba(232, 67, 147, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 70% 80%, rgba(93, 173, 226, 0.1) 0%, transparent 50%),
        linear-gradient(180deg, #0a1628 0%, #0f2137 100%)
      `,overlay:"none"}}},bb={id:"soggy-bottom-pirates",name:"Soggy Bottom Pirates",description:"Cereal-punk pirate adventures on the high seas of breakfast!",system:"dnd-5e",colors:{primary:"#E4A11B",secondary:"#1E6091",tertiary:"#C13584",background:{main:"#0A1628",card:"#132238",elevated:"#1A3050"},text:{primary:"#FFF8E7",secondary:"#A8C5D8",onPrimary:"#1A1A1A"},voting:{optionA:"#E4A11B",optionB:"#1E6091",optionC:"#C13584",progressTrack:"#0D1B2A"},status:{success:"#4ADE80",warning:"#FBBF24",error:"#EF4444",info:"#38BDF8"}},typography:{fonts:{display:'"Luckiest Guy", "Titan One", cursive',body:'"Patrick Hand", "Comic Neue", cursive',accent:'"Permanent Marker", cursive'},googleFontsUrl:"https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Patrick+Hand&family=Titan+One&family=Permanent+Marker&display=swap",sizes:{hero:"4rem",h1:"2.5rem",h2:"2rem",h3:"1.5rem",body:"1rem",small:"0.875rem"},weights:{normal:400,medium:600,bold:700,black:800}},animations:{easing:{default:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",bounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",enter:"cubic-bezier(0, 0.55, 0.45, 1)",exit:"cubic-bezier(0.55, 0, 1, 0.45)"},duration:{fast:150,normal:300,slow:500,voteUpdate:400},keyframes:{voteSelect:"sbp-splash",voteIncrement:"sbp-bob",progressUpdate:"sbp-wave",idle:"sbp-float",victory:"sbp-treasure",buttonHover:"sbp-shine"}},sounds:{votecast:"/sounds/sbp/cannon-shot.mp3",timerTick:"/sounds/sbp/ship-bell.mp3",timerEnd:"/sounds/sbp/anchor-drop.mp3",victory:"/sounds/sbp/treasure-found.mp3",uiClick:"/sounds/sbp/wood-creak.mp3",error:"/sounds/sbp/splash.mp3",ambient:"/sounds/sbp/ocean-waves.mp3"},effects:{borderRadius:{small:"4px",medium:"8px",large:"16px",button:"8px",card:"12px"},shadows:{small:"0 2px 4px rgba(0, 0, 0, 0.3)",medium:"0 4px 12px rgba(0, 0, 0, 0.4)",large:"0 8px 24px rgba(0, 0, 0, 0.5)",glow:"0 0 20px rgba(228, 161, 27, 0.4)"},backgroundEffects:{main:`
        radial-gradient(ellipse at 50% 100%, rgba(30, 96, 145, 0.3) 0%, transparent 50%),
        linear-gradient(180deg, #0A1628 0%, #132238 100%)
      `,overlay:"url(/images/sbp/wave-pattern.svg)"}},assets:{basePath:"/assets/themes/soggy-bottom-pirates",voteIcons:{optionA:{src:"/assets/themes/soggy-bottom-pirates/icons/anchor.svg",type:"svg",alt:"Golden Anchor",idleAnimation:"sbp-float",selectAnimation:"sbp-splash"},optionB:{src:"/assets/themes/soggy-bottom-pirates/icons/treasure.svg",type:"svg",alt:"Treasure Chest",idleAnimation:"sbp-bob",selectAnimation:"sbp-treasure"},optionC:{src:"/assets/themes/soggy-bottom-pirates/icons/skull.svg",type:"svg",alt:"Jolly Roger",idleAnimation:"sbp-float",selectAnimation:"sbp-splash"}},cardFrame:{border:"/assets/themes/soggy-bottom-pirates/frames/card-frame.svg",texture:"/assets/themes/soggy-bottom-pirates/frames/parchment-texture.png",effect:"drop-shadow(0 4px 8px rgba(0,0,0,0.4))"},progressBar:{trackTexture:"/assets/themes/soggy-bottom-pirates/frames/rope-track.svg",fillStyle:"linear-gradient(180deg, #FFD700 0%, #E4A11B 50%, #C4920B 100%)",endCap:"/assets/themes/soggy-bottom-pirates/icons/anchor.svg"},winnerBanner:{graphic:"/assets/themes/soggy-bottom-pirates/banners/winner-scroll.svg",particles:"confetti"},decorations:{divider:"/assets/themes/soggy-bottom-pirates/frames/rope-divider.svg",corner:"/assets/themes/soggy-bottom-pirates/frames/corner-flourish.svg"}}},Rb={id:"neon-nightmares",name:"Neon Nightmares",description:"Be Kind, Rewind... if you dare.",system:"kids-on-bikes",colors:{primary:"#FF2D95",secondary:"#00F5FF",tertiary:"#39FF14",background:{main:"#0A0A0F",card:"#12121A",elevated:"#1A1A2E"},text:{primary:"#EAEAEA",secondary:"#A0A0B0",onPrimary:"#0A0A0F"},voting:{optionA:"#FF2D95",optionB:"#00F5FF",optionC:"#39FF14",progressTrack:"#1A1A2E"},status:{success:"#39FF14",warning:"#FFD700",error:"#FF3366",info:"#00F5FF"}},typography:{fonts:{display:'"Monoton", "Bungee", cursive',body:'"VT323", "Courier New", monospace',accent:'"Orbitron", sans-serif'},googleFontsUrl:"https://fonts.googleapis.com/css2?family=Monoton&family=Bungee&family=VT323&family=Orbitron:wght@500;700&display=swap",sizes:{hero:"4rem",h1:"2.5rem",h2:"2rem",h3:"1.5rem",body:"1rem",small:"0.875rem"},weights:{normal:400,medium:500,bold:600,black:700}},animations:{easing:{default:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",bounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",enter:"cubic-bezier(0, 0.55, 0.45, 1)",exit:"cubic-bezier(0.55, 0, 1, 0.45)"},duration:{fast:100,normal:250,slow:400,voteUpdate:350},keyframes:{voteSelect:"nn-glitch",voteIncrement:"nn-flicker",progressUpdate:"nn-scan",idle:"nn-static",victory:"nn-strobe",buttonHover:"nn-glow-pulse"}},sounds:{votecast:"/sounds/nn/synth-hit.mp3",timerTick:"/sounds/nn/tick-digital.mp3",timerEnd:"/sounds/nn/vhs-stop.mp3",victory:"/sounds/nn/synth-victory.mp3",uiClick:"/sounds/nn/button-click.mp3",error:"/sounds/nn/static-burst.mp3",ambient:"/sounds/nn/synth-ambient.mp3"},effects:{borderRadius:{small:"2px",medium:"4px",large:"8px",button:"4px",card:"6px"},shadows:{small:"0 0 5px rgba(255, 45, 149, 0.3)",medium:"0 0 15px rgba(255, 45, 149, 0.4)",large:"0 0 30px rgba(255, 45, 149, 0.5)",glow:`
        0 0 10px rgba(255, 45, 149, 0.8),
        0 0 20px rgba(255, 45, 149, 0.6),
        0 0 40px rgba(255, 45, 149, 0.4)
      `},backgroundEffects:{main:`
        repeating-linear-gradient(
          0deg,
          rgba(0, 0, 0, 0.1) 0px,
          rgba(0, 0, 0, 0.1) 1px,
          transparent 1px,
          transparent 2px
        ),
        linear-gradient(180deg, #0A0A0F 0%, #1A1A2E 100%)
      `,overlay:"url(/images/nn/scanlines.svg)"}},assets:{basePath:"/assets/themes/neon-nightmares",voteIcons:{optionA:{src:"/assets/themes/neon-nightmares/icons/eye.svg",type:"svg",alt:"Watching Eye",idleAnimation:"nn-glow-pulse",selectAnimation:"nn-glitch"},optionB:{src:"/assets/themes/neon-nightmares/icons/vhs.svg",type:"svg",alt:"VHS Tape",idleAnimation:"nn-static",selectAnimation:"nn-flicker"},optionC:{src:"/assets/themes/neon-nightmares/icons/static.svg",type:"svg",alt:"Static TV",idleAnimation:"nn-scan",selectAnimation:"nn-strobe"}},cardFrame:{border:"/assets/themes/neon-nightmares/frames/card-frame.svg",texture:"/assets/themes/neon-nightmares/frames/crt-overlay.png",effect:`
        drop-shadow(0 0 10px rgba(255, 45, 149, 0.5))
        drop-shadow(0 0 20px rgba(0, 245, 255, 0.3))
      `},progressBar:{trackTexture:"/assets/themes/neon-nightmares/frames/vhs-track.svg",fillStyle:`
        linear-gradient(90deg, 
          #FF2D95 0%, 
          #FF2D95 45%,
          #00F5FF 55%,
          #00F5FF 100%
        )
      `,endCap:"/assets/themes/neon-nightmares/icons/eye.svg"},winnerBanner:{graphic:"/assets/themes/neon-nightmares/banners/winner-glitch.svg",animation:"/assets/themes/neon-nightmares/banners/winner-glitch.json",particles:"glitch"},decorations:{divider:"/assets/themes/neon-nightmares/frames/scanline-divider.svg",corner:"/assets/themes/neon-nightmares/frames/corner-static.svg"}}};var X0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Nx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,u=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[d],n[u],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Dx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const u=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||u==null)throw new Mb;const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),u!==64){const y=c<<6&192|u;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Mb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Db=function(t){const e=Dx(t);return Nx.encodeByteArray(e,!0)},Hc=function(t){return Db(t).replace(/\./g,"")},Nb=function(t){try{return Nx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=()=>Ob().__FIREBASE_DEFAULTS__,Lb=()=>{if(typeof process>"u"||typeof X0>"u")return;const t=X0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Nb(t[1]);return e&&JSON.parse(e)},gg=()=>{try{return Fb()||Lb()||jb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bb=t=>{var e,n;return(n=(e=gg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ub=t=>{const e=Bb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ox=()=>{var t;return(t=gg())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hc(JSON.stringify(n)),Hc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hb(){var t;const e=(t=gg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qb(){return!Hb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gb(){try{return typeof indexedDB=="object"}catch{return!1}}function Kb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="FirebaseError";class zo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Qb,Object.setPrototypeOf(this,zo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fx.prototype.create)}}class Fx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Xb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new zo(i,a,r)}}function Xb(t,e){return t.replace(Yb,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Yb=/\{\$([^}]+)}/g;function qc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Y0(s)&&Y0(o)){if(!qc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Y0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){return t&&t._delegate?t._delegate:t}class vl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $b;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eR(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Jb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Jb(t){return t===Wi?void 0:t}function eR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Zb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const nR={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},rR=Ee.INFO,iR={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},sR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=iR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lx{constructor(e){this.name=e,this._logLevel=rR,this._logHandler=sR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const oR=(t,e)=>e.some(n=>t instanceof n);let Z0,J0;function aR(){return Z0||(Z0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lR(){return J0||(J0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,Ip=new WeakMap,Bx=new WeakMap,ed=new WeakMap,yg=new WeakMap;function uR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(hi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jx.set(n,t)}).catch(()=>{}),yg.set(e,t),e}function cR(t){if(Ip.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ip.set(t,e)}let kp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ip.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hR(t){kp=t(kp)}function fR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(td(this),e,...n);return Bx.set(r,e.sort?e.sort():[e]),hi(r)}:lR().includes(t)?function(...e){return t.apply(td(this),e),hi(jx.get(this))}:function(...e){return hi(t.apply(td(this),e))}}function dR(t){return typeof t=="function"?fR(t):(t instanceof IDBTransaction&&cR(t),oR(t,aR())?new Proxy(t,kp):t)}function hi(t){if(t instanceof IDBRequest)return uR(t);if(ed.has(t))return ed.get(t);const e=dR(t);return e!==t&&(ed.set(t,e),yg.set(e,t)),e}const td=t=>yg.get(t);function pR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=hi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hi(o.result),l.oldVersion,l.newVersion,hi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mR=["get","getKey","getAll","getAllKeys","count"],gR=["put","add","delete","clear"],nd=new Map;function ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nd.get(e))return nd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return nd.set(e,s),s}hR(t=>({...t,get:(e,n,r)=>ev(e,n)||t.get(e,n,r),has:(e,n)=>!!ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_R(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _R(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bp="@firebase/app",tv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new Lx("@firebase/app"),vR="@firebase/app-compat",wR="@firebase/analytics-compat",TR="@firebase/analytics",xR="@firebase/app-check-compat",ER="@firebase/app-check",SR="@firebase/auth",AR="@firebase/auth-compat",CR="@firebase/database",PR="@firebase/data-connect",IR="@firebase/database-compat",kR="@firebase/functions",bR="@firebase/functions-compat",RR="@firebase/installations",VR="@firebase/installations-compat",MR="@firebase/messaging",DR="@firebase/messaging-compat",NR="@firebase/performance",OR="@firebase/performance-compat",FR="@firebase/remote-config",LR="@firebase/remote-config-compat",jR="@firebase/storage",BR="@firebase/storage-compat",UR="@firebase/firestore",$R="@firebase/vertexai-preview",zR="@firebase/firestore-compat",WR="firebase",HR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",qR={[bp]:"fire-core",[vR]:"fire-core-compat",[TR]:"fire-analytics",[wR]:"fire-analytics-compat",[ER]:"fire-app-check",[xR]:"fire-app-check-compat",[SR]:"fire-auth",[AR]:"fire-auth-compat",[CR]:"fire-rtdb",[PR]:"fire-data-connect",[IR]:"fire-rtdb-compat",[kR]:"fire-fn",[bR]:"fire-fn-compat",[RR]:"fire-iid",[VR]:"fire-iid-compat",[MR]:"fire-fcm",[DR]:"fire-fcm-compat",[NR]:"fire-perf",[OR]:"fire-perf-compat",[FR]:"fire-rc",[LR]:"fire-rc-compat",[jR]:"fire-gcs",[BR]:"fire-gcs-compat",[UR]:"fire-fst",[zR]:"fire-fst-compat",[$R]:"fire-vertex","fire-js":"fire-js",[WR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=new Map,GR=new Map,Vp=new Map;function nv(t,e){try{t.container.addComponent(e)}catch(n){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gc(t){const e=t.name;if(Vp.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;Vp.set(e,t);for(const n of wl.values())nv(n,t);for(const n of GR.values())nv(n,t);return!0}function KR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new Fx("app","Firebase",QR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=HR;function Ux(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw fi.create("bad-app-name",{appName:String(i)});if(n||(n=Ox()),!n)throw fi.create("no-options");const s=wl.get(i);if(s){if(qc(n,s.options)&&qc(r,s.config))return s;throw fi.create("duplicate-app",{appName:i})}const o=new tR(i);for(const l of Vp.values())o.addComponent(l);const a=new XR(n,r,o);return wl.set(i,a),a}function $x(t=Rp){const e=wl.get(t);if(!e&&t===Rp&&Ox())return Ux();if(!e)throw fi.create("no-app",{appName:t});return e}function ZR(){return Array.from(wl.values())}function uo(t,e,n){var r;let i=(r=qR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(a.join(" "));return}Gc(new vl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="firebase-heartbeat-database",e2=1,Tl="firebase-heartbeat-store";let rd=null;function zx(){return rd||(rd=pR(JR,e2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw fi.create("idb-open",{originalErrorMessage:t.message})})),rd}async function t2(t){try{const n=(await zx()).transaction(Tl),r=await n.objectStore(Tl).get(Wx(t));return await n.done,r}catch(e){if(e instanceof zo)kr.warn(e.message);else{const n=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kr.warn(n.message)}}}async function rv(t,e){try{const r=(await zx()).transaction(Tl,"readwrite");await r.objectStore(Tl).put(e,Wx(t)),await r.done}catch(n){if(n instanceof zo)kr.warn(n.message);else{const r=fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kr.warn(r.message)}}}function Wx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1024,r2=30*24*60*60*1e3;class i2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new o2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=iv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=r2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){kr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iv(),{heartbeatsToSend:r,unsentEntries:i}=s2(this._heartbeatsCache.heartbeats),s=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return kr.warn(n),""}}}function iv(){return new Date().toISOString().substring(0,10)}function s2(t,e=n2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),sv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class o2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gb()?Kb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sv(t){return Hc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){Gc(new vl("platform-logger",e=>new yR(e),"PRIVATE")),Gc(new vl("heartbeat",e=>new i2(e),"PRIVATE")),uo(bp,tv,t),uo(bp,tv,"esm2017"),uo("fire-js","")}a2("");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,Hx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function A(){}A.prototype=S.prototype,C.D=S.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(I,V,M){for(var b=Array(arguments.length-2),q=2;q<arguments.length;q++)b[q-2]=arguments[q];return S.prototype[V].apply(I,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,S,A){A||(A=0);var I=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)I[V]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(V=0;16>V;++V)I[V]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=C.g[0],A=C.g[1],V=C.g[2];var M=C.g[3],b=S+(M^A&(V^M))+I[0]+3614090360&4294967295;S=A+(b<<7&4294967295|b>>>25),b=M+(V^S&(A^V))+I[1]+3905402710&4294967295,M=S+(b<<12&4294967295|b>>>20),b=V+(A^M&(S^A))+I[2]+606105819&4294967295,V=M+(b<<17&4294967295|b>>>15),b=A+(S^V&(M^S))+I[3]+3250441966&4294967295,A=V+(b<<22&4294967295|b>>>10),b=S+(M^A&(V^M))+I[4]+4118548399&4294967295,S=A+(b<<7&4294967295|b>>>25),b=M+(V^S&(A^V))+I[5]+1200080426&4294967295,M=S+(b<<12&4294967295|b>>>20),b=V+(A^M&(S^A))+I[6]+2821735955&4294967295,V=M+(b<<17&4294967295|b>>>15),b=A+(S^V&(M^S))+I[7]+4249261313&4294967295,A=V+(b<<22&4294967295|b>>>10),b=S+(M^A&(V^M))+I[8]+1770035416&4294967295,S=A+(b<<7&4294967295|b>>>25),b=M+(V^S&(A^V))+I[9]+2336552879&4294967295,M=S+(b<<12&4294967295|b>>>20),b=V+(A^M&(S^A))+I[10]+4294925233&4294967295,V=M+(b<<17&4294967295|b>>>15),b=A+(S^V&(M^S))+I[11]+2304563134&4294967295,A=V+(b<<22&4294967295|b>>>10),b=S+(M^A&(V^M))+I[12]+1804603682&4294967295,S=A+(b<<7&4294967295|b>>>25),b=M+(V^S&(A^V))+I[13]+4254626195&4294967295,M=S+(b<<12&4294967295|b>>>20),b=V+(A^M&(S^A))+I[14]+2792965006&4294967295,V=M+(b<<17&4294967295|b>>>15),b=A+(S^V&(M^S))+I[15]+1236535329&4294967295,A=V+(b<<22&4294967295|b>>>10),b=S+(V^M&(A^V))+I[1]+4129170786&4294967295,S=A+(b<<5&4294967295|b>>>27),b=M+(A^V&(S^A))+I[6]+3225465664&4294967295,M=S+(b<<9&4294967295|b>>>23),b=V+(S^A&(M^S))+I[11]+643717713&4294967295,V=M+(b<<14&4294967295|b>>>18),b=A+(M^S&(V^M))+I[0]+3921069994&4294967295,A=V+(b<<20&4294967295|b>>>12),b=S+(V^M&(A^V))+I[5]+3593408605&4294967295,S=A+(b<<5&4294967295|b>>>27),b=M+(A^V&(S^A))+I[10]+38016083&4294967295,M=S+(b<<9&4294967295|b>>>23),b=V+(S^A&(M^S))+I[15]+3634488961&4294967295,V=M+(b<<14&4294967295|b>>>18),b=A+(M^S&(V^M))+I[4]+3889429448&4294967295,A=V+(b<<20&4294967295|b>>>12),b=S+(V^M&(A^V))+I[9]+568446438&4294967295,S=A+(b<<5&4294967295|b>>>27),b=M+(A^V&(S^A))+I[14]+3275163606&4294967295,M=S+(b<<9&4294967295|b>>>23),b=V+(S^A&(M^S))+I[3]+4107603335&4294967295,V=M+(b<<14&4294967295|b>>>18),b=A+(M^S&(V^M))+I[8]+1163531501&4294967295,A=V+(b<<20&4294967295|b>>>12),b=S+(V^M&(A^V))+I[13]+2850285829&4294967295,S=A+(b<<5&4294967295|b>>>27),b=M+(A^V&(S^A))+I[2]+4243563512&4294967295,M=S+(b<<9&4294967295|b>>>23),b=V+(S^A&(M^S))+I[7]+1735328473&4294967295,V=M+(b<<14&4294967295|b>>>18),b=A+(M^S&(V^M))+I[12]+2368359562&4294967295,A=V+(b<<20&4294967295|b>>>12),b=S+(A^V^M)+I[5]+4294588738&4294967295,S=A+(b<<4&4294967295|b>>>28),b=M+(S^A^V)+I[8]+2272392833&4294967295,M=S+(b<<11&4294967295|b>>>21),b=V+(M^S^A)+I[11]+1839030562&4294967295,V=M+(b<<16&4294967295|b>>>16),b=A+(V^M^S)+I[14]+4259657740&4294967295,A=V+(b<<23&4294967295|b>>>9),b=S+(A^V^M)+I[1]+2763975236&4294967295,S=A+(b<<4&4294967295|b>>>28),b=M+(S^A^V)+I[4]+1272893353&4294967295,M=S+(b<<11&4294967295|b>>>21),b=V+(M^S^A)+I[7]+4139469664&4294967295,V=M+(b<<16&4294967295|b>>>16),b=A+(V^M^S)+I[10]+3200236656&4294967295,A=V+(b<<23&4294967295|b>>>9),b=S+(A^V^M)+I[13]+681279174&4294967295,S=A+(b<<4&4294967295|b>>>28),b=M+(S^A^V)+I[0]+3936430074&4294967295,M=S+(b<<11&4294967295|b>>>21),b=V+(M^S^A)+I[3]+3572445317&4294967295,V=M+(b<<16&4294967295|b>>>16),b=A+(V^M^S)+I[6]+76029189&4294967295,A=V+(b<<23&4294967295|b>>>9),b=S+(A^V^M)+I[9]+3654602809&4294967295,S=A+(b<<4&4294967295|b>>>28),b=M+(S^A^V)+I[12]+3873151461&4294967295,M=S+(b<<11&4294967295|b>>>21),b=V+(M^S^A)+I[15]+530742520&4294967295,V=M+(b<<16&4294967295|b>>>16),b=A+(V^M^S)+I[2]+3299628645&4294967295,A=V+(b<<23&4294967295|b>>>9),b=S+(V^(A|~M))+I[0]+4096336452&4294967295,S=A+(b<<6&4294967295|b>>>26),b=M+(A^(S|~V))+I[7]+1126891415&4294967295,M=S+(b<<10&4294967295|b>>>22),b=V+(S^(M|~A))+I[14]+2878612391&4294967295,V=M+(b<<15&4294967295|b>>>17),b=A+(M^(V|~S))+I[5]+4237533241&4294967295,A=V+(b<<21&4294967295|b>>>11),b=S+(V^(A|~M))+I[12]+1700485571&4294967295,S=A+(b<<6&4294967295|b>>>26),b=M+(A^(S|~V))+I[3]+2399980690&4294967295,M=S+(b<<10&4294967295|b>>>22),b=V+(S^(M|~A))+I[10]+4293915773&4294967295,V=M+(b<<15&4294967295|b>>>17),b=A+(M^(V|~S))+I[1]+2240044497&4294967295,A=V+(b<<21&4294967295|b>>>11),b=S+(V^(A|~M))+I[8]+1873313359&4294967295,S=A+(b<<6&4294967295|b>>>26),b=M+(A^(S|~V))+I[15]+4264355552&4294967295,M=S+(b<<10&4294967295|b>>>22),b=V+(S^(M|~A))+I[6]+2734768916&4294967295,V=M+(b<<15&4294967295|b>>>17),b=A+(M^(V|~S))+I[13]+1309151649&4294967295,A=V+(b<<21&4294967295|b>>>11),b=S+(V^(A|~M))+I[4]+4149444226&4294967295,S=A+(b<<6&4294967295|b>>>26),b=M+(A^(S|~V))+I[11]+3174756917&4294967295,M=S+(b<<10&4294967295|b>>>22),b=V+(S^(M|~A))+I[2]+718787259&4294967295,V=M+(b<<15&4294967295|b>>>17),b=A+(M^(V|~S))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(V+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var A=S-this.blockSize,I=this.B,V=this.h,M=0;M<S;){if(V==0)for(;M<=A;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<S;)if(I[V++]=C.charCodeAt(M++),V==this.blockSize){i(this,I),V=0;break}}else for(;M<S;)if(I[V++]=C[M++],V==this.blockSize){i(this,I),V=0;break}}this.h=V,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var A=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=A&255,A/=256;for(this.u(C),C=Array(16),S=A=0;4>S;++S)for(var I=0;32>I;I+=8)C[A++]=this.g[S]>>>I&255;return C};function s(C,S){var A=a;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=S(C)}function o(C,S){this.h=S;for(var A=[],I=!0,V=C.length-1;0<=V;V--){var M=C[V]|0;I&&M==S||(A[V]=M,I=!1)}this.g=A}var a={};function l(C){return-128<=C&&128>C?s(C,function(S){return new o([S|0],0>S?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return u;if(0>C)return w(c(-C));for(var S=[],A=1,I=0;C>=A;I++)S[I]=C/A|0,A*=4294967296;return new o(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return w(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(S,8)),I=u,V=0;V<C.length;V+=8){var M=Math.min(8,C.length-V),b=parseInt(C.substring(V,V+M),S);8>M?(M=c(Math.pow(S,M)),I=I.j(M).add(c(b))):(I=I.j(A),I=I.add(c(b)))}return I}var u=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-w(this).m();for(var C=0,S=1,A=0;A<this.g.length;A++){var I=this.i(A);C+=(0<=I?I:4294967296+I)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(m(this))return"-"+w(this).toString(C);for(var S=c(Math.pow(C,6)),A=this,I="";;){var V=P(A,S).g;A=_(A,V.j(S));var M=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=V,y(A))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function m(C){return C.h==-1}t.l=function(C){return C=_(this,C),m(C)?-1:y(C)?0:1};function w(C){for(var S=C.g.length,A=[],I=0;I<S;I++)A[I]=~C.g[I];return new o(A,~C.h).add(f)}t.abs=function(){return m(this)?w(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],I=0,V=0;V<=S;V++){var M=I+(this.i(V)&65535)+(C.i(V)&65535),b=(M>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);I=b>>>16,M&=65535,b&=65535,A[V]=b<<16|M}return new o(A,A[A.length-1]&-2147483648?-1:0)};function _(C,S){return C.add(w(S))}t.j=function(C){if(y(this)||y(C))return u;if(m(this))return m(C)?w(this).j(w(C)):w(w(this).j(C));if(m(C))return w(this.j(w(C)));if(0>this.l(p)&&0>C.l(p))return c(this.m()*C.m());for(var S=this.g.length+C.g.length,A=[],I=0;I<2*S;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(var V=0;V<C.g.length;V++){var M=this.i(I)>>>16,b=this.i(I)&65535,q=C.i(V)>>>16,te=C.i(V)&65535;A[2*I+2*V]+=b*te,v(A,2*I+2*V),A[2*I+2*V+1]+=M*te,v(A,2*I+2*V+1),A[2*I+2*V+1]+=b*q,v(A,2*I+2*V+1),A[2*I+2*V+2]+=M*q,v(A,2*I+2*V+2)}for(I=0;I<S;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=S;I<2*S;I++)A[I]=0;return new o(A,0)};function v(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function x(C,S){this.g=C,this.h=S}function P(C,S){if(y(S))throw Error("division by zero");if(y(C))return new x(u,u);if(m(C))return S=P(w(C),S),new x(w(S.g),w(S.h));if(m(S))return S=P(C,w(S)),new x(w(S.g),S.h);if(30<C.g.length){if(m(C)||m(S))throw Error("slowDivide_ only works with positive integers.");for(var A=f,I=S;0>=I.l(C);)A=R(A),I=R(I);var V=O(A,1),M=O(I,1);for(I=O(I,2),A=O(A,2);!y(I);){var b=M.add(I);0>=b.l(C)&&(V=V.add(A),M=b),I=O(I,1),A=O(A,1)}return S=_(C,V.j(S)),new x(V,S)}for(V=u;0<=C.l(S);){for(A=Math.max(1,Math.floor(C.m()/S.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=c(A),b=M.j(S);m(b)||0<b.l(C);)A-=I,M=c(A),b=M.j(S);y(M)&&(M=f),V=V.add(M),C=_(C,b)}return new x(V,C)}t.A=function(C){return P(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],I=0;I<S;I++)A[I]=this.i(I)&C.i(I);return new o(A,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],I=0;I<S;I++)A[I]=this.i(I)|C.i(I);return new o(A,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],I=0;I<S;I++)A[I]=this.i(I)^C.i(I);return new o(A,this.h^C.h)};function R(C){for(var S=C.g.length+1,A=[],I=0;I<S;I++)A[I]=C.i(I)<<1|C.i(I-1)>>>31;return new o(A,C.h)}function O(C,S){var A=S>>5;S%=32;for(var I=C.g.length-A,V=[],M=0;M<I;M++)V[M]=0<S?C.i(M+A)>>>S|C.i(M+A+1)<<32-S:C.i(M+A);return new o(V,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,rs=o}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qx,Pa,Gx,uc,Mp,Kx,Qx,Xx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,T){return h==Array.prototype||h==Object.prototype||(h[g]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var g=0;g<h.length;++g){var T=h[g];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(h,g){if(g)e:{var T=r;h=h.split(".");for(var k=0;k<h.length-1;k++){var L=h[k];if(!(L in T))break e;T=T[L]}h=h[h.length-1],k=T[h],g=g(k),g!=k&&g!=null&&e(T,h,{configurable:!0,writable:!0,value:g})}}function s(h,g){h instanceof String&&(h+="");var T=0,k=!1,L={next:function(){if(!k&&T<h.length){var j=T++;return{value:g(j,h[j]),done:!1}}return k=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(h){return h||function(){return s(this,function(g,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function d(h,g,T){return h.call.apply(h.bind,arguments)}function u(h,g,T){if(!h)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,k),h.apply(g,L)}}return function(){return h.apply(g,arguments)}}function f(h,g,T){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:u,f.apply(null,arguments)}function p(h,g){var T=Array.prototype.slice.call(arguments,1);return function(){var k=T.slice();return k.push.apply(k,arguments),h.apply(this,k)}}function y(h,g){function T(){}T.prototype=g.prototype,h.aa=g.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(k,L,j){for(var G=Array(arguments.length-2),be=2;be<arguments.length;be++)G[be-2]=arguments[be];return g.prototype[L].apply(k,G)}}function m(h){const g=h.length;if(0<g){const T=Array(g);for(let k=0;k<g;k++)T[k]=h[k];return T}return[]}function w(h,g){for(let T=1;T<arguments.length;T++){const k=arguments[T];if(l(k)){const L=h.length||0,j=k.length||0;h.length=L+j;for(let G=0;G<j;G++)h[L+G]=k[G]}else h.push(k)}}class _{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(h){return/^[\s\xa0]*$/.test(h)}function x(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function P(h){return P[" "](h),h}P[" "]=function(){};var R=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(h,g,T){for(const k in h)g.call(T,h[k],k,h)}function C(h,g){for(const T in h)g.call(void 0,h[T],T,h)}function S(h){const g={};for(const T in h)g[T]=h[T];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,g){let T,k;for(let L=1;L<arguments.length;L++){k=arguments[L];for(T in k)h[T]=k[T];for(let j=0;j<A.length;j++)T=A[j],Object.prototype.hasOwnProperty.call(k,T)&&(h[T]=k[T])}}function V(h){var g=1;h=h.split(":");const T=[];for(;0<g&&h.length;)T.push(h.shift()),g--;return h.length&&T.push(h.join(":")),T}function M(h){a.setTimeout(()=>{throw h},0)}function b(){var h=X;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class q{constructor(){this.h=this.g=null}add(g,T){const k=te.get();k.set(g,T),this.h?this.h.next=k:this.g=k,this.h=k}}var te=new _(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let re,z=!1,X=new q,F=()=>{const h=a.Promise.resolve(void 0);re=()=>{h.then(N)}};var N=()=>{for(var h;h=b();){try{h.h.call(h.g)}catch(T){M(T)}var g=te;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}z=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};a.addEventListener("test",T,g),a.removeEventListener("test",T,g)}catch{}return h}();function ne(h,g){if(K.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,k=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(R){e:{try{P(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else T=="mouseover"?g=h.fromElement:T=="mouseout"&&(g=h.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:se[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ne.aa.h.call(this)}}y(ne,K);var se={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),de=0;function _e(h,g,T,k,L){this.listener=h,this.proxy=null,this.src=g,this.type=T,this.capture=!!k,this.ha=L,this.key=++de,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,g,T,k,L){var j=h.toString();h=this.g[j],h||(h=this.g[j]=[],this.h++);var G=ce(h,g,k,L);return-1<G?(g=h[G],T||(g.fa=!1)):(g=new _e(g,this.src,j,!!k,L),g.fa=T,h.push(g)),g};function B(h,g){var T=g.type;if(T in h.g){var k=h.g[T],L=Array.prototype.indexOf.call(k,g,void 0),j;(j=0<=L)&&Array.prototype.splice.call(k,L,1),j&&(ve(g),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,g,T,k){for(var L=0;L<h.length;++L){var j=h[L];if(!j.da&&j.listener==g&&j.capture==!!T&&j.ha==k)return L}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),Me={};function Kt(h,g,T,k,L){if(Array.isArray(g)){for(var j=0;j<g.length;j++)Kt(h,g[j],T,k,L);return null}return T=ou(T),h&&h[J]?h.K(g,T,c(k)?!!k.capture:!1,L):cn(h,g,T,!1,k,L)}function cn(h,g,T,k,L,j){if(!g)throw Error("Invalid event type");var G=c(L)?!!L.capture:!!L,be=Ko(h);if(be||(h[ie]=be=new pe(h)),T=be.add(g,T,k,G,j),T.proxy)return T;if(k=$n(),T.proxy=k,k.src=h,k.listener=T,h.addEventListener)Z||(L=G),L===void 0&&(L=!1),h.addEventListener(g.toString(),k,L);else if(h.attachEvent)h.attachEvent(su(g.toString()),k);else if(h.addListener&&h.removeListener)h.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return T}function $n(){function h(T){return g.call(h.src,h.listener,T)}const g=hf;return h}function Yn(h,g,T,k,L){if(Array.isArray(g))for(var j=0;j<g.length;j++)Yn(h,g[j],T,k,L);else k=c(k)?!!k.capture:!!k,T=ou(T),h&&h[J]?(h=h.i,g=String(g).toString(),g in h.g&&(j=h.g[g],T=ce(j,T,k,L),-1<T&&(ve(j[T]),Array.prototype.splice.call(j,T,1),j.length==0&&(delete h.g[g],h.h--)))):h&&(h=Ko(h))&&(g=h.g[g.toString()],h=-1,g&&(h=ce(g,T,k,L)),(T=-1<h?g[h]:null)&&Qt(T))}function Qt(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[J])B(g.i,h);else{var T=h.type,k=h.proxy;g.removeEventListener?g.removeEventListener(T,k,h.capture):g.detachEvent?g.detachEvent(su(T),k):g.addListener&&g.removeListener&&g.removeListener(k),(T=Ko(g))?(B(T,h),T.h==0&&(T.src=null,g[ie]=null)):ve(h)}}}function su(h){return h in Me?Me[h]:Me[h]="on"+h}function hf(h,g){if(h.da)h=!0;else{g=new ne(g,this);var T=h.listener,k=h.ha||h.src;h.fa&&Qt(h),h=T.call(k,g)}return h}function Ko(h){return h=h[ie],h instanceof pe?h:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ou(h){return typeof h=="function"?h:(h[Cs]||(h[Cs]=function(g){return h.handleEvent(g)}),h[Cs])}function at(){$.call(this),this.i=new pe(this),this.M=this,this.F=null}y(at,$),at.prototype[J]=!0,at.prototype.removeEventListener=function(h,g,T,k){Yn(this,h,g,T,k)};function yt(h,g){var T,k=h.F;if(k)for(T=[];k;k=k.F)T.push(k);if(h=h.M,k=g.type||g,typeof g=="string")g=new K(g,h);else if(g instanceof K)g.target=g.target||h;else{var L=g;g=new K(k,h),I(g,L)}if(L=!0,T)for(var j=T.length-1;0<=j;j--){var G=g.g=T[j];L=Ps(G,k,!0,g)&&L}if(G=g.g=h,L=Ps(G,k,!0,g)&&L,L=Ps(G,k,!1,g)&&L,T)for(j=0;j<T.length;j++)G=g.g=T[j],L=Ps(G,k,!1,g)&&L}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var T=h.g[g],k=0;k<T.length;k++)ve(T[k]);delete h.g[g],h.h--}}this.F=null},at.prototype.K=function(h,g,T,k){return this.i.add(String(h),g,!1,T,k)},at.prototype.L=function(h,g,T,k){return this.i.add(String(h),g,!0,T,k)};function Ps(h,g,T,k){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,j=0;j<g.length;++j){var G=g[j];if(G&&!G.da&&G.capture==T){var be=G.listener,_t=G.ha||G.src;G.fa&&B(h.i,G),L=be.call(_t,k)!==!1&&L}}return L&&!k.defaultPrevented}function Qo(h,g,T){if(typeof h=="function")T&&(h=f(h,T));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Xo(h){h.g=Qo(()=>{h.g=null,h.i&&(h.i=!1,Xo(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class Yo extends ${constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Xo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Di(h){$.call(this),this.h=h,this.g={}}y(Di,$);var au=[];function Uy(h){O(h.g,function(g,T){this.g.hasOwnProperty(T)&&Qt(g)},h),h.g={}}Di.prototype.N=function(){Di.aa.N.call(this),Uy(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ff=a.JSON.stringify,LC=a.JSON.parse,jC=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function df(){}df.prototype.h=null;function $y(h){return h.h||(h.h=h.i())}function zy(){}var Zo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pf(){K.call(this,"d")}y(pf,K);function mf(){K.call(this,"c")}y(mf,K);var Ni={},Wy=null;function lu(){return Wy=Wy||new at}Ni.La="serverreachability";function Hy(h){K.call(this,Ni.La,h)}y(Hy,K);function Jo(h){const g=lu();yt(g,new Hy(g))}Ni.STAT_EVENT="statevent";function qy(h,g){K.call(this,Ni.STAT_EVENT,h),this.stat=g}y(qy,K);function Ut(h){const g=lu();yt(g,new qy(g,h))}Ni.Ma="timingevent";function Gy(h,g){K.call(this,Ni.Ma,h),this.size=g}y(Gy,K);function ea(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function BC(h,g,T,k,L,j){h.info(function(){if(h.g)if(j)for(var G="",be=j.split("&"),_t=0;_t<be.length;_t++){var Ae=be[_t].split("=");if(1<Ae.length){var It=Ae[0];Ae=Ae[1];var kt=It.split("_");G=2<=kt.length&&kt[1]=="type"?G+(It+"="+Ae+"&"):G+(It+"=redacted&")}}else G=null;else G=j;return"XMLHTTP REQ ("+k+") [attempt "+L+"]: "+g+`
`+T+`
`+G})}function UC(h,g,T,k,L,j,G){h.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+L+"]: "+g+`
`+T+`
`+j+" "+G})}function Is(h,g,T,k){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+zC(h,T)+(k?" "+k:"")})}function $C(h,g){h.info(function(){return"TIMEOUT: "+g})}ta.prototype.info=function(){};function zC(h,g){if(!h.g)return g;if(!g)return null;try{var T=JSON.parse(g);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var k=T[h];if(!(2>k.length)){var L=k[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return ff(T)}catch{return g}}var uu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ky={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gf;function cu(){}y(cu,df),cu.prototype.g=function(){return new XMLHttpRequest},cu.prototype.i=function(){return{}},gf=new cu;function Fr(h,g,T,k){this.j=h,this.i=g,this.l=T,this.R=k||1,this.U=new Di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qy}function Qy(){this.i=null,this.g="",this.h=!1}var Xy={},yf={};function _f(h,g,T){h.L=1,h.v=pu(dr(g)),h.m=T,h.P=!0,Yy(h,null)}function Yy(h,g){h.F=Date.now(),hu(h),h.A=dr(h.v);var T=h.A,k=h.R;Array.isArray(k)||(k=[String(k)]),h_(T.i,"t",k),h.C=0,T=h.j.J,h.h=new Qy,h.g=k_(h.j,T?g:null,!h.m),0<h.O&&(h.M=new Yo(f(h.Y,h,h.g),h.O)),g=h.U,T=h.g,k=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(au[0]=L.toString()),L=au);for(var j=0;j<L.length;j++){var G=Kt(T,L[j],k||g.handleEvent,!1,g.h||g);if(!G)break;g.g[G.key]=G}g=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),Jo(),BC(h.i,h.u,h.A,h.l,h.R,h.m)}Fr.prototype.ca=function(h){h=h.target;const g=this.M;g&&pr(h)==3?g.j():this.Y(h)},Fr.prototype.Y=function(h){try{if(h==this.g)e:{const kt=pr(this.g);var g=this.g.Ba();const Rs=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||__(this.g)))){this.J||kt!=4||g==7||(g==8||0>=Rs?Jo(3):Jo(2)),vf(this);var T=this.g.Z();this.X=T;t:if(Zy(this)){var k=__(this.g);h="";var L=k.length,j=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),na(this);var G="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,h+=this.h.i.decode(k[g],{stream:!(j&&g==L-1)});k.length=0,this.h.g+=h,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=T==200,UC(this.i,this.u,this.A,this.l,this.R,kt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var be,_t=this.g;if((be=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(be)){var Ae=be;break t}}Ae=null}if(T=Ae)Is(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wf(this,T);else{this.o=!1,this.s=3,Ut(12),Oi(this),na(this);break e}}if(this.P){T=!0;let zn;for(;!this.J&&this.C<G.length;)if(zn=WC(this,G),zn==yf){kt==4&&(this.s=4,Ut(14),T=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Xy){this.s=4,Ut(15),Is(this.i,this.l,G,"[Invalid Chunk]"),T=!1;break}else Is(this.i,this.l,zn,null),wf(this,zn);if(Zy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||G.length!=0||this.h.h||(this.s=1,Ut(16),T=!1),this.o=this.o&&T,!T)Is(this.i,this.l,G,"[Invalid Chunked Response]"),Oi(this),na(this);else if(0<G.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Cf(It),It.M=!0,Ut(11))}}else Is(this.i,this.l,G,null),wf(this,G);kt==4&&Oi(this),this.o&&!this.J&&(kt==4?A_(this.j,this):(this.o=!1,hu(this)))}else aP(this.g),T==400&&0<G.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Oi(this),na(this)}}}catch{}finally{}};function Zy(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function WC(h,g){var T=h.C,k=g.indexOf(`
`,T);return k==-1?yf:(T=Number(g.substring(T,k)),isNaN(T)?Xy:(k+=1,k+T>g.length?yf:(g=g.slice(k,k+T),h.C=k+T,g)))}Fr.prototype.cancel=function(){this.J=!0,Oi(this)};function hu(h){h.S=Date.now()+h.I,Jy(h,h.I)}function Jy(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ea(f(h.ba,h),g)}function vf(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Fr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?($C(this.i,this.A),this.L!=2&&(Jo(),Ut(17)),Oi(this),this.s=2,na(this)):Jy(this,this.S-h)};function na(h){h.j.G==0||h.J||A_(h.j,h)}function Oi(h){vf(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,Uy(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function wf(h,g){try{var T=h.j;if(T.G!=0&&(T.g==h||Tf(T.h,h))){if(!h.K&&Tf(T.h,h)&&T.G==3){try{var k=T.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var L=k;if(L[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)wu(T),_u(T);else break e;Af(T),Ut(18)}}else T.za=L[1],0<T.za-T.T&&37500>L[2]&&T.F&&T.v==0&&!T.C&&(T.C=ea(f(T.Za,T),6e3));if(1>=n_(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Li(T,11)}else if((h.K||T.g==h)&&wu(T),!v(g))for(L=T.Da.g.parse(g),g=0;g<L.length;g++){let Ae=L[g];if(T.T=Ae[0],Ae=Ae[1],T.G==2)if(Ae[0]=="c"){T.K=Ae[1],T.ia=Ae[2];const It=Ae[3];It!=null&&(T.la=It,T.j.info("VER="+T.la));const kt=Ae[4];kt!=null&&(T.Aa=kt,T.j.info("SVER="+T.Aa));const Rs=Ae[5];Rs!=null&&typeof Rs=="number"&&0<Rs&&(k=1.5*Rs,T.L=k,T.j.info("backChannelRequestTimeoutMs_="+k)),k=T;const zn=h.g;if(zn){const xu=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xu){var j=k.h;j.g||xu.indexOf("spdy")==-1&&xu.indexOf("quic")==-1&&xu.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(xf(j,j.h),j.h=null))}if(k.D){const Pf=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Pf&&(k.ya=Pf,Oe(k.I,k.D,Pf))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),k=T;var G=h;if(k.qa=I_(k,k.J?k.ia:null,k.W),G.K){r_(k.h,G);var be=G,_t=k.L;_t&&(be.I=_t),be.B&&(vf(be),hu(be)),k.g=G}else E_(k);0<T.i.length&&vu(T)}else Ae[0]!="stop"&&Ae[0]!="close"||Li(T,7);else T.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Li(T,7):Sf(T):Ae[0]!="noop"&&T.l&&T.l.ta(Ae),T.v=0)}}Jo(4)}catch{}}var HC=class{constructor(h,g){this.g=h,this.map=g}};function e_(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function t_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function n_(h){return h.h?1:h.g?h.g.size:0}function Tf(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function xf(h,g){h.g?h.g.add(g):h.h=g}function r_(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}e_.prototype.cancel=function(){if(this.i=i_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function i_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const T of h.g.values())g=g.concat(T.D);return g}return m(h.i)}function qC(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],T=h.length,k=0;k<T;k++)g.push(h[k]);return g}g=[],T=0;for(k in h)g[T++]=h[k];return g}function GC(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var T=0;T<h;T++)g.push(T);return g}g=[],T=0;for(const k in h)g[T++]=k;return g}}}function s_(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var T=GC(h),k=qC(h),L=k.length,j=0;j<L;j++)g.call(void 0,k[j],T&&T[j],h)}var o_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KC(h,g){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var k=h[T].indexOf("="),L=null;if(0<=k){var j=h[T].substring(0,k);L=h[T].substring(k+1)}else j=h[T];g(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Fi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Fi){this.h=h.h,fu(this,h.j),this.o=h.o,this.g=h.g,du(this,h.s),this.l=h.l;var g=h.i,T=new sa;T.i=g.i,g.g&&(T.g=new Map(g.g),T.h=g.h),a_(this,T),this.m=h.m}else h&&(g=String(h).match(o_))?(this.h=!1,fu(this,g[1]||"",!0),this.o=ra(g[2]||""),this.g=ra(g[3]||"",!0),du(this,g[4]),this.l=ra(g[5]||"",!0),a_(this,g[6]||"",!0),this.m=ra(g[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}Fi.prototype.toString=function(){var h=[],g=this.j;g&&h.push(ia(g,l_,!0),":");var T=this.g;return(T||g=="file")&&(h.push("//"),(g=this.o)&&h.push(ia(g,l_,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ia(T,T.charAt(0)=="/"?YC:XC,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ia(T,JC)),h.join("")};function dr(h){return new Fi(h)}function fu(h,g,T){h.j=T?ra(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function du(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function a_(h,g,T){g instanceof sa?(h.i=g,eP(h.i,h.h)):(T||(g=ia(g,ZC)),h.i=new sa(g,h.h))}function Oe(h,g,T){h.i.set(g,T)}function pu(h){return Oe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ra(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ia(h,g,T){return typeof h=="string"?(h=encodeURI(h).replace(g,QC),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function QC(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var l_=/[#\/\?@]/g,XC=/[#\?:]/g,YC=/[#\?]/g,ZC=/[#\?@]/g,JC=/#/g;function sa(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Lr(h){h.g||(h.g=new Map,h.h=0,h.i&&KC(h.i,function(g,T){h.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}t=sa.prototype,t.add=function(h,g){Lr(this),this.i=null,h=ks(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(g),this.h+=1,this};function u_(h,g){Lr(h),g=ks(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function c_(h,g){return Lr(h),g=ks(h,g),h.g.has(g)}t.forEach=function(h,g){Lr(this),this.g.forEach(function(T,k){T.forEach(function(L){h.call(g,L,k,this)},this)},this)},t.na=function(){Lr(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),T=[];for(let k=0;k<g.length;k++){const L=h[k];for(let j=0;j<L.length;j++)T.push(g[k])}return T},t.V=function(h){Lr(this);let g=[];if(typeof h=="string")c_(this,h)&&(g=g.concat(this.g.get(ks(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)g=g.concat(h[T])}return g},t.set=function(h,g){return Lr(this),this.i=null,h=ks(this,h),c_(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function h_(h,g,T){u_(h,g),0<T.length&&(h.i=null,h.g.set(ks(h,g),m(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var T=0;T<g.length;T++){var k=g[T];const j=encodeURIComponent(String(k)),G=this.V(k);for(k=0;k<G.length;k++){var L=j;G[k]!==""&&(L+="="+encodeURIComponent(String(G[k]))),h.push(L)}}return this.i=h.join("&")};function ks(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function eP(h,g){g&&!h.j&&(Lr(h),h.i=null,h.g.forEach(function(T,k){var L=k.toLowerCase();k!=L&&(u_(this,k),h_(this,L,T))},h)),h.j=g}function tP(h,g){const T=new ta;if(a.Image){const k=new Image;k.onload=p(jr,T,"TestLoadImage: loaded",!0,g,k),k.onerror=p(jr,T,"TestLoadImage: error",!1,g,k),k.onabort=p(jr,T,"TestLoadImage: abort",!1,g,k),k.ontimeout=p(jr,T,"TestLoadImage: timeout",!1,g,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=h}else g(!1)}function nP(h,g){const T=new ta,k=new AbortController,L=setTimeout(()=>{k.abort(),jr(T,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:k.signal}).then(j=>{clearTimeout(L),j.ok?jr(T,"TestPingServer: ok",!0,g):jr(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),jr(T,"TestPingServer: error",!1,g)})}function jr(h,g,T,k,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),k(T)}catch{}}function rP(){this.g=new jC}function iP(h,g,T){const k=T||"";try{s_(h,function(L,j){let G=L;c(L)&&(G=ff(L)),g.push(k+j+"="+encodeURIComponent(G))})}catch(L){throw g.push(k+"type="+encodeURIComponent("_badmap")),L}}function mu(h){this.l=h.Ub||null,this.j=h.eb||!1}y(mu,df),mu.prototype.g=function(){return new gu(this.l,this.j)},mu.prototype.i=function(h){return function(){return h}}({});function gu(h,g){at.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(gu,at),t=gu.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,aa(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f_(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function f_(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?oa(this):aa(this),this.readyState==3&&f_(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,oa(this))},t.Qa=function(h){this.g&&(this.response=h,oa(this))},t.ga=function(){this.g&&oa(this)};function oa(h){h.readyState=4,h.l=null,h.j=null,h.v=null,aa(h)}t.setRequestHeader=function(h,g){this.u.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=g.next();return h.join(`\r
`)};function aa(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function d_(h){let g="";return O(h,function(T,k){g+=k,g+=":",g+=T,g+=`\r
`}),g}function Ef(h,g,T){e:{for(k in T){var k=!1;break e}k=!0}k||(T=d_(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Oe(h,g,T))}function Qe(h){at.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Qe,at);var sP=/^https?$/i,oP=["POST","PUT"];t=Qe.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,g,T,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gf.g(),this.v=this.o?$y(this.o):$y(gf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(j){p_(this,j);return}if(h=T||"",T=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var L in k)T.set(L,k[L]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const j of k.keys())T.set(j,k.get(j));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(T.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oP,g,void 0))||k||L||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,G]of T)this.g.setRequestHeader(j,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{y_(this),this.u=!0,this.g.send(h),this.u=!1}catch(j){p_(this,j)}};function p_(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,m_(h),yu(h)}function m_(h){h.A||(h.A=!0,yt(h,"complete"),yt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,yt(this,"complete"),yt(this,"abort"),yu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yu(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?g_(this):this.bb())},t.bb=function(){g_(this)};function g_(h){if(h.h&&typeof o<"u"&&(!h.v[1]||pr(h)!=4||h.Z()!=2)){if(h.u&&pr(h)==4)Qo(h.Ea,0,h);else if(yt(h,"readystatechange"),pr(h)==4){h.h=!1;try{const G=h.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var k;if(k=G===0){var L=String(h.D).match(o_)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),k=!sP.test(L?L.toLowerCase():"")}T=k}if(T)yt(h,"complete"),yt(h,"success");else{h.m=6;try{var j=2<pr(h)?h.g.statusText:""}catch{j=""}h.l=j+" ["+h.Z()+"]",m_(h)}}finally{yu(h)}}}}function yu(h,g){if(h.g){y_(h);const T=h.g,k=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||yt(h,"ready");try{T.onreadystatechange=k}catch{}}}function y_(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function pr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),LC(g)}};function __(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function aP(h){const g={};h=(h.g&&2<=pr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<h.length;k++){if(v(h[k]))continue;var T=V(h[k]);const L=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const j=g[L]||[];g[L]=j,j.push(T)}C(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(h,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||g}function v_(h){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,h),this.cb=la("retryDelaySeedMs",1e4,h),this.Wa=la("forwardChannelMaxRetries",2,h),this.wa=la("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new e_(h&&h.concurrentRequestLimit),this.Da=new rP,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=v_.prototype,t.la=8,t.G=1,t.connect=function(h,g,T,k){Ut(0),this.W=h,this.H=g||{},T&&k!==void 0&&(this.H.OSID=T,this.H.OAID=k),this.F=this.X,this.I=I_(this,null,this.W),vu(this)};function Sf(h){if(w_(h),h.G==3){var g=h.U++,T=dr(h.I);if(Oe(T,"SID",h.K),Oe(T,"RID",g),Oe(T,"TYPE","terminate"),ua(h,T),g=new Fr(h,h.j,g),g.L=2,g.v=pu(dr(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=g.v,T=!0),T||(g.g=k_(g.j,null),g.g.ea(g.v)),g.F=Date.now(),hu(g)}P_(h)}function _u(h){h.g&&(Cf(h),h.g.cancel(),h.g=null)}function w_(h){_u(h),h.u&&(a.clearTimeout(h.u),h.u=null),wu(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function vu(h){if(!t_(h.h)&&!h.s){h.s=!0;var g=h.Ga;re||F(),z||(re(),z=!0),X.add(g,h),h.B=0}}function lP(h,g){return n_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ea(f(h.Ga,h,g),C_(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new Fr(this,this.j,h);let j=this.o;if(this.S&&(j?(j=S(j),I(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var k=this.i[T];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=x_(this,L,g),T=dr(this.I),Oe(T,"RID",h),Oe(T,"CVER",22),this.D&&Oe(T,"X-HTTP-Session-Id",this.D),ua(this,T),j&&(this.O?g="headers="+encodeURIComponent(String(d_(j)))+"&"+g:this.m&&Ef(T,this.m,j)),xf(this.h,L),this.Ua&&Oe(T,"TYPE","init"),this.P?(Oe(T,"$req",g),Oe(T,"SID","null"),L.T=!0,_f(L,T,null)):_f(L,T,g),this.G=2}}else this.G==3&&(h?T_(this,h):this.i.length==0||t_(this.h)||T_(this))};function T_(h,g){var T;g?T=g.l:T=h.U++;const k=dr(h.I);Oe(k,"SID",h.K),Oe(k,"RID",T),Oe(k,"AID",h.T),ua(h,k),h.m&&h.o&&Ef(k,h.m,h.o),T=new Fr(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),g&&(h.i=g.D.concat(h.i)),g=x_(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),xf(h.h,T),_f(T,k,g)}function ua(h,g){h.H&&O(h.H,function(T,k){Oe(g,k,T)}),h.l&&s_({},function(T,k){Oe(g,k,T)})}function x_(h,g,T){T=Math.min(h.i.length,T);var k=h.l?f(h.l.Na,h.l,h):null;e:{var L=h.i;let j=-1;for(;;){const G=["count="+T];j==-1?0<T?(j=L[0].g,G.push("ofs="+j)):j=0:G.push("ofs="+j);let be=!0;for(let _t=0;_t<T;_t++){let Ae=L[_t].g;const It=L[_t].map;if(Ae-=j,0>Ae)j=Math.max(0,L[_t].g-100),be=!1;else try{iP(It,G,"req"+Ae+"_")}catch{k&&k(It)}}if(be){k=G.join("&");break e}}}return h=h.i.splice(0,T),g.D=h,k}function E_(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;re||F(),z||(re(),z=!0),X.add(g,h),h.v=0}}function Af(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ea(f(h.Fa,h),C_(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,S_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ea(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),_u(this),S_(this))};function Cf(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function S_(h){h.g=new Fr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=dr(h.qa);Oe(g,"RID","rpc"),Oe(g,"SID",h.K),Oe(g,"AID",h.T),Oe(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&Oe(g,"TO",h.ja),Oe(g,"TYPE","xmlhttp"),ua(h,g),h.m&&h.o&&Ef(g,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=pu(dr(g)),T.m=null,T.P=!0,Yy(T,h)}t.Za=function(){this.C!=null&&(this.C=null,_u(this),Af(this),Ut(19))};function wu(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function A_(h,g){var T=null;if(h.g==g){wu(h),Cf(h),h.g=null;var k=2}else if(Tf(h.h,g))T=g.D,r_(h.h,g),k=1;else return;if(h.G!=0){if(g.o)if(k==1){T=g.m?g.m.length:0,g=Date.now()-g.F;var L=h.B;k=lu(),yt(k,new Gy(k,T)),vu(h)}else E_(h);else if(L=g.s,L==3||L==0&&0<g.X||!(k==1&&lP(h,g)||k==2&&Af(h)))switch(T&&0<T.length&&(g=h.h,g.i=g.i.concat(T)),L){case 1:Li(h,5);break;case 4:Li(h,10);break;case 3:Li(h,6);break;default:Li(h,2)}}}function C_(h,g){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*g}function Li(h,g){if(h.j.info("Error code "+g),g==2){var T=f(h.fb,h),k=h.Xa;const L=!k;k=new Fi(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fu(k,"https"),pu(k),L?tP(k.toString(),T):nP(k.toString(),T)}else Ut(2);h.G=0,h.l&&h.l.sa(g),P_(h),w_(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function P_(h){if(h.G=0,h.ka=[],h.l){const g=i_(h.h);(g.length!=0||h.i.length!=0)&&(w(h.ka,g),w(h.ka,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.ra()}}function I_(h,g,T){var k=T instanceof Fi?dr(T):new Fi(T);if(k.g!="")g&&(k.g=g+"."+k.g),du(k,k.s);else{var L=a.location;k=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var j=new Fi(null);k&&fu(j,k),g&&(j.g=g),L&&du(j,L),T&&(j.l=T),k=j}return T=h.D,g=h.ya,T&&g&&Oe(k,T,g),Oe(k,"VER",h.la),ua(h,k),k}function k_(h,g,T){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new Qe(new mu({eb:T})):new Qe(h.pa),g.Ha(h.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function b_(){}t=b_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tu(){}Tu.prototype.g=function(h,g){return new hn(h,g)};function hn(h,g){at.call(this),this.g=new v_(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!v(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new bs(this)}y(hn,at),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Sf(this.g)},hn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=ff(h),h=T);g.i.push(new HC(g.Ya++,h)),g.G==3&&vu(g)},hn.prototype.N=function(){this.g.l=null,delete this.j,Sf(this.g),delete this.g,hn.aa.N.call(this)};function R_(h){pf.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const T in g){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}y(R_,pf);function V_(){mf.call(this),this.status=1}y(V_,mf);function bs(h){this.g=h}y(bs,b_),bs.prototype.ua=function(){yt(this.g,"a")},bs.prototype.ta=function(h){yt(this.g,new R_(h))},bs.prototype.sa=function(h){yt(this.g,new V_)},bs.prototype.ra=function(){yt(this.g,"b")},Tu.prototype.createWebChannel=Tu.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,Xx=function(){return new Tu},Qx=function(){return lu()},Kx=Ni,Mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uu.NO_ERROR=0,uu.TIMEOUT=8,uu.HTTP_ERROR=6,uc=uu,Ky.COMPLETE="complete",Gx=Ky,zy.EventType=Zo,Zo.OPEN="a",Zo.CLOSE="b",Zo.ERROR="c",Zo.MESSAGE="d",at.prototype.listen=at.prototype.K,Pa=zy,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,qx=Qe}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const av="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Lx("@firebase/firestore");function va(){return ms.logLevel}function ee(t,...e){if(ms.logLevel<=Ee.DEBUG){const n=e.map(_g);ms.debug(`Firestore (${Wo}): ${t}`,...n)}}function br(t,...e){if(ms.logLevel<=Ee.ERROR){const n=e.map(_g);ms.error(`Firestore (${Wo}): ${t}`,...n)}}function xo(t,...e){if(ms.logLevel<=Ee.WARN){const n=e.map(_g);ms.warn(`Firestore (${Wo}): ${t}`,...n)}}function _g(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: `+t;throw br(e),new Error(e)}function ke(t,e){t||ue()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends zo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class u2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c2{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new is;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new is,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new is)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new Yx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new Nt(e)}}class h2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class f2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new h2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ke(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string"),this.R=n.token,new d2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=m2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ce(t,e){return t<e?-1:t>e?1:0}function Eo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ht(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new ht(0,0))}static max(){return new he(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ye extends xl{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const g2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends xl{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return g2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new oe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new oe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new oe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ye.fromString(e))}static fromName(e){return new ae(Ye.fromString(e).popFirst(5))}static empty(){return new ae(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ye(e.slice()))}}function y2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new wi(i,ae.empty(),e)}function _2(t){return new wi(t.readTime,t.key,-1)}class wi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wi(he.min(),ae.empty(),-1)}static max(){return new wi(he.max(),ae.empty(),-1)}}function v2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==w2)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function x2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vg.oe=-1;function Fh(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function E2(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uu(this.root,e,this.comparator,!0)}}class Uu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=i??Tt.EMPTY,this.right=s??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uv(this.data.getIterator())}getIteratorFrom(e){return new uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new gn([])}unionWith(e){let n=new St(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new eE("Invalid base64 string: "+s):s}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const S2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(t){if(ke(!!t),typeof t=="string"){let e=0;const n=S2.exec(t);if(ke(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tg(t){const e=t.mapValue.fields.__previous_value__;return wg(e)?Tg(e):e}function El(t){const e=Ti(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Sl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u={mapValue:{}};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wg(t)?4:P2(t)?9007199254740991:C2(t)?10:11:ue()}function cr(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return El(t).isEqual(El(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ti(i.timestampValue),a=Ti(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gs(i.bytesValue).isEqual(gs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?Kc(o)===Kc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Eo(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(lv(o)!==lv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!cr(o[l],a[l])))return!1;return!0}(t,e);default:return ue()}}function Al(t,e){return(t.values||[]).find(n=>cr(n,e))!==void 0}function So(t,e){if(t===e)return 0;const n=ys(t),r=ys(e);if(n!==r)return Ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cv(t.timestampValue,e.timestampValue);case 4:return cv(El(t),El(e));case 5:return Ce(t.stringValue,e.stringValue);case 6:return function(s,o){const a=gs(s),l=gs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ce(a[c],l[c]);if(d!==0)return d}return Ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ce(Je(s.latitude),Je(o.latitude));return a!==0?a:Ce(Je(s.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const u=s.fields||{},f=o.fields||{},p=(a=u.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=Ce(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return m!==0?m:hv(p,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===$u.mapValue&&o===$u.mapValue)return 0;if(s===$u.mapValue)return 1;if(o===$u.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let u=0;u<l.length&&u<d.length;++u){const f=Ce(l[u],d[u]);if(f!==0)return f;const p=So(a[l[u]],c[d[u]]);if(p!==0)return p}return Ce(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ue()}}function cv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=Ti(t),r=Ti(e),i=Ce(n.seconds,r.seconds);return i!==0?i:Ce(n.nanos,r.nanos)}function hv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=So(n[i],r[i]);if(s)return s}return Ce(n.length,r.length)}function Ao(t){return Dp(t)}function Dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ti(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Dp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Dp(n.fields[o])}`;return i+"}"}(t.mapValue):ue()}function Np(t){return!!t&&"integerValue"in t}function xg(t){return!!t&&"arrayValue"in t}function fv(t){return!!t&&"nullValue"in t}function dv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cc(t){return!!t&&"mapValue"in t}function C2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Wa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function P2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wa(n)}setAll(e){let n=xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Wa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());cc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ws(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yt(Wa(this.value))}}function tE(t){const e=[];return ws(t.fields,(n,r)=>{const i=new xt([n]);if(cc(r)){const s=tE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ft(e,0,he.min(),he.min(),he.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ft(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new Ft(e,2,n,he.min(),he.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,he.min(),he.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function pv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=So(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function I2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{}class ut extends nE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new b2(e,n,r):n==="array-contains"?new M2(e,r):n==="in"?new D2(e,r):n==="not-in"?new N2(e,r):n==="array-contains-any"?new O2(e,r):new ut(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new R2(e,r):new V2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(So(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(So(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends nE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hr(e,n)}matches(e){return rE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rE(t){return t.op==="and"}function iE(t){return k2(t)&&rE(t)}function k2(t){for(const e of t.filters)if(e instanceof hr)return!1;return!0}function Op(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Ao(t.value);if(iE(t))return t.filters.map(e=>Op(e)).join(",");{const e=t.filters.map(n=>Op(n)).join(",");return`${t.op}(${e})`}}function sE(t,e){return t instanceof ut?function(r,i){return i instanceof ut&&r.op===i.op&&r.field.isEqual(i.field)&&cr(r.value,i.value)}(t,e):t instanceof hr?function(r,i){return i instanceof hr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sE(o,i.filters[a]),!0):!1}(t,e):void ue()}function oE(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Ao(n.value)}`}(t):t instanceof hr?function(n){return n.op.toString()+" {"+n.getFilters().map(oE).join(" ,")+"}"}(t):"Filter"}class b2 extends ut{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class R2 extends ut{constructor(e,n){super(e,"in",n),this.keys=aE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V2 extends ut{constructor(e,n){super(e,"not-in",n),this.keys=aE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class M2 extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xg(n)&&Al(n.arrayValue,this.value)}}class D2 extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Al(this.value.arrayValue,n)}}class N2 extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Al(this.value.arrayValue,n)}}class O2 extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Al(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function gv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new F2(t,e,n,r,i,s,o)}function Eg(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Op(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ao(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ao(r)).join(",")),e.ue=n}return e.ue}function Sg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mv(t.startAt,e.startAt)&&mv(t.endAt,e.endAt)}function Fp(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function L2(t,e,n,r,i,s,o,a){return new Lh(t,e,n,r,i,s,o,a)}function Ag(t){return new Lh(t)}function yv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function j2(t){return t.collectionGroup!==null}function Ha(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new St(xt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Xc(s,r))}),n.has(xt.keyField().canonicalString())||e.ce.push(new Xc(xt.keyField(),r))}return e.ce}function or(t){const e=fe(t);return e.le||(e.le=B2(e,Ha(t))),e.le}function B2(t,e){if(t.limitType==="F")return gv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Xc(i.field,s)});const n=t.endAt?new Qc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qc(t.startAt.position,t.startAt.inclusive):null;return gv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lp(t,e,n){return new Lh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return Sg(or(t),or(e))&&t.limitType===e.limitType}function lE(t){return`${Eg(or(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oE(i)).join(", ")}]`),Fh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ao(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ao(i)).join(",")),`Target(${r})`}(or(t))}; limitType=${t.limitType})`}function Bh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ha(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=pv(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ha(r),i)||r.endAt&&!function(o,a,l){const c=pv(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ha(r),i))}(t,e)}function U2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uE(t){return(e,n)=>{let r=!1;for(const i of Ha(t)){const s=$2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $2(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?So(l,c):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Jx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Ke(ae.comparator);function Rr(){return z2}const cE=new Ke(ae.comparator);function Ia(...t){let e=cE;for(const n of t)e=e.insert(n.key,n);return e}function hE(t){let e=cE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zi(){return qa()}function fE(){return qa()}function qa(){return new Ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const W2=new Ke(ae.comparator),H2=new St(ae.comparator);function ge(...t){let e=H2;for(const n of t)e=e.add(n);return e}const q2=new St(Ce);function G2(){return q2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function dE(t){return{integerValue:""+t}}function pE(t,e){return E2(e)?dE(e):Cg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function K2(t,e,n){return t instanceof Cl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wg(s)&&(s=Tg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Co?gE(t,e):t instanceof Pl?yE(t,e):function(i,s){const o=mE(i,s),a=_v(o)+_v(i.Pe);return Np(o)&&Np(i.Pe)?dE(a):Cg(i.serializer,a)}(t,e)}function Q2(t,e,n){return t instanceof Co?gE(t,e):t instanceof Pl?yE(t,e):n}function mE(t,e){return t instanceof Il?function(r){return Np(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Cl extends Uh{}class Co extends Uh{constructor(e){super(),this.elements=e}}function gE(t,e){const n=_E(e);for(const r of t.elements)n.some(i=>cr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pl extends Uh{constructor(e){super(),this.elements=e}}function yE(t,e){let n=_E(e);for(const r of t.elements)n=n.filter(i=>!cr(i,r));return{arrayValue:{values:n}}}class Il extends Uh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _v(t){return Je(t.integerValue||t.doubleValue)}function _E(t){return xg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.field=e,this.transform=n}}function X2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Co&&i instanceof Co||r instanceof Pl&&i instanceof Pl?Eo(r.elements,i.elements,cr):r instanceof Il&&i instanceof Il?cr(r.Pe,i.Pe):r instanceof Cl&&i instanceof Cl}(t.transform,e.transform)}class Y2{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $h{}function vE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new TE(t.key,ar.none()):new Kl(t.key,t.data,ar.none());{const n=t.data,r=Yt.empty();let i=new St(xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ri(t.key,r,new gn(i.toArray()),ar.none())}}function Z2(t,e,n){t instanceof Kl?function(i,s,o){const a=i.value.clone(),l=wv(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(i,s,o){if(!hc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=wv(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(wE(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ga(t,e,n,r){return t instanceof Kl?function(s,o,a,l){if(!hc(s.precondition,o))return a;const c=s.value.clone(),d=Tv(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ri?function(s,o,a,l){if(!hc(s.precondition,o))return a;const c=Tv(s.fieldTransforms,l,o),d=o.data;return d.setAll(wE(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(s,o,a){return hc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function J2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=mE(r.transform,i||null);s!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,s))}return n||null}function vv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Eo(r,i,(s,o)=>X2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kl extends $h{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ri extends $h{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wv(t,e,n){const r=new Map;ke(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Q2(o,a,n[i]))}return r}function Tv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,K2(s,o,e))}return r}class TE extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eV extends $h{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Z2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=vE(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(n,r)=>vv(n,r))&&Eo(this.baseMutations,e.baseMutations,(n,r)=>vv(n,r))}}class Ig{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ke(e.mutations.length===r.length);let i=function(){return W2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ig(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,we;function iV(t){switch(t){default:return ue();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function xE(t){if(t===void 0)return br("GRPC error has no .code"),W.UNKNOWN;switch(t){case rt.OK:return W.OK;case rt.CANCELLED:return W.CANCELLED;case rt.UNKNOWN:return W.UNKNOWN;case rt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case rt.INTERNAL:return W.INTERNAL;case rt.UNAVAILABLE:return W.UNAVAILABLE;case rt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case rt.NOT_FOUND:return W.NOT_FOUND;case rt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case rt.ABORTED:return W.ABORTED;case rt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case rt.DATA_LOSS:return W.DATA_LOSS;default:return ue()}}(we=rt||(rt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new rs([4294967295,4294967295],0);function xv(t){const e=sV().encode(t),n=new Hx;return n.update(e),new Uint8Array(n.digest())}function Ev(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rs([n,r],0),new rs([i,s],0)]}class kg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ka(`Invalid padding: ${n}`);if(r<0)throw new ka(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ka(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ka(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=rs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(rs.fromNumber(r)));return i.compare(oV)===1&&(i=new rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=xv(e),[r,i]=Ev(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new kg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=xv(e),[r,i]=Ev(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zh(he.min(),i,new Ke(Ce),Rr(),ge())}}class Ql{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ql(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class EE{constructor(e,n){this.targetId=e,this.me=n}}class SE{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Sv{constructor(){this.fe=0,this.ge=Cv(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new Ql(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Cv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aV{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rr(),this.qe=Av(),this.Qe=new Ke(Ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Fp(s))if(r===0){const o=new ae(s.path);this.Ue(n,o,Ft.newNoDocument(o,he.min()))}else ke(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=gs(r).toUint8Array()}catch(l){if(l instanceof eE)return xo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kg(o,i,s)}catch(l){return xo(l instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Fp(a.target)){const l=new ae(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ft.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ge();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new zh(e,n,this.Qe,this.ke,r);return this.ke=Rr(),this.qe=Av(),this.Qe=new Ke(Ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Sv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(Ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Av(){return new Ke(ae.comparator)}function Cv(){return new Ke(ae.comparator)}const lV={asc:"ASCENDING",desc:"DESCENDING"},uV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cV={and:"AND",or:"OR"};class hV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jp(t,e){return t.useProto3Json||Fh(e)?e:{value:e}}function Yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fV(t,e){return Yc(t,e.toTimestamp())}function lr(t){return ke(!!t),he.fromTimestamp(function(n){const r=Ti(n);return new ht(r.seconds,r.nanos)}(t))}function bg(t,e){return Bp(t,e).canonicalString()}function Bp(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CE(t){const e=Ye.fromString(t);return ke(RE(e)),e}function Up(t,e){return bg(t.databaseId,e.path)}function id(t,e){const n=CE(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(IE(n))}function PE(t,e){return bg(t.databaseId,e)}function dV(t){const e=CE(t);return e.length===4?Ye.emptyPath():IE(e)}function $p(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IE(t){return ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Pv(t,e,n){return{name:Up(t,e),fields:n.value.mapValue.fields}}function pV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(ke(d===void 0||typeof d=="string"),Pt.fromBase64String(d||"")):(ke(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Pt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?W.UNKNOWN:xE(c.code);return new oe(d,c.message||"")}(o);n=new SE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=id(t,r.document.name),s=lr(r.document.updateTime),o=r.document.createTime?lr(r.document.createTime):he.min(),a=new Yt({mapValue:{fields:r.document.fields}}),l=Ft.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new fc(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=id(t,r.document),s=r.readTime?lr(r.readTime):he.min(),o=Ft.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=id(t,r.document),s=r.removedTargetIds||[];n=new fc([],s,i,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new rV(i,s),a=r.targetId;n=new EE(a,o)}}return n}function mV(t,e){let n;if(e instanceof Kl)n={update:Pv(t,e.key,e.value)};else if(e instanceof TE)n={delete:Up(t,e.key)};else if(e instanceof Ri)n={update:Pv(t,e.key,e.data),updateMask:SV(e.fieldMask)};else{if(!(e instanceof eV))return ue();n={verify:Up(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Cl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Co)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Il)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:fV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue()}(t,e.precondition)),n}function gV(t,e){return t&&t.length>0?(ke(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?lr(i.updateTime):lr(s);return o.isEqual(he.min())&&(o=lr(s)),new Y2(o,i.transformResults||[])}(n,e))):[]}function yV(t,e){return{documents:[PE(t,e.path)]}}function _V(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PE(t,i);const s=function(c){if(c.length!==0)return bE(hr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Ns(f.field),direction:TV(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function vV(t){let e=dV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ke(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(u){const f=kE(u);return f instanceof hr&&iE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(u){return u.map(f=>function(y){return new Xc(Os(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(u){let f;return f=typeof u=="object"?u.value:u,Fh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(u){const f=!!u.before,p=u.values||[];return new Qc(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const f=!u.before,p=u.values||[];return new Qc(p,f)}(n.endAt)),L2(e,i,o,s,a,"F",l,c)}function wV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Os(n.unaryFilter.field);return ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Os(n.unaryFilter.field);return ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Os(n.unaryFilter.field);return ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Os(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return ut.create(Os(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hr.create(n.compositeFilter.filters.map(r=>kE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function TV(t){return lV[t]}function xV(t){return uV[t]}function EV(t){return cV[t]}function Ns(t){return{fieldPath:t.canonicalString()}}function Os(t){return xt.fromServerFormat(t.fieldPath)}function bE(t){return t instanceof ut?function(n){if(n.op==="=="){if(dv(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NAN"}};if(fv(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dv(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NAN"}};if(fv(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(n.field),op:xV(n.op),value:n.value}}}(t):t instanceof hr?function(n){const r=n.getFilters().map(i=>bE(i));return r.length===1?r[0]:{compositeFilter:{op:EV(n.op),filters:r}}}(t):ue()}function SV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,r,i,s=he.min(),o=he.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.ct=e}}function CV(t){const e=vV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.un=new IV}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(wi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class IV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new St(Ye.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Po(0)}static kn(){return new Po(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.changes=new Ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ga(r.mutation,i,gn.empty(),ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=Zi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ia();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Rr();const o=qa(),a=function(){return qa()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Ri)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ga(d.mutation,c,d.mutation.getFieldMask(),ht.now())):o.set(c.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var u;return a.set(c,new bV(d,(u=o.get(c))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(e,n){const r=qa();let i=new Ke((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||gn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const u=(i.get(a.batchId)||ge()).add(l);i=i.insert(a.batchId,u)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,u=fE();d.forEach(f=>{if(!s.has(f)){const p=vE(n.get(f),r.get(f));p!==null&&u.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,u))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):j2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Zi());let a=-1,l=s;return o.next(c=>U.forEach(c,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ge())).next(d=>({batchId:a,changes:hE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Ia();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ia();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(u,f){return new Lh(f,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((u,f)=>{o=o.insert(u,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Ft.newInvalidDocument(d)))});let a=Ia();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Ga(d.mutation,c,gn.empty(),ht.now()),Bh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lr(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:CV(i.bundledQuery),readTime:lr(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.overlays=new Ke(ae.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Zi(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Zi(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return U.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nV(n,r));let s=this.Ir.get(n);s===void 0&&(s=ge(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.Tr=new St(dt.Er),this.dr=new St(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new Ye([])),r=new dt(n,e),i=new dt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new Ye([])),r=new dt(n,e),i=new dt(n,e+1);let s=ge();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||Ce(e.wr,n.wr)}static Ar(e,n){return Ce(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(dt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),i=new dt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ce);return n.forEach(i=>{const s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new dt(new ae(s),0);let a=new St(Ce);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ke(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.Mr=e,this.docs=function(){return new Ke(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=Rr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ft.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rr();const o=n.path,a=new ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||v2(_2(d),r)<=0||(i.has(d.key)||Bh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ue()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FV(this)}getSize(e){return U.resolve(this.size)}}class FV extends kV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.persistence=e,this.Nr=new Ho(n=>Eg(n),Sg),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rg,this.targetCount=0,this.kr=Po.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Po(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vg(0),this.Kr=!1,this.Kr=!0,this.$r=new DV,this.referenceDelegate=e(this),this.Ur=new LV(this),this.indexManager=new PV,this.remoteDocumentCache=function(i){return new OV(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new AV(n),this.Gr=new VV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new NV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new BV(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BV extends T2{constructor(e){super(),this.currentSequenceNumber=e}}class Vg{constructor(e){this.persistence=e,this.Jr=new Rg,this.Yr=null}static Zr(e){return new Vg(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=ae.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,he.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Mg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qb()?8:x2(Wb())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new UV;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(va()<=Ee.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(va()<=Ee.DEBUG&&ee("QueryEngine","Query:",Ds(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(va()<=Ee.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(n))):U.resolve())}Yi(e,n){if(yv(n))return U.resolve(null);let r=or(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lp(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Lp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return yv(n)||i.isEqual(he.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?U.resolve(null):(va()<=Ee.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ds(n)),this.rs(e,o,n,y2(i,-1)).next(a=>a))})}ts(e,n){let r=new St(uE(e));return n.forEach((i,s)=>{Bh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return va()<=Ee.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,wi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ke(Ce),this._s=new Ho(s=>Eg(s),Sg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WV(t,e,n,r){return new zV(t,e,n,r)}async function VE(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ge();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function HV(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const u=c.batch,f=u.keys();let p=U.resolve();return f.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(m=>{const w=c.docVersions.get(y);ke(w!==null),m.version.compareTo(w)<0&&(u.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),d.addEntry(m)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ME(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qV(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,u)=>{const f=i.get(u);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,u).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,u)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(u)!==null?p=p.withResumeToken(Pt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(u,p),function(m,w,_){return m.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,d)&&a.push(n.Ur.updateTargetData(s,p))});let l=Rr(),c=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(GV(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(he.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(u=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function GV(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function KV(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QV(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function zp(t,e,n){const r=fe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Iv(t,e,n){const r=fe(t);let i=he.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const u=fe(l),f=u._s.get(d);return f!==void 0?U.resolve(u.os.get(f)):u.Ur.getTargetData(c,d)}(r,o,or(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:he.min(),n?s:ge())).next(a=>(XV(r,U2(e),a),{documents:a,Ts:s})))}function XV(t,e,n){let r=t.us.get(e)||he.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class kv{constructor(){this.activeTargetIds=G2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YV{constructor(){this.so=new kv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu=null;function sd(){return zu===null?zu=function(){return 268435456+Math.round(2147483648*Math.random())}():zu++,"0x"+zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class tM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=sd(),l=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw xo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=JV[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=sd();return new Promise((o,a)=>{const l=new qx;l.setWithCredentials(!0),l.listenOnce(Gx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case uc.NO_ERROR:const d=l.getResponseJson();ee(Vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case uc.TIMEOUT:ee(Vt,`RPC '${e}' ${s} timed out`),a(new oe(W.DEADLINE_EXCEEDED,"Request time out"));break;case uc.HTTP_ERROR:const u=l.getStatus();if(ee(Vt,`RPC '${e}' ${s} failed with status:`,u,"response text:",l.getResponseText()),u>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const y=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(_)>=0?_:W.UNKNOWN}(p.status);a(new oe(y,p.message))}else a(new oe(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new oe(W.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{ee(Vt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(Vt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=sd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xx(),a=Qx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");ee(Vt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const u=o.createWebChannel(d,l);let f=!1,p=!1;const y=new eM({Io:w=>{p?ee(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(ee(Vt,`Opening RPC '${e}' stream ${i} transport.`),u.open(),f=!0),ee(Vt,`RPC '${e}' stream ${i} sending:`,w),u.send(w))},To:()=>u.close()}),m=(w,_,v)=>{w.listen(_,x=>{try{v(x)}catch(P){setTimeout(()=>{throw P},0)}})};return m(u,Pa.EventType.OPEN,()=>{p||(ee(Vt,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),m(u,Pa.EventType.CLOSE,()=>{p||(p=!0,ee(Vt,`RPC '${e}' stream ${i} transport closed`),y.So())}),m(u,Pa.EventType.ERROR,w=>{p||(p=!0,xo(Vt,`RPC '${e}' stream ${i} transport errored:`,w),y.So(new oe(W.UNAVAILABLE,"The operation could not be completed")))}),m(u,Pa.EventType.MESSAGE,w=>{var _;if(!p){const v=w.data[0];ke(!!v);const x=v,P=x.error||((_=x[0])===null||_===void 0?void 0:_.error);if(P){ee(Vt,`RPC '${e}' stream ${i} received error:`,P);const R=P.status;let O=function(A){const I=rt[A];if(I!==void 0)return xE(I)}(R),C=P.message;O===void 0&&(O=W.INTERNAL,C="Unknown error status: "+R+" with message "+P.message),p=!0,y.So(new oe(O,C)),u.close()}else ee(Vt,`RPC '${e}' stream ${i} received:`,v),y.bo(v)}}),m(a,Kx.STAT_EVENT,w=>{w.stat===Mp.PROXY?ee(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===Mp.NOPROXY&&ee(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){return new hV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new DE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new oe(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nM extends NE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pV(this.serializer,e),r=function(s){if(!("targetChange"in s))return he.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?lr(o.readTime):he.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=$p(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Fp(l)?{documents:yV(s,l)}:{query:_V(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AE(s,o.resumeToken);const c=jp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=Yc(s,o.snapshotVersion.toTimestamp());const c=jp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=wV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=$p(this.serializer),n.removeTarget=e,this.a_(n)}}class rM extends NE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gV(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=$p(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mV(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Bp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(W.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Bp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(br(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ts(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.L_.add(4),await Xl(c),c.q_.set("Unknown"),c.L_.delete(4),await Hh(c)}(this))})}),this.q_=new sM(r,i)}}async function Hh(t){if(Ts(t))for(const e of t.B_)await e(!0)}async function Xl(t){for(const e of t.B_)await e(!1)}function OE(t,e){const n=fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fg(n)?Og(n):qo(n).r_()&&Ng(n,e))}function Dg(t,e){const n=fe(t),r=qo(n);n.N_.delete(e),r.r_()&&FE(n,e),n.N_.size===0&&(r.r_()?r.o_():Ts(n)&&n.q_.set("Unknown"))}function Ng(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(t).A_(e)}function FE(t,e){t.Q_.xe(e),qo(t).R_(e)}function Og(t){t.Q_=new aV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qo(t).start(),t.q_.v_()}function Fg(t){return Ts(t)&&!qo(t).n_()&&t.N_.size>0}function Ts(t){return fe(t).L_.size===0}function LE(t){t.Q_=void 0}async function aM(t){t.q_.set("Online")}async function lM(t){t.N_.forEach((e,n)=>{Ng(t,e)})}async function uM(t,e){LE(t),Fg(t)?(t.q_.M_(e),Og(t)):t.q_.set("Unknown")}async function cM(t,e,n){if(t.q_.set("Online"),e instanceof SE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zc(t,r)}else if(e instanceof fc?t.Q_.Ke(e):e instanceof EE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(he.min()))try{const r=await ME(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Pt.EMPTY_BYTE_STRING,d.snapshotVersion)),FE(s,l);const u=new Jr(d.target,l,c,d.sequenceNumber);Ng(s,u)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Zc(t,r)}}async function Zc(t,e,n){if(!Gl(e))throw e;t.L_.add(1),await Xl(t),t.q_.set("Offline"),n||(n=()=>ME(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Hh(t)})}function jE(t,e){return e().catch(n=>Zc(t,n,e))}async function qh(t){const e=fe(t),n=xi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hM(e);)try{const i=await KV(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,fM(e,i)}catch(i){await Zc(e,i)}BE(e)&&UE(e)}function hM(t){return Ts(t)&&t.O_.length<10}function fM(t,e){t.O_.push(e);const n=xi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function BE(t){return Ts(t)&&!xi(t).n_()&&t.O_.length>0}function UE(t){xi(t).start()}async function dM(t){xi(t).p_()}async function pM(t){const e=xi(t);for(const n of t.O_)e.m_(n.mutations)}async function mM(t,e,n){const r=t.O_.shift(),i=Ig.from(r,e,n);await jE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qh(t)}async function gM(t,e){e&&xi(t).V_&&await async function(r,i){if(function(o){return iV(o)&&o!==W.ABORTED}(i.code)){const s=r.O_.shift();xi(r).s_(),await jE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await qh(r)}}(t,e),BE(t)&&UE(t)}async function Rv(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Ts(n);n.L_.add(3),await Xl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Hh(n)}async function yM(t,e){const n=fe(t);e?(n.L_.delete(2),await Hh(n)):e||(n.L_.add(2),await Xl(n),n.q_.set("Unknown"))}function qo(t){return t.K_||(t.K_=function(n,r,i){const s=fe(n);return s.w_(),new nM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:aM.bind(null,t),Ro:lM.bind(null,t),mo:uM.bind(null,t),d_:cM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Fg(t)?Og(t):t.q_.set("Unknown")):(await t.K_.stop(),LE(t))})),t.K_}function xi(t){return t.U_||(t.U_=function(n,r,i){const s=fe(n);return s.w_(),new rM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dM.bind(null,t),mo:gM.bind(null,t),f_:pM.bind(null,t),g_:mM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qh(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Lg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jg(t,e){if(br("AsyncQueue",`${e}: ${t}`),Gl(t))return new oe(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Ia(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.W_=new Ke(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Io{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Io(e,n,co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vM{constructor(){this.queries=Mv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=Mv(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new oe(W.ABORTED,"Firestore shutting down"))}}function Mv(){return new Ho(t=>lE(t),jh)}async function wM(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _M,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=jg(o,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Bg(n)}async function TM(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xM(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Bg(n)}function EM(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Bg(t){t.Y_.forEach(e=>{e.next()})}var Wp,Dv;(Dv=Wp||(Wp={})).ea="default",Dv.Cache="cache";class SM{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.key=e}}class zE{constructor(e){this.key=e}}class AM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=uE(e),this.Ra=new co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Vv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,u)=>{const f=i.get(d),p=Bh(this.query,u)?u:null,y=!!f&&this.mutatedKeys.has(f.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;f&&p?f.data.isEqual(p.data)?y!==m&&(r.track({type:3,doc:p}),w=!0):this.ga(f,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),s=m?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,u)=>function(p,y){const m=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return m(p)-m(y)}(d.type,u.type)||this.Aa(d.doc,u.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Io(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new zE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new $E(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Io.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PM{constructor(e){this.key=e,this.va=!1}}class IM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ho(a=>lE(a),jh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(ae.comparator),this.Na=new Map,this.La=new Rg,this.Ba={},this.ka=new Map,this.qa=Po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kM(t,e,n=!0){const r=QE(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await WE(r,e,n,!0),i}async function bM(t,e){const n=QE(t);await WE(n,e,!0,!1)}async function WE(t,e,n,r){const i=await QV(t.localStore,or(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await RM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&OE(t.remoteStore,i),a}async function RM(t,e,n,r,i){t.Ka=(u,f,p)=>async function(m,w,_,v){let x=w.view.ma(_);x.ns&&(x=await Iv(m.localStore,w.query,!1).then(({documents:C})=>w.view.ma(C,x)));const P=v&&v.targetChanges.get(w.targetId),R=v&&v.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(x,m.isPrimaryClient,P,R);return Ov(m,w.targetId,O.wa),O.snapshot}(t,u,f,p);const s=await Iv(t.localStore,e,!0),o=new AM(e,s.Ts),a=o.ma(s.documents),l=Ql.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Ov(t,n,c.wa);const d=new CM(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function VM(t,e,n){const r=fe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Dg(r.remoteStore,i.targetId),Hp(r,i.targetId)}).catch(ql)):(Hp(r,i.targetId),await zp(r.localStore,i.targetId,!0))}async function MM(t,e){const n=fe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dg(n.remoteStore,r.targetId))}async function DM(t,e,n){const r=UM(t);try{const i=await function(o,a){const l=fe(o),c=ht.now(),d=a.reduce((p,y)=>p.add(y.key),ge());let u,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Rr(),m=ge();return l.cs.getEntries(p,d).next(w=>{y=w,y.forEach((_,v)=>{v.isValidDocument()||(m=m.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(w=>{u=w;const _=[];for(const v of a){const x=J2(v,u.get(v.key).overlayedDocument);x!=null&&_.push(new Ri(v.key,x,tE(x.value.mapValue),ar.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(w=>{f=w;const _=w.applyToLocalDocumentSet(u,m);return l.documentOverlayCache.saveOverlays(p,w.batchId,_)})}).then(()=>({batchId:f.batchId,changes:hE(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ke(Ce)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Yl(r,i.changes),await qh(r.remoteStore)}catch(i){const s=jg(i,"Failed to persist write");n.reject(s)}}async function HE(t,e){const n=fe(t);try{const r=await qV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ke(o.va):i.removedDocuments.size>0&&(ke(o.va),o.va=!1))}),await Yl(n,r,e)}catch(r){await ql(r)}}function Nv(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,u)=>{for(const f of u.j_)f.Z_(a)&&(c=!0)}),c&&Bg(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NM(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ke(ae.comparator);o=o.insert(s,Ft.newNoDocument(s,he.min()));const a=ge().add(s),l=new zh(he.min(),new Map,new Ke(Ce),o,a);await HE(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ug(r)}else await zp(r.localStore,e,!1).then(()=>Hp(r,e,n)).catch(ql)}async function OM(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await HV(n.localStore,e);GE(n,r,null),qE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yl(n,i)}catch(i){await ql(i)}}async function FM(t,e,n){const r=fe(t);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(u=>(ke(u!==null),d=u.keys(),l.mutationQueue.removeMutationBatch(c,u))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);GE(r,e,n),qE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yl(r,i)}catch(i){await ql(i)}}function qE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function GE(t,e,n){const r=fe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Hp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||KE(t,r)})}function KE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ug(t))}function Ov(t,e,n){for(const r of n)r instanceof $E?(t.La.addReference(r.key,e),LM(t,r)):r instanceof zE?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||KE(t,r.key)):ue()}function LM(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ug(t))}function Ug(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(Ye.fromString(e)),r=t.qa.next();t.Na.set(r,new PM(n)),t.Oa=t.Oa.insert(n,r),OE(t.remoteStore,new Jr(or(Ag(n.path)),r,"TargetPurposeLimboResolution",vg.oe))}}async function Yl(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const u=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(c){i.push(c);const u=Mg.Wi(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=fe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>U.forEach(c,f=>U.forEach(f.$i,p=>d.persistence.referenceDelegate.addReference(u,f.targetId,p)).next(()=>U.forEach(f.Ui,p=>d.persistence.referenceDelegate.removeReference(u,f.targetId,p)))))}catch(u){if(!Gl(u))throw u;ee("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const f=u.targetId;if(!u.fromCache){const p=d.os.get(f),y=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,m)}}}(r.localStore,s))}async function jM(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await VE(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new oe(W.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yl(n,r.hs)}}function BM(t,e){const n=fe(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function QE(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NM.bind(null,e),e.Ca.d_=xM.bind(null,e.eventManager),e.Ca.$a=EM.bind(null,e.eventManager),e}function UM(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FM.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return WV(this.persistence,new $V,e.initialUser,this.serializer)}Ga(e){return new jV(Vg.Zr,this.serializer)}Wa(e){return new YV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class qp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jM.bind(null,this.syncEngine),await yM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vM}()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),r=function(s){return new tM(s)}(e.databaseInfo);return function(s,o,a,l){return new iM(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new oM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Nv(this.syncEngine,n,0),function(){return bv.D()?new bv:new ZV}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const u=new IM(i,s,o,a,l,c);return d&&(u.Qa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Xl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}qp.provider={build:()=>new qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=Zx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ad(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WM(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Rv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Rv(e.remoteStore,i)),t._onlineComponents=e}async function WM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await ad(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await ad(t,new Jc)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await ad(t,new Jc);return t._offlineComponents}async function XE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Fv(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Fv(t,new qp))),t._onlineComponents}function HM(t){return XE(t).then(e=>e.syncEngine)}async function Lv(t){const e=await XE(t),n=e.eventManager;return n.onListen=kM.bind(null,e.syncEngine),n.onUnlisten=VM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MM.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t,e,n){if(!n)throw new oe(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GM(t,e,n,r){if(e===!0&&r===!0)throw new oe(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bv(t){if(!ae.isDocumentKey(t))throw new oe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function di(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$g(t);throw new oe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new l2;switch(r.type){case"firstParty":return new f2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jv.get(n);r&&(ee("ComponentProvider","Removing Datastore"),jv.delete(n),r.terminate())}(this),Promise.resolve()}}function KM(t,e,n,r={}){var i;const s=(t=di(t,zg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Nt.MOCK_USER;else{a=zb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new oe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Nt(c)}t._authCredentials=new u2(new Yx(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gh(this.firestore,e,this._query)}}class wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class kl extends Gh{constructor(e,n,r){super(e,n,Ag(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new ae(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function Te(t,e,...n){if(t=vi(t),arguments.length===1&&(e=Zx.newId()),qM("doc","path",e),t instanceof zg){const r=Ye.fromString(e,...n);return Bv(r),new wn(t,null,new ae(r))}{if(!(t instanceof wn||t instanceof kl))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return Bv(r),new wn(t.firestore,t instanceof kl?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new DE(this,"async_queue_retry"),this.Vu=()=>{const r=od();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=od();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=od();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new is;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw br("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Lg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function zv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class bl extends zg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $v,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $v(e),this._firestoreClient=void 0,await e}}}function QM(t,e){const n=typeof t=="object"?t:$x(),r=typeof t=="string"?t:"(default)",i=KR(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Ub("firestore");s&&KM(i,...s)}return i}function ZE(t){if(t._terminated)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XM(t),t._firestoreClient}function XM(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new A2(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,YE(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zM(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ko(Pt.fromBase64String(e))}catch(n){throw new oe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ko(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=/^__.*__$/;class ZM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(e,this.data,n,this.fieldTransforms)}}class JE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Qh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return eh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eS(this.Cu)&&YM.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class JM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wh(e)}Qu(e,n,r,i=!1){return new Qh({Cu:e,methodName:n,qu:r,path:xt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tS(t){const e=t._freezeSettings(),n=Wh(t._databaseId);return new JM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eD(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Qg("Data must be an object, but it was:",o,r);const a=nS(r,o);let l,c;if(s.merge)l=new gn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const u of s.mergeFields){const f=Gp(e,u,n);if(!o.contains(f))throw new oe(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);iS(d,f)||d.push(f)}l=new gn(d),c=o.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,c=o.fieldTransforms;return new ZM(new Yt(a),l,c)}class Xh extends Go{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function tD(t,e,n){return new Qh({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qg extends Go{_toFieldTransform(e){return new Pg(e.path,new Cl)}isEqual(e){return e instanceof qg}}class Gg extends Go{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=tD(this,e,!0),r=this.Ku.map(s=>Zl(s,n)),i=new Co(r);return new Pg(e.path,i)}isEqual(e){return e instanceof Gg&&qc(this.Ku,e.Ku)}}class Kg extends Go{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Il(e.serializer,pE(e.serializer,this.$u));return new Pg(e.path,n)}isEqual(e){return e instanceof Kg&&this.$u===e.$u}}function nD(t,e,n,r){const i=t.Qu(1,e,n);Qg("Data must be an object, but it was:",i,r);const s=[],o=Yt.empty();ws(r,(l,c)=>{const d=Xg(e,l,n);c=vi(c);const u=i.Nu(d);if(c instanceof Xh)s.push(d);else{const f=Zl(c,u);f!=null&&(s.push(d),o.set(d,f))}});const a=new gn(s);return new JE(o,a,i.fieldTransforms)}function rD(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Gp(e,r,n)],l=[i];if(s.length%2!=0)throw new oe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Gp(e,s[f])),l.push(s[f+1]);const c=[],d=Yt.empty();for(let f=a.length-1;f>=0;--f)if(!iS(c,a[f])){const p=a[f];let y=l[f];y=vi(y);const m=o.Nu(p);if(y instanceof Xh)c.push(p);else{const w=Zl(y,m);w!=null&&(c.push(p),d.set(p,w))}}const u=new gn(c);return new JE(d,u,o.fieldTransforms)}function Zl(t,e){if(rS(t=vi(t)))return Qg("Unsupported field value:",e,t),nS(t,e);if(t instanceof Go)return function(r,i){if(!eS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Zl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=vi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pE(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ht.fromDate(r);return{timestampValue:Yc(i.serializer,s)}}if(r instanceof ht){const s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yc(i.serializer,s)}}if(r instanceof Wg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ko)return{bytesValue:AE(i.serializer,r._byteString)};if(r instanceof wn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Cg(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${$g(r)}`)}(t,e)}function nS(t,e){const n={};return Jx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(t,(r,i)=>{const s=Zl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function rS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof Wg||t instanceof ko||t instanceof wn||t instanceof Go||t instanceof Hg)}function Qg(t,e,n){if(!rS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=$g(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Gp(t,e,n){if((e=vi(e))instanceof Kh)return e._internalPath;if(typeof e=="string")return Xg(t,e);throw eh("Field path arguments must be of type string or ",t,!1,void 0,n)}const iD=new RegExp("[~\\*/\\[\\]]");function Xg(t,e,n){if(e.search(iD)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kh(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function eh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new oe(W.INVALID_ARGUMENT,a+t+l)}function iS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sD extends sS{data(){return super.data()}}function oS(t,e){return typeof e=="string"?Xg(t,e):e instanceof Kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aD{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ws(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Je(o.doubleValue));return new Hg(s)}convertGeoPoint(e){return new Wg(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const n=Ti(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);ke(RE(r));const i=new Sl(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aS extends sS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class dc extends aS{data(e={}){return super.data(e)}}class uD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ba(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new dc(this._firestore,this._userDataWriter,r.key,r,new ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new dc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ba(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new dc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ba(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:cD(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}class lS extends aD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function Mt(t,e,n){t=di(t,wn);const r=di(t.firestore,bl),i=lD(t.converter,e);return uS(r,[eD(tS(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ar.none())])}function bo(t,e,n,...r){t=di(t,wn);const i=di(t.firestore,bl),s=tS(i);let o;return o=typeof(e=vi(e))=="string"||e instanceof Kh?rD(s,"updateDoc",t._key,e,n,r):nD(s,"updateDoc",t._key,e),uS(i,[o.toMutation(t._key,ar.exists(!0))])}function Un(t,...e){var n,r,i;t=vi(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(zv(e[o])){const u=e[o];e[o]=(n=u.next)===null||n===void 0?void 0:n.bind(u),e[o+1]=(r=u.error)===null||r===void 0?void 0:r.bind(u),e[o+2]=(i=u.complete)===null||i===void 0?void 0:i.bind(u)}let l,c,d;if(t instanceof wn)c=di(t.firestore,bl),d=Ag(t._key.path),l={next:u=>{e[o]&&e[o](hD(c,t,u))},error:e[o+1],complete:e[o+2]};else{const u=di(t,Gh);c=di(u.firestore,bl),d=u._query;const f=new lS(c);l={next:p=>{e[o]&&e[o](new uD(c,f,u,p))},error:e[o+1],complete:e[o+2]},oD(t._query)}return function(f,p,y,m){const w=new $M(m),_=new SM(p,w,y);return f.asyncQueue.enqueueAndForget(async()=>wM(await Lv(f),_)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>TM(await Lv(f),_))}}(ZE(c),d,a,l)}function uS(t,e){return function(r,i){const s=new is;return r.asyncQueue.enqueueAndForget(async()=>DM(await HM(r),i,s)),s.promise}(ZE(t),e)}function hD(t,e,n){const r=n.docs.get(e._key),i=new lS(t);return new aS(t,i,e._key,r,new ba(n.hasPendingWrites,n.fromCache),e.converter)}function fD(){return new qg("serverTimestamp")}function Yg(...t){return new Gg("arrayUnion",t)}function Wu(t){return new Kg("increment",t)}(function(e,n=!0){(function(i){Wo=i})(YR),Gc(new vl("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new bl(new c2(r.getProvider("auth-internal")),new p2(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),uo(av,"4.7.3",e),uo(av,"4.7.3","esm2017")})();var dD="firebase",pD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo(dD,pD,"app");const cS={apiKey:"AIzaSyCtoiu476Nd765FSsspVzIgl4hOqjwL-TU",authDomain:"misadventuring-live.firebaseapp.com",projectId:"misadventuring-live",storageBucket:"misadventuring-live.firebasestorage.app",messagingSenderId:"567713213764",appId:"1:567713213764:web:496b98cc82db211be77b11",measurementId:"G-4KLYEVJ184"},mD=ZR().length===0?Ux(cS):$x(),xe=QM(mD);console.log(" Firebase ready - project:",cS.projectId);window.__firebaseTestRan||(window.__firebaseTestRan=!0,setTimeout(async()=>{console.log(" Testing Firebase connection...");try{const t=Te(xe,"test","connection-test");await Mt(t,{timestamp:new Date().toISOString(),message:"Connection test from browser"}),console.log(" Firebase connection SUCCESS!")}catch(t){const e=t;console.error(" Firebase connection FAILED:",e.code,e.message),console.error("Full error:",t)}},2e3));var $r={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var f=this||n;if(u=parseFloat(u),f.ctx||d(),typeof u<"u"&&u>=0&&u<=1){if(f._volume=u,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var p=0;p<f._howls.length;p++)if(!f._howls[p]._webAudio)for(var y=f._howls[p]._getSoundIds(),m=0;m<y.length;m++){var w=f._howls[p]._soundById(y[m]);w&&w._node&&(w._node.volume=w._volume*u)}return f}return f._volume},mute:function(u){var f=this||n;f.ctx||d(),f._muted=u,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(u?0:f._volume,n.ctx.currentTime);for(var p=0;p<f._howls.length;p++)if(!f._howls[p]._webAudio)for(var y=f._howls[p]._getSoundIds(),m=0;m<y.length;m++){var w=f._howls[p]._soundById(y[m]);w&&w._node&&(w._node.muted=u?!0:w._muted)}return f},stop:function(){for(var u=this||n,f=0;f<u._howls.length;f++)u._howls[f].stop();return u},unload:function(){for(var u=this||n,f=u._howls.length-1;f>=0;f--)u._howls[f].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,d()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var f=new Audio;typeof f.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var f=new Audio;f.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,f=null;try{f=typeof Audio<"u"?new Audio:null}catch{return u}if(!f||typeof f.canPlayType!="function")return u;var p=f.canPlayType("audio/mpeg;").replace(/^no$/,""),y=u._navigator?u._navigator.userAgent:"",m=y.match(/OPR\/(\d+)/g),w=m&&parseInt(m[0].split("/")[1],10)<33,_=y.indexOf("Safari")!==-1&&y.indexOf("Chrome")===-1,v=y.match(/Version\/(.*?) /),x=_&&v&&parseInt(v[1],10)<15;return u._codecs={mp3:!!(!w&&(p||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var f=function(p){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var y=new Audio;y._unlocked=!0,u._releaseHtml5Audio(y)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var w=u._howls[m]._getSoundIds(),_=0;_<w.length;_++){var v=u._howls[m]._soundById(w[_]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var P=0;P<u._howls.length;P++)u._howls[P]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise<"u"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var f=this||n;return u._unlocked&&f._html5AudioPool.push(u),f},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var f=0;f<u._howls.length;f++)if(u._howls[f]._webAudio){for(var p=0;p<u._howls[f]._sounds.length;p++)if(!u._howls[f]._sounds[p]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var y=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(y,y)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var f=0;f<u._howls.length;f++)u._howls[f]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,r=function(u){var f=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(u)};r.prototype={init:function(u){var f=this;return n.ctx||d(),f._autoplay=u.autoplay||!1,f._format=typeof u.format!="string"?u.format:[u.format],f._html5=u.html5||!1,f._muted=u.mute||!1,f._loop=u.loop||!1,f._pool=u.pool||5,f._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,f._rate=u.rate||1,f._sprite=u.sprite||{},f._src=typeof u.src!="string"?u.src:[u.src],f._volume=u.volume!==void 0?u.volume:1,f._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=u.onend?[{fn:u.onend}]:[],f._onfade=u.onfade?[{fn:u.onfade}]:[],f._onload=u.onload?[{fn:u.onload}]:[],f._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],f._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],f._onpause=u.onpause?[{fn:u.onpause}]:[],f._onplay=u.onplay?[{fn:u.onplay}]:[],f._onstop=u.onstop?[{fn:u.onstop}]:[],f._onmute=u.onmute?[{fn:u.onmute}]:[],f._onvolume=u.onvolume?[{fn:u.onvolume}]:[],f._onrate=u.onrate?[{fn:u.onrate}]:[],f._onseek=u.onseek?[{fn:u.onseek}]:[],f._onunlock=u.onunlock?[{fn:u.onunlock}]:[],f._onresume=[],f._webAudio=n.usingWebAudio&&!f._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var u=this,f=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var p=0;p<u._src.length;p++){var y,m;if(u._format&&u._format[p])y=u._format[p];else{if(m=u._src[p],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}y=/^data:audio\/([^;,]+);/i.exec(m),y||(y=/\.([^.]+)$/.exec(m.split("?",1)[0])),y&&(y=y[1].toLowerCase())}if(y||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),y&&n.codecs(y)){f=u._src[p];break}}if(!f){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=f,u._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new i(u),u._webAudio&&o(u),u},play:function(u,f){var p=this,y=null;if(typeof u=="number")y=u,u=null;else{if(typeof u=="string"&&p._state==="loaded"&&!p._sprite[u])return null;if(typeof u>"u"&&(u="__default",!p._playLock)){for(var m=0,w=0;w<p._sounds.length;w++)p._sounds[w]._paused&&!p._sounds[w]._ended&&(m++,y=p._sounds[w]._id);m===1?u=null:y=null}}var _=y?p._soundById(y):p._inactiveSound();if(!_)return null;if(y&&!u&&(u=_._sprite||"__default"),p._state!=="loaded"){_._sprite=u,_._ended=!1;var v=_._id;return p._queue.push({event:"play",action:function(){p.play(v)}}),v}if(y&&!_._paused)return f||p._loadQueue("play"),_._id;p._webAudio&&n._autoResume();var x=Math.max(0,_._seek>0?_._seek:p._sprite[u][0]/1e3),P=Math.max(0,(p._sprite[u][0]+p._sprite[u][1])/1e3-x),R=P*1e3/Math.abs(_._rate),O=p._sprite[u][0]/1e3,C=(p._sprite[u][0]+p._sprite[u][1])/1e3;_._sprite=u,_._ended=!1;var S=function(){_._paused=!1,_._seek=x,_._start=O,_._stop=C,_._loop=!!(_._loop||p._sprite[u][2])};if(x>=C){p._ended(_);return}var A=_._node;if(p._webAudio){var I=function(){p._playLock=!1,S(),p._refreshBuffer(_);var q=_._muted||p._muted?0:_._volume;A.gain.setValueAtTime(q,n.ctx.currentTime),_._playStart=n.ctx.currentTime,typeof A.bufferSource.start>"u"?_._loop?A.bufferSource.noteGrainOn(0,x,86400):A.bufferSource.noteGrainOn(0,x,P):_._loop?A.bufferSource.start(0,x,86400):A.bufferSource.start(0,x,P),R!==1/0&&(p._endTimers[_._id]=setTimeout(p._ended.bind(p,_),R)),f||setTimeout(function(){p._emit("play",_._id),p._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?I():(p._playLock=!0,p.once("resume",I),p._clearTimer(_._id))}else{var V=function(){A.currentTime=x,A.muted=_._muted||p._muted||n._muted||A.muted,A.volume=_._volume*n.volume(),A.playbackRate=_._rate;try{var q=A.play();if(q&&typeof Promise<"u"&&(q instanceof Promise||typeof q.then=="function")?(p._playLock=!0,S(),q.then(function(){p._playLock=!1,A._unlocked=!0,f?p._loadQueue():p._emit("play",_._id)}).catch(function(){p._playLock=!1,p._emit("playerror",_._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),_._ended=!0,_._paused=!0})):f||(p._playLock=!1,S(),p._emit("play",_._id)),A.playbackRate=_._rate,A.paused){p._emit("playerror",_._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||_._loop?p._endTimers[_._id]=setTimeout(p._ended.bind(p,_),R):(p._endTimers[_._id]=function(){p._ended(_),A.removeEventListener("ended",p._endTimers[_._id],!1)},A.addEventListener("ended",p._endTimers[_._id],!1))}catch(te){p._emit("playerror",_._id,te)}};A.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(A.src=p._src,A.load());var M=window&&window.ejecta||!A.readyState&&n._navigator.isCocoonJS;if(A.readyState>=3||M)V();else{p._playLock=!0,p._state="loading";var b=function(){p._state="loaded",V(),A.removeEventListener(n._canPlayEvent,b,!1)};A.addEventListener(n._canPlayEvent,b,!1),p._clearTimer(_._id)}}return _._id},pause:function(u){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(u)}}),f;for(var p=f._getSoundIds(u),y=0;y<p.length;y++){f._clearTimer(p[y]);var m=f._soundById(p[y]);if(m&&!m._paused&&(m._seek=f.seek(p[y]),m._rateSeek=0,m._paused=!0,f._stopFade(p[y]),m._node))if(f._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),f._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||f._emit("pause",m?m._id:null)}return f},stop:function(u,f){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(u)}}),p;for(var y=p._getSoundIds(u),m=0;m<y.length;m++){p._clearTimer(y[m]);var w=p._soundById(y[m]);w&&(w._seek=w._start||0,w._rateSeek=0,w._paused=!0,w._ended=!0,p._stopFade(y[m]),w._node&&(p._webAudio?w._node.bufferSource&&(typeof w._node.bufferSource.stop>"u"?w._node.bufferSource.noteOff(0):w._node.bufferSource.stop(0),p._cleanBuffer(w._node)):(!isNaN(w._node.duration)||w._node.duration===1/0)&&(w._node.currentTime=w._start||0,w._node.pause(),w._node.duration===1/0&&p._clearSound(w._node))),f||p._emit("stop",w._id))}return p},mute:function(u,f){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(u,f)}}),p;if(typeof f>"u")if(typeof u=="boolean")p._muted=u;else return p._muted;for(var y=p._getSoundIds(f),m=0;m<y.length;m++){var w=p._soundById(y[m]);w&&(w._muted=u,w._interval&&p._stopFade(w._id),p._webAudio&&w._node?w._node.gain.setValueAtTime(u?0:w._volume,n.ctx.currentTime):w._node&&(w._node.muted=n._muted?!0:u),p._emit("mute",w._id))}return p},volume:function(){var u=this,f=arguments,p,y;if(f.length===0)return u._volume;if(f.length===1||f.length===2&&typeof f[1]>"u"){var m=u._getSoundIds(),w=m.indexOf(f[0]);w>=0?y=parseInt(f[0],10):p=parseFloat(f[0])}else f.length>=2&&(p=parseFloat(f[0]),y=parseInt(f[1],10));var _;if(typeof p<"u"&&p>=0&&p<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,f)}}),u;typeof y>"u"&&(u._volume=p),y=u._getSoundIds(y);for(var v=0;v<y.length;v++)_=u._soundById(y[v]),_&&(_._volume=p,f[2]||u._stopFade(y[v]),u._webAudio&&_._node&&!_._muted?_._node.gain.setValueAtTime(p,n.ctx.currentTime):_._node&&!_._muted&&(_._node.volume=p*n.volume()),u._emit("volume",_._id))}else return _=y?u._soundById(y):u._sounds[0],_?_._volume:0;return u},fade:function(u,f,p,y){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,f,p,y)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),f=Math.min(Math.max(0,parseFloat(f)),1),p=parseFloat(p),m.volume(u,y);for(var w=m._getSoundIds(y),_=0;_<w.length;_++){var v=m._soundById(w[_]);if(v){if(y||m._stopFade(w[_]),m._webAudio&&!v._muted){var x=n.ctx.currentTime,P=x+p/1e3;v._volume=u,v._node.gain.setValueAtTime(u,x),v._node.gain.linearRampToValueAtTime(f,P)}m._startFadeInterval(v,u,f,p,w[_],typeof y>"u")}}return m},_startFadeInterval:function(u,f,p,y,m,w){var _=this,v=f,x=p-f,P=Math.abs(x/.01),R=Math.max(4,P>0?y/P:y),O=Date.now();u._fadeTo=p,u._interval=setInterval(function(){var C=(Date.now()-O)/y;O=Date.now(),v+=x*C,v=Math.round(v*100)/100,x<0?v=Math.max(p,v):v=Math.min(p,v),_._webAudio?u._volume=v:_.volume(v,u._id,!0),w&&(_._volume=v),(p<f&&v<=p||p>f&&v>=p)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,_.volume(p,u._id),_._emit("fade",u._id))},R)},_stopFade:function(u){var f=this,p=f._soundById(u);return p&&p._interval&&(f._webAudio&&p._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(p._interval),p._interval=null,f.volume(p._fadeTo,u),p._fadeTo=null,f._emit("fade",u)),f},loop:function(){var u=this,f=arguments,p,y,m;if(f.length===0)return u._loop;if(f.length===1)if(typeof f[0]=="boolean")p=f[0],u._loop=p;else return m=u._soundById(parseInt(f[0],10)),m?m._loop:!1;else f.length===2&&(p=f[0],y=parseInt(f[1],10));for(var w=u._getSoundIds(y),_=0;_<w.length;_++)m=u._soundById(w[_]),m&&(m._loop=p,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=p,p&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(w[_])&&(u.pause(w[_],!0),u.play(w[_],!0)))));return u},rate:function(){var u=this,f=arguments,p,y;if(f.length===0)y=u._sounds[0]._id;else if(f.length===1){var m=u._getSoundIds(),w=m.indexOf(f[0]);w>=0?y=parseInt(f[0],10):p=parseFloat(f[0])}else f.length===2&&(p=parseFloat(f[0]),y=parseInt(f[1],10));var _;if(typeof p=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,f)}}),u;typeof y>"u"&&(u._rate=p),y=u._getSoundIds(y);for(var v=0;v<y.length;v++)if(_=u._soundById(y[v]),_){u.playing(y[v])&&(_._rateSeek=u.seek(y[v]),_._playStart=u._webAudio?n.ctx.currentTime:_._playStart),_._rate=p,u._webAudio&&_._node&&_._node.bufferSource?_._node.bufferSource.playbackRate.setValueAtTime(p,n.ctx.currentTime):_._node&&(_._node.playbackRate=p);var x=u.seek(y[v]),P=(u._sprite[_._sprite][0]+u._sprite[_._sprite][1])/1e3-x,R=P*1e3/Math.abs(_._rate);(u._endTimers[y[v]]||!_._paused)&&(u._clearTimer(y[v]),u._endTimers[y[v]]=setTimeout(u._ended.bind(u,_),R)),u._emit("rate",_._id)}}else return _=u._soundById(y),_?_._rate:u._rate;return u},seek:function(){var u=this,f=arguments,p,y;if(f.length===0)u._sounds.length&&(y=u._sounds[0]._id);else if(f.length===1){var m=u._getSoundIds(),w=m.indexOf(f[0]);w>=0?y=parseInt(f[0],10):u._sounds.length&&(y=u._sounds[0]._id,p=parseFloat(f[0]))}else f.length===2&&(p=parseFloat(f[0]),y=parseInt(f[1],10));if(typeof y>"u")return 0;if(typeof p=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,f)}}),u;var _=u._soundById(y);if(_)if(typeof p=="number"&&p>=0){var v=u.playing(y);v&&u.pause(y,!0),_._seek=p,_._ended=!1,u._clearTimer(y),!u._webAudio&&_._node&&!isNaN(_._node.duration)&&(_._node.currentTime=p);var x=function(){v&&u.play(y,!0),u._emit("seek",y)};if(v&&!u._webAudio){var P=function(){u._playLock?setTimeout(P,0):x()};setTimeout(P,0)}else x()}else if(u._webAudio){var R=u.playing(y)?n.ctx.currentTime-_._playStart:0,O=_._rateSeek?_._rateSeek-_._seek:0;return _._seek+(O+R*Math.abs(_._rate))}else return _._node.currentTime;return u},playing:function(u){var f=this;if(typeof u=="number"){var p=f._soundById(u);return p?!p._paused:!1}for(var y=0;y<f._sounds.length;y++)if(!f._sounds[y]._paused)return!0;return!1},duration:function(u){var f=this,p=f._duration,y=f._soundById(u);return y&&(p=f._sprite[y._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var u=this,f=u._sounds,p=0;p<f.length;p++)f[p]._paused||u.stop(f[p]._id),u._webAudio||(u._clearSound(f[p]._node),f[p]._node.removeEventListener("error",f[p]._errorFn,!1),f[p]._node.removeEventListener(n._canPlayEvent,f[p]._loadFn,!1),f[p]._node.removeEventListener("ended",f[p]._endFn,!1),n._releaseHtml5Audio(f[p]._node)),delete f[p]._node,u._clearTimer(f[p]._id);var y=n._howls.indexOf(u);y>=0&&n._howls.splice(y,1);var m=!0;for(p=0;p<n._howls.length;p++)if(n._howls[p]._src===u._src||u._src.indexOf(n._howls[p]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,f,p,y){var m=this,w=m["_on"+u];return typeof f=="function"&&w.push(y?{id:p,fn:f,once:y}:{id:p,fn:f}),m},off:function(u,f,p){var y=this,m=y["_on"+u],w=0;if(typeof f=="number"&&(p=f,f=null),f||p)for(w=0;w<m.length;w++){var _=p===m[w].id;if(f===m[w].fn&&_||!f&&_){m.splice(w,1);break}}else if(u)y["_on"+u]=[];else{var v=Object.keys(y);for(w=0;w<v.length;w++)v[w].indexOf("_on")===0&&Array.isArray(y[v[w]])&&(y[v[w]]=[])}return y},once:function(u,f,p){var y=this;return y.on(u,f,p,1),y},_emit:function(u,f,p){for(var y=this,m=y["_on"+u],w=m.length-1;w>=0;w--)(!m[w].id||m[w].id===f||u==="load")&&(setTimeout((function(_){_.call(this,f,p)}).bind(y,m[w].fn),0),m[w].once&&y.off(u,m[w].fn,m[w].id));return y._loadQueue(u),y},_loadQueue:function(u){var f=this;if(f._queue.length>0){var p=f._queue[0];p.event===u&&(f._queue.shift(),f._loadQueue()),u||p.action()}return f},_ended:function(u){var f=this,p=u._sprite;if(!f._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(f._ended.bind(f,u),100),f;var y=!!(u._loop||f._sprite[p][2]);if(f._emit("end",u._id),!f._webAudio&&y&&f.stop(u._id,!0).play(u._id),f._webAudio&&y){f._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);f._endTimers[u._id]=setTimeout(f._ended.bind(f,u),m)}return f._webAudio&&!y&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,f._clearTimer(u._id),f._cleanBuffer(u._node),n._autoSuspend()),!f._webAudio&&!y&&f.stop(u._id,!0),f},_clearTimer:function(u){var f=this;if(f._endTimers[u]){if(typeof f._endTimers[u]!="function")clearTimeout(f._endTimers[u]);else{var p=f._soundById(u);p&&p._node&&p._node.removeEventListener("ended",f._endTimers[u],!1)}delete f._endTimers[u]}return f},_soundById:function(u){for(var f=this,p=0;p<f._sounds.length;p++)if(u===f._sounds[p]._id)return f._sounds[p];return null},_inactiveSound:function(){var u=this;u._drain();for(var f=0;f<u._sounds.length;f++)if(u._sounds[f]._ended)return u._sounds[f].reset();return new i(u)},_drain:function(){var u=this,f=u._pool,p=0,y=0;if(!(u._sounds.length<f)){for(y=0;y<u._sounds.length;y++)u._sounds[y]._ended&&p++;for(y=u._sounds.length-1;y>=0;y--){if(p<=f)return;u._sounds[y]._ended&&(u._webAudio&&u._sounds[y]._node&&u._sounds[y]._node.disconnect(0),u._sounds.splice(y,1),p--)}}},_getSoundIds:function(u){var f=this;if(typeof u>"u"){for(var p=[],y=0;y<f._sounds.length;y++)p.push(f._sounds[y]._id);return p}else return[u]},_refreshBuffer:function(u){var f=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=s[f._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),f},_cleanBuffer:function(u){var f=this,p=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!u.bufferSource)return f;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),p))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,f},_clearSound:function(u){var f=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);f||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(u){this._parent=u,this.init()};i.prototype={init:function(){var u=this,f=u._parent;return u._muted=f._muted,u._loop=f._loop,u._volume=f._volume,u._rate=f._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,f._sounds.push(u),u.create(),u},create:function(){var u=this,f=u._parent,p=n._muted||u._muted||u._parent._muted?0:u._volume;return f._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(p,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=f._src,u._node.preload=f._preload===!0?"auto":f._preload,u._node.volume=p*n.volume(),u._node.load()),u},reset:function(){var u=this,f=u._parent;return u._muted=f._muted,u._loop=f._loop,u._volume=f._volume,u._rate=f._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,f=u._parent;f._duration=Math.ceil(u._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,f=u._parent;f._duration===1/0&&(f._duration=Math.ceil(u._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var f=u._src;if(s[f]){u._duration=s[f].duration,c(u);return}if(/^data:[^;]+;base64,/.test(f)){for(var p=atob(f.split(",")[1]),y=new Uint8Array(p.length),m=0;m<p.length;++m)y[m]=p.charCodeAt(m);l(y.buffer,u)}else{var w=new XMLHttpRequest;w.open(u._xhr.method,f,!0),w.withCredentials=u._xhr.withCredentials,w.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(_){w.setRequestHeader(_,u._xhr.headers[_])}),w.onload=function(){var _=(w.status+"")[0];if(_!=="0"&&_!=="2"&&_!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+w.status+".");return}l(w.response,u)},w.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[f],u.load())},a(w)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,f){var p=function(){f._emit("loaderror",null,"Decoding audio data failed.")},y=function(m){m&&f._sounds.length>0?(s[f._src]=m,c(f,m)):p()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(y).catch(p):n.ctx.decodeAudioData(u,y,p)},c=function(u,f){f&&!u._duration&&(u._duration=f.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},d=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),f=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=f?parseInt(f[1],10):null;if(u&&p&&p<9){var y=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!y&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof ca<"u"?(ca.HowlerGlobal=e,ca.Howler=n,ca.Howl=r,ca.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof n=="number")s._pos=[n,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,r,i,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(r=typeof r!="number"?c[1]:r,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,r,i,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,r,i,s,o,a);else return c;return l},Howl.prototype.init=function(n){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(n,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")i._stereo=n,i._pos=[n,0,0];else return i._stereo;for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var l=i._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),i._emit("stereo",l._id);else return l._stereo}return i},Howl.prototype.pos=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,i,s)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof n=="number")o._pos=[n,r,i];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,r,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(n,r,i)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,i,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof n=="number")o._orientation=[n,r,i];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,r,i],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(n,r,i)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,i,s,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),n._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var a=n._getSoundIds(s),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var d=o._panner;d||(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"),d=o._panner),d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel}return n},Sound.prototype.init=function(n){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,n.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})($r);let ld=null;function bn(){return ld||(ld=new AudioContext),ld}const In={votecast:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);const r=e.createOscillator();r.type="sine",r.frequency.setValueAtTime(600,e.currentTime),r.frequency.exponentialRampToValueAtTime(1400,e.currentTime+.05),r.frequency.exponentialRampToValueAtTime(800,e.currentTime+.12);const i=e.createOscillator();i.type="triangle",i.frequency.setValueAtTime(1200,e.currentTime),i.frequency.exponentialRampToValueAtTime(400,e.currentTime+.1),n.gain.setValueAtTime(t*.5,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15),r.connect(n),i.connect(n),r.start(e.currentTime),i.start(e.currentTime),r.stop(e.currentTime+.15),i.stop(e.currentTime+.15)},timerTick:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);const r=e.createOscillator();r.type="square",r.frequency.value=880,n.gain.setValueAtTime(t*.2,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.04),r.connect(n),r.start(e.currentTime),r.stop(e.currentTime+.04)},timerEnd:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);const r=e.createOscillator();r.type="sawtooth",r.frequency.value=220;const i=e.createOscillator();i.frequency.value=15;const s=e.createGain();s.gain.value=40,i.connect(s),s.connect(r.frequency),n.gain.setValueAtTime(t*.4,e.currentTime),n.gain.setValueAtTime(t*.4,e.currentTime+.4),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.6),r.connect(n),i.start(e.currentTime),r.start(e.currentTime),r.stop(e.currentTime+.6),i.stop(e.currentTime+.6)},victory:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination),[523.25,659.25,783.99,1046.5,1318.51].forEach((i,s)=>{const o=e.createOscillator();o.type="triangle",o.frequency.value=i;const a=e.createGain();a.connect(n),a.gain.setValueAtTime(0,e.currentTime+s*.1),a.gain.linearRampToValueAtTime(t*.35,e.currentTime+s*.1+.02),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+s*.1+.4),o.connect(a),o.start(e.currentTime+s*.1),o.stop(e.currentTime+s*.1+.4)})},error:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);const r=e.createOscillator();r.type="sawtooth",r.frequency.value=120,n.gain.setValueAtTime(t*.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.25),r.connect(n),r.start(e.currentTime),r.stop(e.currentTime+.25)},uiClick:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);const r=e.createOscillator();r.type="sine",r.frequency.value=1200,n.gain.setValueAtTime(t*.15,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.03),r.connect(n),r.start(e.currentTime),r.stop(e.currentTime+.03)},whoosh:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);const r=e.createBufferSource(),i=e.sampleRate*.35,s=e.createBuffer(1,i,e.sampleRate),o=s.getChannelData(0);for(let l=0;l<i;l++)o[l]=Math.random()*2-1;r.buffer=s;const a=e.createBiquadFilter();a.type="bandpass",a.frequency.setValueAtTime(400,e.currentTime),a.frequency.exponentialRampToValueAtTime(2500,e.currentTime+.15),a.frequency.exponentialRampToValueAtTime(600,e.currentTime+.35),a.Q.value=.7,n.gain.setValueAtTime(.01,e.currentTime),n.gain.linearRampToValueAtTime(t*.2,e.currentTime+.1),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.35),r.connect(a),a.connect(n),r.start(e.currentTime),r.stop(e.currentTime+.35)},diceRoll:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);for(let r=0;r<8;r++){const i=r*.05+Math.random()*.03,s=e.createGain();s.connect(n);const o=e.createOscillator();o.type="square",o.frequency.value=800+Math.random()*600,s.gain.setValueAtTime(t*.15,e.currentTime+i),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+i+.02),o.connect(s),o.start(e.currentTime+i),o.stop(e.currentTime+i+.02)}},diceImpact:t=>{const e=bn();if(e.state==="suspended")return;const n=e.createGain();n.connect(e.destination);const r=e.createOscillator();r.type="sine",r.frequency.setValueAtTime(200,e.currentTime),r.frequency.exponentialRampToValueAtTime(50,e.currentTime+.1);const i=e.createBufferSource(),s=e.sampleRate*.05,o=e.createBuffer(1,s,e.sampleRate),a=o.getChannelData(0);for(let c=0;c<s;c++)a[c]=Math.random()*2-1;i.buffer=o;const l=e.createGain();l.connect(n),l.gain.setValueAtTime(t*.2,e.currentTime),l.gain.exponentialRampToValueAtTime(.01,e.currentTime+.05),n.gain.setValueAtTime(t*.5,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15),r.connect(n),i.connect(l),r.start(e.currentTime),i.start(e.currentTime),r.stop(e.currentTime+.15),i.stop(e.currentTime+.05)},countdown:(t,e="low")=>{const n=bn();if(n.state==="suspended")return;const r=n.createGain();r.connect(n.destination);const i=e==="high"?880:440,s=n.createOscillator();s.type="triangle",s.frequency.value=i,r.gain.setValueAtTime(t*.3,n.currentTime),r.gain.exponentialRampToValueAtTime(.01,n.currentTime+.15),s.connect(r),s.start(n.currentTime),s.stop(n.currentTime+.15)}},Wv={"tmp-base":{spriteUrl:null,sprites:{votecast:[0,200],timerTick:[200,100],timerEnd:[300,600],victory:[900,800],error:[1700,300],uiClick:[2e3,100],whoosh:[2100,350],diceRoll:[2450,500],diceImpact:[2950,200]},ambientUrl:null,battleMusicUrl:null},"soggy-bottom-pirates":{spriteUrl:null,sprites:{votecast:[0,300],timerTick:[300,150],timerEnd:[450,800],victory:[1250,1200],error:[2450,400],uiClick:[2850,100],whoosh:[2950,400],diceRoll:[3350,600],diceImpact:[3950,300]},ambientUrl:null,battleMusicUrl:null},"neon-nightmares":{spriteUrl:null,sprites:{votecast:[0,250],timerTick:[250,100],timerEnd:[350,700],victory:[1050,1e3],error:[2050,400],uiClick:[2450,80],whoosh:[2530,350],diceRoll:[2880,500],diceImpact:[3380,250]},ambientUrl:null,battleMusicUrl:null}};class gD{constructor(){Br(this,"config",{masterVolume:.8,sfxVolume:.7,musicVolume:.5,ambientVolume:.3});Br(this,"currentTheme","tmp-base");Br(this,"sfxSprite",null);Br(this,"ambientLoop",null);Br(this,"battleMusic",null);Br(this,"isInitialized",!1);Br(this,"isMuted",!1)}async init(){if(this.isInitialized)return;const e=bn();e.state==="suspended"&&await e.resume(),$r.Howler.volume(this.config.masterVolume),this.isInitialized=!0,console.log(" Awesome Mix Audio System initialized")}async loadTheme(e){if(this.currentTheme===e&&this.sfxSprite)return;this.unloadCurrentTheme(),this.currentTheme=e;const n=Wv[e];n.spriteUrl&&(this.sfxSprite=new $r.Howl({src:[n.spriteUrl],sprite:n.sprites,preload:!0,onloaderror:(r,i)=>{console.warn(`Failed to load SFX sprite for ${e}:`,i),this.sfxSprite=null}})),n.ambientUrl&&(this.ambientLoop=new $r.Howl({src:[n.ambientUrl],loop:!0,volume:this.config.ambientVolume*this.config.masterVolume,preload:!0})),n.battleMusicUrl&&(this.battleMusic=new $r.Howl({src:[n.battleMusicUrl],loop:!0,volume:0,preload:!0})),console.log(` Loaded audio pack for theme: ${e}`)}unloadCurrentTheme(){this.sfxSprite&&(this.sfxSprite.unload(),this.sfxSprite=null),this.ambientLoop&&(this.ambientLoop.stop(),this.ambientLoop.unload(),this.ambientLoop=null),this.battleMusic&&(this.battleMusic.stop(),this.battleMusic.unload(),this.battleMusic=null)}play(e,n){if(!this.isInitialized||this.isMuted)return;const r=((n==null?void 0:n.volume)??1)*this.config.sfxVolume*this.config.masterVolume;if(this.sfxSprite){const i=Wv[this.currentTheme];if(e in i.sprites){const s=this.sfxSprite.play(e);this.sfxSprite.volume(r,s),n!=null&&n.rate&&this.sfxSprite.rate(n.rate,s);return}}this.playSynth(e,r)}playSynth(e,n){switch(e){case"votecast":In.votecast(n);break;case"timerTick":In.timerTick(n);break;case"timerEnd":In.timerEnd(n);break;case"victory":In.victory(n);break;case"error":In.error(n);break;case"uiClick":In.uiClick(n);break;case"whoosh":In.whoosh(n);break;case"diceRoll":In.diceRoll(n);break;case"diceImpact":In.diceImpact(n);break;case"countdown":In.countdown(n);break;case"ambient":break;case"battleMusic":break;default:console.debug(`Unknown sound: ${e}`)}}startAmbient(e=2e3){if(!this.ambientLoop){console.debug("No ambient audio loaded for current theme");return}this.ambientLoop.play(),this.ambientLoop.fade(0,this.config.ambientVolume*this.config.masterVolume,e)}stopAmbient(e=1e3){this.ambientLoop&&(this.ambientLoop.fade(this.ambientLoop.volume(),0,e),setTimeout(()=>{var n;(n=this.ambientLoop)==null||n.stop()},e))}startBattleMusic(e=500){if(!this.battleMusic){console.debug("No battle music loaded for current theme"),this.playBattleMusicSynth();return}this.ambientLoop&&this.ambientLoop.fade(this.ambientLoop.volume(),this.config.ambientVolume*.3*this.config.masterVolume,e),this.battleMusic.play(),this.battleMusic.fade(0,this.config.musicVolume*this.config.masterVolume,e)}stopBattleMusic(e=2e3){this.battleMusic&&(this.battleMusic.fade(this.battleMusic.volume(),0,e),setTimeout(()=>{var n;(n=this.battleMusic)==null||n.stop()},e)),this.ambientLoop&&this.ambientLoop.fade(this.ambientLoop.volume(),this.config.ambientVolume*this.config.masterVolume,e)}playBattleMusicSynth(){const e=bn();if(e.state==="suspended")return;const n=this.config.musicVolume*this.config.masterVolume,r=e.createGain();r.connect(e.destination),[164.81,246.94,329.63].forEach((s,o)=>{const a=e.createOscillator();a.type="sawtooth",a.frequency.value=s;const l=e.createGain();l.connect(r),l.gain.setValueAtTime(n*.25,e.currentTime),l.gain.exponentialRampToValueAtTime(.01,e.currentTime+2),a.connect(l),a.start(e.currentTime),a.stop(e.currentTime+2)})}setMasterVolume(e){this.config.masterVolume=Math.max(0,Math.min(1,e)),$r.Howler.volume(this.config.masterVolume)}setSfxVolume(e){this.config.sfxVolume=Math.max(0,Math.min(1,e))}setMusicVolume(e){this.config.musicVolume=Math.max(0,Math.min(1,e)),this.battleMusic&&this.battleMusic.playing()&&this.battleMusic.volume(this.config.musicVolume*this.config.masterVolume)}setAmbientVolume(e){this.config.ambientVolume=Math.max(0,Math.min(1,e)),this.ambientLoop&&this.ambientLoop.playing()&&this.ambientLoop.volume(this.config.ambientVolume*this.config.masterVolume)}mute(){this.isMuted=!0,$r.Howler.mute(!0)}unmute(){this.isMuted=!1,$r.Howler.mute(!1)}toggleMute(){return this.isMuted?this.unmute():this.mute(),this.isMuted}playCountdownTick(e){e<=3?In.countdown(this.config.sfxVolume*this.config.masterVolume,"high"):e<=10&&In.countdown(this.config.sfxVolume*this.config.masterVolume,"low")}playVictoryFanfare(){this.play("victory",{volume:1.2})}async playDiceSequence(e=1500){return this.play("diceRoll"),new Promise(n=>{setTimeout(()=>{this.play("diceImpact",{volume:1.3}),n()},e)})}get initialized(){return this.isInitialized}get muted(){return this.isMuted}get currentThemeId(){return this.currentTheme}getConfig(){return{...this.config}}}const ft=new gD;function yD(){ft.init()}const hS=D.createContext(null);function _D(t){const e=[],n=Ib;return e.push(`${n}-color-primary: ${t.colors.primary}`),e.push(`${n}-color-secondary: ${t.colors.secondary}`),e.push(`${n}-color-tertiary: ${t.colors.tertiary}`),e.push(`${n}-bg-main: ${t.colors.background.main}`),e.push(`${n}-bg-card: ${t.colors.background.card}`),e.push(`${n}-bg-elevated: ${t.colors.background.elevated}`),e.push(`${n}-text-primary: ${t.colors.text.primary}`),e.push(`${n}-text-secondary: ${t.colors.text.secondary}`),e.push(`${n}-text-on-primary: ${t.colors.text.onPrimary}`),e.push(`${n}-vote-option-a: ${t.colors.voting.optionA}`),e.push(`${n}-vote-option-b: ${t.colors.voting.optionB}`),t.colors.voting.optionC&&e.push(`${n}-vote-option-c: ${t.colors.voting.optionC}`),e.push(`${n}-vote-track: ${t.colors.voting.progressTrack}`),e.push(`${n}-status-success: ${t.colors.status.success}`),e.push(`${n}-status-warning: ${t.colors.status.warning}`),e.push(`${n}-status-error: ${t.colors.status.error}`),e.push(`${n}-status-info: ${t.colors.status.info}`),e.push(`--tmp-icon-primary: ${t.colors.primary}`),e.push(`--tmp-icon-secondary: ${t.colors.secondary}`),e.push(`${n}-font-display: ${t.typography.fonts.display}`),e.push(`${n}-font-body: ${t.typography.fonts.body}`),e.push(`${n}-font-accent: ${t.typography.fonts.accent}`),e.push(`${n}-size-hero: ${t.typography.sizes.hero}`),e.push(`${n}-size-h1: ${t.typography.sizes.h1}`),e.push(`${n}-size-h2: ${t.typography.sizes.h2}`),e.push(`${n}-size-h3: ${t.typography.sizes.h3}`),e.push(`${n}-size-body: ${t.typography.sizes.body}`),e.push(`${n}-size-small: ${t.typography.sizes.small}`),e.push(`${n}-ease-default: ${t.animations.easing.default}`),e.push(`${n}-ease-bounce: ${t.animations.easing.bounce}`),e.push(`${n}-ease-enter: ${t.animations.easing.enter}`),e.push(`${n}-ease-exit: ${t.animations.easing.exit}`),e.push(`${n}-duration-fast: ${t.animations.duration.fast}ms`),e.push(`${n}-duration-normal: ${t.animations.duration.normal}ms`),e.push(`${n}-duration-slow: ${t.animations.duration.slow}ms`),e.push(`${n}-duration-vote: ${t.animations.duration.voteUpdate}ms`),e.push(`${n}-radius-small: ${t.effects.borderRadius.small}`),e.push(`${n}-radius-medium: ${t.effects.borderRadius.medium}`),e.push(`${n}-radius-large: ${t.effects.borderRadius.large}`),e.push(`${n}-radius-button: ${t.effects.borderRadius.button}`),e.push(`${n}-radius-card: ${t.effects.borderRadius.card}`),e.push(`${n}-shadow-small: ${t.effects.shadows.small}`),e.push(`${n}-shadow-medium: ${t.effects.shadows.medium}`),e.push(`${n}-shadow-large: ${t.effects.shadows.large}`),e.push(`${n}-shadow-glow: ${t.effects.shadows.glow}`),e.join(`;
  `)}function vD(t){if(!t||document.querySelector(`link[href="${t}"]`))return;const n=document.createElement("link");n.rel="stylesheet",n.href=t,document.head.appendChild(n)}function wD({children:t,initialThemeId:e=dS}){const[n,r]=D.useState(()=>{if(typeof window<"u"){const d=localStorage.getItem("tmp-theme-id");if(d&&d in Ro)return d}return e}),[i,s]=D.useState(()=>typeof window<"u"?localStorage.getItem("tmp-sound-enabled")!=="false":!0),o=D.useMemo(()=>TD(n),[n]),a=D.useMemo(()=>xD(),[]);D.useEffect(()=>{const d=_D(o),u="tmp-theme-variables";let f=document.getElementById(u);f||(f=document.createElement("style"),f.id=u,document.head.appendChild(f)),f.textContent=`:root {
  ${d};
}`,document.documentElement.setAttribute("data-theme",o.id)},[o]),D.useEffect(()=>{vD(o.typography.googleFontsUrl)},[o.typography.googleFontsUrl]),D.useEffect(()=>{localStorage.setItem("tmp-theme-id",n)},[n]),D.useEffect(()=>{localStorage.setItem("tmp-sound-enabled",String(i))},[i]),D.useEffect(()=>{const d=Un(Te(xe,"config","theme"),u=>{if(u.exists()){const f=u.data();f.themeId&&f.themeId in Ro&&f.themeId!==n&&(console.log(" Theme sync from Firebase:",f.themeId),r(f.themeId))}},u=>{console.warn("Theme sync error:",u)});return()=>d()},[n]),D.useEffect(()=>{ft.init(),ft.loadTheme(n)},[n]);const l=D.useCallback(d=>{if(!i)return;const f={votecast:"votecast",timerTick:"timerTick",timerEnd:"timerEnd",victory:"victory",uiClick:"uiClick",error:"error",ambient:"ambient"}[d];f&&ft.play(f)},[i]),c=D.useMemo(()=>({theme:o,themeId:n,setThemeId:r,availableThemes:a,playSound:l,soundEnabled:i,setSoundEnabled:s}),[o,n,a,l,i]);return E.jsx(hS.Provider,{value:c,children:t})}function Or(){const t=D.useContext(hS);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const ud=new Map;async function fS(t){if(ud.has(t))return ud.get(t);try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load: ${t}`);const n=await e.text();return ud.set(t,n),n}catch(e){return console.warn(`[ThemeAssets] Failed to load SVG: ${t}`,e),""}}const Zg=D.memo(function({iconKey:e,config:n,size:r=48,selected:i=!1,className:s="",onClick:o,ariaLabel:a}){var w,_;const{theme:l}=Or(),[c,d]=D.useState(""),[u,f]=D.useState(!1),p=n||((_=(w=l.assets)==null?void 0:w.voteIcons)==null?void 0:_[e]);if(D.useEffect(()=>{p!=null&&p.src&&(f(!1),p.type==="svg"?fS(p.src).then(v=>{d(v),f(!0)}):p.type==="img"&&f(!0))},[p==null?void 0:p.src,p==null?void 0:p.type]),!p)return E.jsx("span",{className:`theme-icon theme-icon--fallback ${s}`,style:{fontSize:r*.8},role:"img","aria-label":a||e,children:e==="optionA"?"":e==="optionB"?"":""});const y=i?p.selectAnimation:p.idleAnimation,m={width:r,height:r,"--icon-size":`${r}px`};return E.jsxs("span",{className:`theme-icon ${y||""} ${i?"theme-icon--selected":""} ${u?"theme-icon--loaded":""} ${s}`,style:m,onClick:o,role:o?"button":"img","aria-label":a||p.alt,tabIndex:o?0:void 0,children:[p.type==="svg"&&c&&E.jsx("span",{className:"theme-icon__svg",dangerouslySetInnerHTML:{__html:c}}),p.type==="img"&&E.jsx("img",{src:p.src,alt:p.alt,className:"theme-icon__img",loading:"lazy"})]})});D.memo(function({children:e,className:n="",showTexture:r=!0}){var c;const{theme:i}=Or(),[s,o]=D.useState(""),a=(c=i.assets)==null?void 0:c.cardFrame;D.useEffect(()=>{a!=null&&a.border&&fS(a.border).then(o)},[a==null?void 0:a.border]);const l=a!=null&&a.effect?{filter:a.effect}:{};return E.jsxs("div",{className:`card-frame card-frame--${i.id} ${n}`,style:l,children:[s&&E.jsx("div",{className:"card-frame__border",dangerouslySetInnerHTML:{__html:s}}),r&&(a==null?void 0:a.texture)&&E.jsx("div",{className:"card-frame__texture",style:{backgroundImage:`url(${a.texture})`}}),E.jsx("div",{className:"card-frame__content",children:e})]})});D.memo(function({segments:e,height:n=40,showEndCap:r=!1,className:i=""}){var l,c;const{theme:s}=Or(),o=(l=s.assets)==null?void 0:l.progressBar,a={height:n,backgroundImage:o!=null&&o.trackTexture?`url(${o.trackTexture})`:void 0};return E.jsxs("div",{className:`themed-progress themed-progress--${s.id} ${i}`,style:a,role:"progressbar","aria-valuenow":((c=e[0])==null?void 0:c.percent)||0,"aria-valuemin":0,"aria-valuemax":100,children:[E.jsx("div",{className:"themed-progress__track",children:e.map((d,u)=>E.jsx("div",{className:`themed-progress__fill themed-progress__fill--${u}`,style:{width:`${d.percent}%`,background:d.color||(o==null?void 0:o.fillStyle)||s.colors.voting[`option${String.fromCharCode(65+u)}`]||s.colors.primary},children:d.percent>10&&E.jsx("span",{className:"themed-progress__label",children:d.label})},d.label))}),r&&(o==null?void 0:o.endCap)&&E.jsx(Zg,{iconKey:"endCap",config:{src:o.endCap,type:"svg",alt:"Progress end",idleAnimation:s.animations.keyframes.idle},size:n*.8,className:"themed-progress__endcap"})]})});const Ro={"tmp-base":kb,"soggy-bottom-pirates":bb,"neon-nightmares":Rb},dS="tmp-base",TD=t=>Ro[t]??Ro[dS],xD=()=>Object.keys(Ro),pS=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Yh=D.createContext({}),Zh=D.createContext(null),Jh=typeof document<"u",Jg=Jh?D.useLayoutEffect:D.useEffect,mS=D.createContext({strict:!1}),ey=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ED="framerAppearId",gS="data-"+ey(ED);function SD(t,e,n,r){const{visualElement:i}=D.useContext(Yh),s=D.useContext(mS),o=D.useContext(Zh),a=D.useContext(pS).reducedMotion,l=D.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;D.useInsertionEffect(()=>{c&&c.update(n,o)});const d=D.useRef(!!(n[gS]&&!window.HandoffComplete));return Jg(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),D.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function Qs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function AD(t,e,n){return D.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Qs(n)&&(n.current=r))},[e])}function Rl(t){return typeof t=="string"||Array.isArray(t)}function ef(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ty=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ny=["initial",...ty];function tf(t){return ef(t.animate)||ny.some(e=>Rl(t[e]))}function yS(t){return!!(tf(t)||t.variants)}function CD(t,e){if(tf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Rl(n)?n:void 0,animate:Rl(r)?r:void 0}}return t.inherit!==!1?e:{}}function PD(t){const{initial:e,animate:n}=CD(t,D.useContext(Yh));return D.useMemo(()=>({initial:e,animate:n}),[Hv(e),Hv(n)])}function Hv(t){return Array.isArray(t)?t.join(" "):t}const qv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vl={};for(const t in qv)Vl[t]={isEnabled:e=>qv[t].some(n=>!!e[n])};function ID(t){for(const e in t)Vl[e]={...Vl[e],...t[e]}}const ry=D.createContext({}),_S=D.createContext({}),kD=Symbol.for("motionComponentSymbol");function bD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&ID(t);function s(a,l){let c;const d={...D.useContext(pS),...a,layoutId:RD(a)},{isStatic:u}=d,f=PD(a),p=r(a,u);if(!u&&Jh){f.visualElement=SD(i,p,d,e);const y=D.useContext(_S),m=D.useContext(mS).strict;f.visualElement&&(c=f.visualElement.loadFeatures(d,m,t,y))}return D.createElement(Yh.Provider,{value:f},c&&f.visualElement?D.createElement(c,{visualElement:f.visualElement,...d}):null,n(i,a,AD(p,f.visualElement,l),p,u,f.visualElement))}const o=D.forwardRef(s);return o[kD]=i,o}function RD({layoutId:t}){const e=D.useContext(ry).id;return e&&t!==void 0?e+"-"+t:t}function VD(t){function e(r,i={}){return bD(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const MD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function iy(t){return typeof t!="string"||t.includes("-")?!1:!!(MD.indexOf(t)>-1||/[A-Z]/.test(t))}const th={};function DD(t){Object.assign(th,t)}const Jl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xs=new Set(Jl);function vS(t,{layout:e,layoutId:n}){return xs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!th[t]||t==="opacity")}const ln=t=>!!(t&&t.getVelocity),ND={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OD=Jl.length;function FD(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<OD;o++){const a=Jl[o];if(t[a]!==void 0){const l=ND[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const wS=t=>e=>typeof e=="string"&&e.startsWith(t),TS=wS("--"),Kp=wS("var(--"),LD=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,jD=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ei=(t,e,n)=>Math.min(Math.max(n,t),e),Es={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ka={...Es,transform:t=>Ei(0,1,t)},Hu={...Es,default:1},Qa=t=>Math.round(t*1e5)/1e5,nf=/(-)?([\d]*\.?[\d])+/g,xS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,BD=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function eu(t){return typeof t=="string"}const tu=t=>({test:e=>eu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zr=tu("deg"),ur=tu("%"),le=tu("px"),UD=tu("vh"),$D=tu("vw"),Gv={...ur,parse:t=>ur.parse(t)/100,transform:t=>ur.transform(t*100)},Kv={...Es,transform:Math.round},ES={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,size:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,rotate:zr,rotateX:zr,rotateY:zr,rotateZ:zr,scale:Hu,scaleX:Hu,scaleY:Hu,scaleZ:Hu,skew:zr,skewX:zr,skewY:zr,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Ka,originX:Gv,originY:Gv,originZ:le,zIndex:Kv,fillOpacity:Ka,strokeOpacity:Ka,numOctaves:Kv};function sy(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,d=!0;for(const u in e){const f=e[u];if(TS(u)){s[u]=f;continue}const p=ES[u],y=jD(f,p);if(xs.has(u)){if(l=!0,o[u]=y,!d)continue;f!==(p.default||0)&&(d=!1)}else u.startsWith("origin")?(c=!0,a[u]=y):i[u]=y}if(e.transform||(l||r?i.transform=FD(t.transform,n,d,r):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:f="50%",originZ:p=0}=a;i.transformOrigin=`${u} ${f} ${p}`}}const oy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function SS(t,e,n){for(const r in e)!ln(e[r])&&!vS(r,n)&&(t[r]=e[r])}function zD({transformTemplate:t},e,n){return D.useMemo(()=>{const r=oy();return sy(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function WD(t,e,n){const r=t.style||{},i={};return SS(i,r,t),Object.assign(i,zD(t,e,n)),t.transformValues?t.transformValues(i):i}function HD(t,e,n){const r={},i=WD(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const qD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||qD.has(t)}let AS=t=>!nh(t);function GD(t){t&&(AS=e=>e.startsWith("on")?!nh(e):t(e))}try{GD(require("@emotion/is-prop-valid").default)}catch{}function KD(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(AS(i)||n===!0&&nh(i)||!e&&!nh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Qv(t,e,n){return typeof t=="string"?t:le.transform(e+n*t)}function QD(t,e,n){const r=Qv(e,t.x,t.width),i=Qv(n,t.y,t.height);return`${r} ${i}`}const XD={offset:"stroke-dashoffset",array:"stroke-dasharray"},YD={offset:"strokeDashoffset",array:"strokeDasharray"};function ZD(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?XD:YD;t[s.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[s.array]=`${o} ${a}`}function ay(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,u,f){if(sy(t,c,d,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:y,dimensions:m}=t;p.transform&&(m&&(y.transform=p.transform),delete p.transform),m&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=QD(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&ZD(p,o,a,l,!1)}const CS=()=>({...oy(),attrs:{}}),ly=t=>typeof t=="string"&&t.toLowerCase()==="svg";function JD(t,e,n,r){const i=D.useMemo(()=>{const s=CS();return ay(s,e,{enableHardwareAcceleration:!1},ly(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};SS(s,t.style,t),i.style={...s,...i.style}}return i}function eN(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(iy(n)?JD:HD)(r,s,o,n),d={...KD(r,typeof n=="string",t),...l,ref:i},{children:u}=r,f=D.useMemo(()=>ln(u)?u.get():u,[u]);return D.createElement(n,{...d,children:f})}}function PS(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const IS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kS(t,e,n,r){PS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(IS.has(i)?i:ey(i),e.attrs[i])}function uy(t,e){const{style:n}=t,r={};for(const i in n)(ln(n[i])||e.style&&ln(e.style[i])||vS(i,t))&&(r[i]=n[i]);return r}function bS(t,e){const n=uy(t,e);for(const r in t)if(ln(t[r])||ln(e[r])){const i=Jl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function cy(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function RS(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const rh=t=>Array.isArray(t),tN=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),nN=t=>rh(t)?t[t.length-1]||0:t;function pc(t){const e=ln(t)?t.get():t;return tN(e)?e.toValue():e}function rN({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:iN(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const VS=t=>(e,n)=>{const r=D.useContext(Yh),i=D.useContext(Zh),s=()=>rN(t,e,r,i);return n?s():RS(s)};function iN(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=pc(s[f]);let{initial:o,animate:a}=t;const l=tf(t),c=yS(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const u=d?a:o;return u&&typeof u!="boolean"&&!ef(u)&&(Array.isArray(u)?u:[u]).forEach(p=>{const y=cy(t,p);if(!y)return;const{transitionEnd:m,transition:w,..._}=y;for(const v in _){let x=_[v];if(Array.isArray(x)){const P=d?x.length-1:0;x=x[P]}x!==null&&(i[v]=x)}for(const v in m)i[v]=m[v]}),i}const nt=t=>t;class Xv{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function sN(t){let e=new Xv,n=new Xv,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const u=d&&i,f=u?e:n;return c&&o.add(l),f.add(l)&&u&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(l),o.has(d)&&(a.schedule(d),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const qu=["prepare","read","update","preRender","render","postRender"],oN=40;function aN(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=qu.reduce((u,f)=>(u[f]=sN(()=>n=!0),u),{}),o=u=>s[u].process(i),a=()=>{const u=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(u-i.timestamp,oN),1),i.timestamp=u,i.isProcessing=!0,qu.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:qu.reduce((u,f)=>{const p=s[f];return u[f]=(y,m=!1,w=!1)=>(n||l(),p.schedule(y,m,w)),u},{}),cancel:u=>qu.forEach(f=>s[f].cancel(u)),state:i,steps:s}}const{schedule:Ne,cancel:Vr,state:Dt,steps:cd}=aN(typeof requestAnimationFrame<"u"?requestAnimationFrame:nt,!0),lN={useVisualState:VS({scrapeMotionValuesFromProps:bS,createRenderState:CS,onMount:(t,e,{renderState:n,latestValues:r})=>{Ne.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ne.render(()=>{ay(n,r,{enableHardwareAcceleration:!1},ly(e.tagName),t.transformTemplate),kS(e,n)})}})},uN={useVisualState:VS({scrapeMotionValuesFromProps:uy,createRenderState:oy})};function cN(t,{forwardMotionProps:e=!1},n,r){return{...iy(t)?lN:uN,preloadedFeatures:n,useRender:eN(e),createVisualElement:r,Component:t}}function Tr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const MS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function rf(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const hN=t=>e=>MS(e)&&t(e,rf(e));function Er(t,e,n,r){return Tr(t,e,hN(n),r)}const fN=(t,e)=>n=>e(t(n)),pi=(...t)=>t.reduce(fN);function DS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Yv=DS("dragHorizontal"),Zv=DS("dragVertical");function NS(t){let e=!1;if(t==="y")e=Zv();else if(t==="x")e=Yv();else{const n=Yv(),r=Zv();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function OS(){const t=NS(!0);return t?(t(),!1):!0}class Vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Jv(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||OS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ne.update(()=>a[r](s,o))};return Er(t.current,n,i,{passive:!t.getProps()[r]})}class dN extends Vi{mount(){this.unmount=pi(Jv(this.node,!0),Jv(this.node,!1))}unmount(){}}class pN extends Vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pi(Tr(this.node.current,"focus",()=>this.onFocus()),Tr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const FS=(t,e)=>e?t===e?!0:FS(t,e.parentElement):!1;function hd(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,rf(n))}class mN extends Vi{constructor(){super(...arguments),this.removeStartListeners=nt,this.removeEndListeners=nt,this.removeAccessibleListeners=nt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Er(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:u}=this.node.getProps();Ne.update(()=>{!u&&!FS(this.node.current,a.target)?d&&d(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Er(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=pi(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||hd("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Ne.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=Tr(this.node.current,"keyup",o),hd("down",(a,l)=>{this.startPress(a,l)})},n=Tr(this.node.current,"keydown",e),r=()=>{this.isPressing&&hd("cancel",(s,o)=>this.cancelPress(s,o))},i=Tr(this.node.current,"blur",r);this.removeAccessibleListeners=pi(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ne.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!OS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ne.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Er(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Tr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Qp=new WeakMap,fd=new WeakMap,gN=t=>{const e=Qp.get(t.target);e&&e(t)},yN=t=>{t.forEach(gN)};function _N({root:t,...e}){const n=t||document;fd.has(n)||fd.set(n,{});const r=fd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(yN,{root:t,...e})),r[i]}function vN(t,e,n){const r=_N(e);return Qp.set(t,n),r.observe(t),()=>{Qp.delete(t),r.unobserve(t)}}const wN={some:0,all:1};class TN extends Vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:wN[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),f=c?d:u;f&&f(l)};return vN(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(xN(e,n))&&this.startObserver()}unmount(){}}function xN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const EN={inView:{Feature:TN},tap:{Feature:mN},focus:{Feature:pN},hover:{Feature:dN}};function LS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function SN(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function AN(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function sf(t,e,n){const r=t.getProps();return cy(r,e,n!==void 0?n:r.custom,SN(t),AN(t))}let hy=nt;const ss=t=>t*1e3,Sr=t=>t/1e3,CN={current:!1},jS=t=>Array.isArray(t)&&typeof t[0]=="number";function BS(t){return!!(!t||typeof t=="string"&&US[t]||jS(t)||Array.isArray(t)&&t.every(BS))}const Ra=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,US={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ra([0,.65,.55,1]),circOut:Ra([.55,0,1,.45]),backIn:Ra([.31,.01,.66,-.59]),backOut:Ra([.33,1.53,.69,.99])};function $S(t){if(t)return jS(t)?Ra(t):Array.isArray(t)?t.map($S):US[t]}function PN(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=$S(a);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function IN(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const zS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kN=1e-7,bN=12;function RN(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=zS(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>kN&&++a<bN);return o}function nu(t,e,n,r){if(t===e&&n===r)return nt;const i=s=>RN(s,0,1,t,n);return s=>s===0||s===1?s:zS(i(s),e,r)}const VN=nu(.42,0,1,1),MN=nu(0,0,.58,1),WS=nu(.42,0,.58,1),DN=t=>Array.isArray(t)&&typeof t[0]!="number",HS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,qS=t=>e=>1-t(1-e),fy=t=>1-Math.sin(Math.acos(t)),GS=qS(fy),NN=HS(fy),KS=nu(.33,1.53,.69,.99),dy=qS(KS),ON=HS(dy),FN=t=>(t*=2)<1?.5*dy(t):.5*(2-Math.pow(2,-10*(t-1))),LN={linear:nt,easeIn:VN,easeInOut:WS,easeOut:MN,circIn:fy,circInOut:NN,circOut:GS,backIn:dy,backInOut:ON,backOut:KS,anticipate:FN},ew=t=>{if(Array.isArray(t)){hy(t.length===4);const[e,n,r,i]=t;return nu(e,n,r,i)}else if(typeof t=="string")return LN[t];return t},py=(t,e)=>n=>!!(eu(n)&&BD.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),QS=(t,e,n)=>r=>{if(!eu(r))return r;const[i,s,o,a]=r.match(nf);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},jN=t=>Ei(0,255,t),dd={...Es,transform:t=>Math.round(jN(t))},Ji={test:py("rgb","red"),parse:QS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+dd.transform(t)+", "+dd.transform(e)+", "+dd.transform(n)+", "+Qa(Ka.transform(r))+")"};function BN(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Xp={test:py("#"),parse:BN,transform:Ji.transform},Xs={test:py("hsl","hue"),parse:QS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ur.transform(Qa(e))+", "+ur.transform(Qa(n))+", "+Qa(Ka.transform(r))+")"},$t={test:t=>Ji.test(t)||Xp.test(t)||Xs.test(t),parse:t=>Ji.test(t)?Ji.parse(t):Xs.test(t)?Xs.parse(t):Xp.parse(t),transform:t=>eu(t)?t:t.hasOwnProperty("red")?Ji.transform(t):Xs.transform(t)},We=(t,e,n)=>-n*t+n*e+t;function pd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function UN({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=pd(l,a,t+1/3),s=pd(l,a,t),o=pd(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const md=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},$N=[Xp,Ji,Xs],zN=t=>$N.find(e=>e.test(t));function tw(t){const e=zN(t);let n=e.parse(t);return e===Xs&&(n=UN(n)),n}const XS=(t,e)=>{const n=tw(t),r=tw(e),i={...n};return s=>(i.red=md(n.red,r.red,s),i.green=md(n.green,r.green,s),i.blue=md(n.blue,r.blue,s),i.alpha=We(n.alpha,r.alpha,s),Ji.transform(i))};function WN(t){var e,n;return isNaN(t)&&eu(t)&&(((e=t.match(nf))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(xS))===null||n===void 0?void 0:n.length)||0)>0}const YS={regex:LD,countKey:"Vars",token:"${v}",parse:nt},ZS={regex:xS,countKey:"Colors",token:"${c}",parse:$t.parse},JS={regex:nf,countKey:"Numbers",token:"${n}",parse:Es.parse};function gd(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function ih(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&gd(n,YS),gd(n,ZS),gd(n,JS),n}function eA(t){return ih(t).values}function tA(t){const{values:e,numColors:n,numVars:r,tokenised:i}=ih(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(YS.token,o[l]):l<r+n?a=a.replace(ZS.token,$t.transform(o[l])):a=a.replace(JS.token,Qa(o[l]));return a}}const HN=t=>typeof t=="number"?0:t;function qN(t){const e=eA(t);return tA(t)(e.map(HN))}const Si={test:WN,parse:eA,createTransformer:tA,getAnimatableNone:qN},nA=(t,e)=>n=>`${n>0?e:t}`;function rA(t,e){return typeof t=="number"?n=>We(t,e,n):$t.test(t)?XS(t,e):t.startsWith("var(")?nA(t,e):sA(t,e)}const iA=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>rA(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},GN=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=rA(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},sA=(t,e)=>{const n=Si.createTransformer(e),r=ih(t),i=ih(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?pi(iA(r.values,i.values),n):nA(t,e)},Ml=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},nw=(t,e)=>n=>We(t,e,n);function KN(t){return typeof t=="number"?nw:typeof t=="string"?$t.test(t)?XS:sA:Array.isArray(t)?iA:typeof t=="object"?GN:nw}function QN(t,e,n){const r=[],i=n||KN(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||nt:e;a=pi(l,a)}r.push(a)}return r}function oA(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(hy(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=QN(e,r,i),a=o.length,l=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const u=Ml(t[d],t[d+1],c);return o[d](u)};return n?c=>l(Ei(t[0],t[s-1],c)):l}function XN(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ml(0,e,r);t.push(We(n,1,i))}}function YN(t){const e=[0];return XN(e,t.length-1),e}function ZN(t,e){return t.map(n=>n*e)}function JN(t,e){return t.map(()=>e||WS).splice(0,t.length-1)}function sh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=DN(r)?r.map(ew):ew(r),s={done:!1,value:e[0]},o=ZN(n&&n.length===e.length?n:YN(e),t),a=oA(o,e,{ease:Array.isArray(i)?i:JN(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function aA(t,e){return e?t*(1e3/e):0}const eO=5;function lA(t,e,n){const r=Math.max(e-eO,0);return aA(n-t(r),e-r)}const yd=.001,tO=.01,nO=10,rO=.05,iO=1;function sO({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Ei(rO,iO,o),t=Ei(tO,nO,Sr(t)),o<1?(i=c=>{const d=c*o,u=d*t,f=d-n,p=Yp(c,o),y=Math.exp(-u);return yd-f/p*y},s=c=>{const u=c*o*t,f=u*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-u),m=Yp(Math.pow(c,2),o);return(-i(c)+yd>0?-1:1)*((f-p)*y)/m}):(i=c=>{const d=Math.exp(-c*t),u=(c-n)*t+1;return-yd+d*u},s=c=>{const d=Math.exp(-c*t),u=(n-c)*(t*t);return d*u});const a=5/t,l=aO(i,s,a);if(t=ss(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const oO=12;function aO(t,e,n){let r=n;for(let i=1;i<oO;i++)r=r-t(r)/e(r);return r}function Yp(t,e){return t*Math.sqrt(1-e*e)}const lO=["duration","bounce"],uO=["stiffness","damping","mass"];function rw(t,e){return e.some(n=>t[n]!==void 0)}function cO(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!rw(t,uO)&&rw(t,lO)){const n=sO(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function uA({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:d,velocity:u,isResolvedFromDuration:f}=cO({...r,velocity:-Sr(r.velocity||0)}),p=u||0,y=l/(2*Math.sqrt(a*c)),m=s-i,w=Sr(Math.sqrt(a/c)),_=Math.abs(m)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let v;if(y<1){const x=Yp(w,y);v=P=>{const R=Math.exp(-y*w*P);return s-R*((p+y*w*m)/x*Math.sin(x*P)+m*Math.cos(x*P))}}else if(y===1)v=x=>s-Math.exp(-w*x)*(m+(p+w*m)*x);else{const x=w*Math.sqrt(y*y-1);v=P=>{const R=Math.exp(-y*w*P),O=Math.min(x*P,300);return s-R*((p+y*w*m)*Math.sinh(O)+x*m*Math.cosh(O))/x}}return{calculatedDuration:f&&d||null,next:x=>{const P=v(x);if(f)o.done=x>=d;else{let R=p;x!==0&&(y<1?R=lA(v,x,P):R=0);const O=Math.abs(R)<=n,C=Math.abs(s-P)<=e;o.done=O&&C}return o.value=o.done?s:P,o}}}function iw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=t[0],f={done:!1,value:u},p=S=>a!==void 0&&S<a||l!==void 0&&S>l,y=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let m=n*e;const w=u+m,_=o===void 0?w:o(w);_!==w&&(m=_-u);const v=S=>-m*Math.exp(-S/r),x=S=>_+v(S),P=S=>{const A=v(S),I=x(S);f.done=Math.abs(A)<=c,f.value=f.done?_:I};let R,O;const C=S=>{p(f.value)&&(R=S,O=uA({keyframes:[f.value,y(f.value)],velocity:lA(x,S,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return C(0),{calculatedDuration:null,next:S=>{let A=!1;return!O&&R===void 0&&(A=!0,P(S),C(S)),R!==void 0&&S>R?O.next(S-R):(!A&&P(S),f)}}}const hO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ne.update(e,!0),stop:()=>Vr(e),now:()=>Dt.isProcessing?Dt.timestamp:performance.now()}},sw=2e4;function ow(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<sw;)e+=n,r=t.next(e);return e>=sw?1/0:e}const fO={decay:iw,inertia:iw,tween:sh,keyframes:sh,spring:uA};function oh({autoplay:t=!0,delay:e=0,driver:n=hO,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:u,...f}){let p=1,y=!1,m,w;const _=()=>{w=new Promise(N=>{m=N})};_();let v;const x=fO[i]||sh;let P;x!==sh&&typeof r[0]!="number"&&(P=oA([0,100],r,{clamp:!1}),r=[0,100]);const R=x({...f,keyframes:r});let O;a==="mirror"&&(O=x({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",S=null,A=null,I=null;R.calculatedDuration===null&&s&&(R.calculatedDuration=ow(R));const{calculatedDuration:V}=R;let M=1/0,b=1/0;V!==null&&(M=V+o,b=M*(s+1)-o);let q=0;const te=N=>{if(A===null)return;p>0&&(A=Math.min(A,N)),p<0&&(A=Math.min(N-b/p,A)),S!==null?q=S:q=Math.round(N-A)*p;const $=q-e*(p>=0?1:-1),K=p>=0?$<0:$>b;q=Math.max($,0),C==="finished"&&S===null&&(q=b);let Z=q,ne=R;if(s){const _e=Math.min(q,b)/M;let ve=Math.floor(_e),pe=_e%1;!pe&&_e>=1&&(pe=1),pe===1&&ve--,ve=Math.min(ve,s+1),!!(ve%2)&&(a==="reverse"?(pe=1-pe,o&&(pe-=o/M)):a==="mirror"&&(ne=O)),Z=Ei(0,1,pe)*M}const se=K?{done:!1,value:r[0]}:ne.next(Z);P&&(se.value=P(se.value));let{done:J}=se;!K&&V!==null&&(J=p>=0?q>=b:q<=0);const de=S===null&&(C==="finished"||C==="running"&&J);return u&&u(se.value),de&&z(),se},Q=()=>{v&&v.stop(),v=void 0},re=()=>{C="idle",Q(),m(),_(),A=I=null},z=()=>{C="finished",d&&d(),Q(),m()},X=()=>{if(y)return;v||(v=n(te));const N=v.now();l&&l(),S!==null?A=N-S:(!A||C==="finished")&&(A=N),C==="finished"&&_(),I=A,S=null,C="running",v.start()};t&&X();const F={then(N,$){return w.then(N,$)},get time(){return Sr(q)},set time(N){N=ss(N),q=N,S!==null||!v||p===0?S=N:A=v.now()-N/p},get duration(){const N=R.calculatedDuration===null?ow(R):R.calculatedDuration;return Sr(N)},get speed(){return p},set speed(N){N===p||!v||(p=N,F.time=Sr(q))},get state(){return C},play:X,pause:()=>{C="paused",S=q},stop:()=>{y=!0,C!=="idle"&&(C="idle",c&&c(),re())},cancel:()=>{I!==null&&te(I),re()},complete:()=>{C="finished"},sample:N=>(A=0,te(N))};return F}function dO(t){let e;return()=>(e===void 0&&(e=t()),e)}const pO=dO(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),mO=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Gu=10,gO=2e4,yO=(t,e)=>e.type==="spring"||t==="backgroundColor"||!BS(e.ease);function _O(t,e,{onUpdate:n,onComplete:r,...i}){if(!(pO()&&mO.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const d=()=>{l=new Promise(x=>{a=x})};d();let{keyframes:u,duration:f=300,ease:p,times:y}=i;if(yO(e,i)){const x=oh({...i,repeat:0,delay:0});let P={done:!1,value:u[0]};const R=[];let O=0;for(;!P.done&&O<gO;)P=x.sample(O),R.push(P.value),O+=Gu;y=void 0,u=R,f=O-Gu,p="linear"}const m=PN(t.owner.current,e,u,{...i,duration:f,ease:p,times:y}),w=()=>{c=!1,m.cancel()},_=()=>{c=!0,Ne.update(w),a(),d()};return m.onfinish=()=>{c||(t.set(IN(u,i)),r&&r(),_())},{then(x,P){return l.then(x,P)},attachTimeline(x){return m.timeline=x,m.onfinish=null,nt},get time(){return Sr(m.currentTime||0)},set time(x){m.currentTime=ss(x)},get speed(){return m.playbackRate},set speed(x){m.playbackRate=x},get duration(){return Sr(f)},play:()=>{o||(m.play(),Vr(w))},pause:()=>m.pause(),stop:()=>{if(o=!0,m.playState==="idle")return;const{currentTime:x}=m;if(x){const P=oh({...i,autoplay:!1});t.setWithVelocity(P.sample(x-Gu).value,P.sample(x).value,Gu)}_()},complete:()=>{c||m.finish()},cancel:_}}function vO({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:nt,pause:nt,stop:nt,then:s=>(s(),Promise.resolve()),cancel:nt,complete:nt});return e?oh({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const wO={type:"spring",stiffness:500,damping:25,restSpeed:10},TO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),xO={type:"keyframes",duration:.8},EO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SO=(t,{keyframes:e})=>e.length>2?xO:xs.has(t)?t.startsWith("scale")?TO(e[1]):wO:EO,Zp=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Si.test(e)||e==="0")&&!e.startsWith("url(")),AO=new Set(["brightness","contrast","saturate","opacity"]);function CO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(nf)||[];if(!r)return t;const i=n.replace(r,"");let s=AO.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const PO=/([a-z-]*)\(.*?\)/g,Jp={...Si,getAnimatableNone:t=>{const e=t.match(PO);return e?e.map(CO).join(" "):t}},IO={...ES,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:Jp,WebkitFilter:Jp},my=t=>IO[t];function cA(t,e){let n=my(t);return n!==Jp&&(n=Si),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hA=t=>/^0[^.\s]+$/.test(t);function kO(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||hA(t)}function bO(t,e,n,r){const i=Zp(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),kO(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const d=l[c];s[d]=cA(e,a)}return s}function RO({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function gy(t,e){return t[e]||t.default||t}const VO={skipAnimations:!1},yy=(t,e,n,r={})=>i=>{const s=gy(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-ss(o);const l=bO(e,t,n,s),c=l[0],d=l[l.length-1],u=Zp(t,c),f=Zp(t,d);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(RO(s)||(p={...p,...SO(t,p)}),p.duration&&(p.duration=ss(p.duration)),p.repeatDelay&&(p.repeatDelay=ss(p.repeatDelay)),!u||!f||CN.current||s.type===!1||VO.skipAnimations)return vO(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=_O(e,t,p);if(y)return y}return oh(p)};function ah(t){return!!(ln(t)&&t.add)}const fA=t=>/^\-?\d*\.?\d+$/.test(t);function _y(t,e){t.indexOf(e)===-1&&t.push(e)}function vy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class wy{constructor(){this.subscriptions=[]}add(e){return _y(this.subscriptions,e),()=>vy(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MO=t=>!isNaN(parseFloat(t));class DO{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Dt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ne.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ne.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=MO(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wy);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ne.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?aA(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vo(t,e){return new DO(t,e)}const dA=t=>e=>e.test(t),NO={test:t=>t==="auto",parse:t=>t},pA=[Es,le,ur,zr,$D,UD,NO],wa=t=>pA.find(dA(t)),OO=[...pA,$t,Si],FO=t=>OO.find(dA(t));function LO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Vo(n))}function jO(t,e){const n=sf(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=nN(s[o]);LO(t,o,a)}}function BO(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),d!=null&&(typeof d=="string"&&(fA(d)||hA(d))?d=parseFloat(d):!FO(d)&&Si.test(c)&&(d=cA(l,c)),t.addValue(l,Vo(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function UO(t,e){return e?(e[t]||e.default||e).from:void 0}function $O(t,e,n){const r={};for(const i in t){const s=UO(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function zO({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function WO(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function mA(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const f=t.getValue(u),p=a[u];if(!f||p===void 0||d&&zO(d,u))continue;const y={delay:n,elapsed:0,...gy(s||{},u)};if(window.HandoffAppearAnimations){const _=t.getProps()[gS];if(_){const v=window.HandoffAppearAnimations(_,u,f,Ne);v!==null&&(y.elapsed=v,y.isHandoff=!0)}}let m=!y.isHandoff&&!WO(f,p);if(y.type==="spring"&&(f.getVelocity()||y.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(yy(u,f,p,t.shouldReduceMotion&&xs.has(u)?{type:!1}:y));const w=f.animation;ah(l)&&(l.add(u),w.then(()=>l.remove(u))),c.push(w)}return o&&Promise.all(c).then(()=>{o&&jO(t,o)}),c}function em(t,e,n={}){const r=sf(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(mA(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:u}=i;return HO(t,e,c+l,d,u,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function HO(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(qO).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(em(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function qO(t,e){return t.sortNodePosition(e)}function GO(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>em(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=em(t,e,n);else{const i=typeof e=="function"?sf(t,e,n.custom):e;r=Promise.all(mA(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const KO=[...ty].reverse(),QO=ty.length;function XO(t){return e=>Promise.all(e.map(({animation:n,options:r})=>GO(t,n,r)))}function YO(t){let e=XO(t);const n=JO();let r=!0;const i=(l,c)=>{const d=sf(t,c);if(d){const{transition:u,transitionEnd:f,...p}=d;l={...l,...p,...f}}return l};function s(l){e=l(t)}function o(l,c){const d=t.getProps(),u=t.getVariantContext(!0)||{},f=[],p=new Set;let y={},m=1/0;for(let _=0;_<QO;_++){const v=KO[_],x=n[v],P=d[v]!==void 0?d[v]:u[v],R=Rl(P),O=v===c?x.isActive:null;O===!1&&(m=_);let C=P===u[v]&&P!==d[v]&&R;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...y},!x.isActive&&O===null||!P&&!x.prevProp||ef(P)||typeof P=="boolean")continue;let A=ZO(x.prevProp,P)||v===c&&x.isActive&&!C&&R||_>m&&R,I=!1;const V=Array.isArray(P)?P:[P];let M=V.reduce(i,{});O===!1&&(M={});const{prevResolvedValues:b={}}=x,q={...b,...M},te=Q=>{A=!0,p.has(Q)&&(I=!0,p.delete(Q)),x.needsAnimating[Q]=!0};for(const Q in q){const re=M[Q],z=b[Q];if(y.hasOwnProperty(Q))continue;let X=!1;rh(re)&&rh(z)?X=!LS(re,z):X=re!==z,X?re!==void 0?te(Q):p.add(Q):re!==void 0&&p.has(Q)?te(Q):x.protectedKeys[Q]=!0}x.prevProp=P,x.prevResolvedValues=M,x.isActive&&(y={...y,...M}),r&&t.blockInitialAnimation&&(A=!1),A&&(!C||I)&&f.push(...V.map(Q=>({animation:Q,options:{type:v,...l}})))}if(p.size){const _={};p.forEach(v=>{const x=t.getBaseTarget(v);x!==void 0&&(_[v]=x)}),f.push({animation:_})}let w=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(f):Promise.resolve()}function a(l,c,d){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var y;return(y=p.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),n[l].isActive=c;const f=o(d,l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function ZO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LS(e,t):!1}function ji(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JO(){return{animate:ji(!0),whileInView:ji(),whileHover:ji(),whileTap:ji(),whileDrag:ji(),whileFocus:ji(),exit:ji()}}class eF extends Vi{constructor(e){super(e),e.animationState||(e.animationState=YO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ef(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let tF=0;class nF extends Vi{constructor(){super(...arguments),this.id=tF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const rF={animation:{Feature:eF},exit:{Feature:nF}},aw=(t,e)=>Math.abs(t-e);function iF(t,e){const n=aw(t.x,e.x),r=aw(t.y,e.y);return Math.sqrt(n**2+r**2)}class gA{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=vd(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=iF(u.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:y}=u,{timestamp:m}=Dt;this.history.push({...y,timestamp:m});const{onStart:w,onMove:_}=this.handlers;f||(w&&w(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=_d(f,this.transformPagePoint),Ne.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=vd(u.type==="pointercancel"?this.lastMoveEventInfo:_d(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(u,w),y&&y(u,w)},!MS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=rf(e),a=_d(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Dt;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,vd(a,this.history)),this.removeListeners=pi(Er(this.contextWindow,"pointermove",this.handlePointerMove),Er(this.contextWindow,"pointerup",this.handlePointerUp),Er(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vr(this.updatePoint)}}function _d(t,e){return e?{point:e(t.point)}:t}function lw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vd({point:t},e){return{point:t,delta:lw(t,yA(e)),offset:lw(t,sF(e)),velocity:oF(e,.1)}}function sF(t){return t[0]}function yA(t){return t[t.length-1]}function oF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=yA(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ss(e)));)n--;if(!r)return{x:0,y:0};const s=Sr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function En(t){return t.max-t.min}function tm(t,e=0,n=.01){return Math.abs(t-e)<=n}function uw(t,e,n,r=.5){t.origin=r,t.originPoint=We(e.min,e.max,t.origin),t.scale=En(n)/En(e),(tm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=We(n.min,n.max,t.origin)-t.originPoint,(tm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Xa(t,e,n,r){uw(t.x,e.x,n.x,r?r.originX:void 0),uw(t.y,e.y,n.y,r?r.originY:void 0)}function cw(t,e,n){t.min=n.min+e.min,t.max=t.min+En(e)}function aF(t,e,n){cw(t.x,e.x,n.x),cw(t.y,e.y,n.y)}function hw(t,e,n){t.min=e.min-n.min,t.max=t.min+En(e)}function Ya(t,e,n){hw(t.x,e.x,n.x),hw(t.y,e.y,n.y)}function lF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?We(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?We(n,t,r.max):Math.min(t,n)),t}function fw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uF(t,{top:e,left:n,bottom:r,right:i}){return{x:fw(t.x,n,i),y:fw(t.y,e,r)}}function dw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function cF(t,e){return{x:dw(t.x,e.x),y:dw(t.y,e.y)}}function hF(t,e){let n=.5;const r=En(t),i=En(e);return i>r?n=Ml(e.min,e.max-r,t.min):r>i&&(n=Ml(t.min,t.max-i,e.min)),Ei(0,1,n)}function fF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nm=.35;function dF(t=nm){return t===!1?t=0:t===!0&&(t=nm),{x:pw(t,"left","right"),y:pw(t,"top","bottom")}}function pw(t,e,n){return{min:mw(t,e),max:mw(t,n)}}function mw(t,e){return typeof t=="number"?t:t[e]||0}const gw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ys=()=>({x:gw(),y:gw()}),yw=()=>({min:0,max:0}),it=()=>({x:yw(),y:yw()});function Rn(t){return[t("x"),t("y")]}function _A({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function pF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function mF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function wd(t){return t===void 0||t===1}function rm({scale:t,scaleX:e,scaleY:n}){return!wd(t)||!wd(e)||!wd(n)}function Hi(t){return rm(t)||vA(t)||t.z||t.rotate||t.rotateX||t.rotateY}function vA(t){return _w(t.x)||_w(t.y)}function _w(t){return t&&t!=="0%"}function lh(t,e,n){const r=t-n,i=e*r;return n+i}function vw(t,e,n,r,i){return i!==void 0&&(t=lh(t,i,r)),lh(t,n,r)+e}function im(t,e=0,n=1,r,i){t.min=vw(t.min,e,n,r,i),t.max=vw(t.max,e,n,r,i)}function wA(t,{x:e,y:n}){im(t.x,e.translate,e.scale,e.originPoint),im(t.y,n.translate,n.scale,n.originPoint)}function gF(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Zs(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,wA(t,o)),r&&Hi(s.latestValues)&&Zs(t,s.latestValues))}e.x=ww(e.x),e.y=ww(e.y)}function ww(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function qr(t,e){t.min=t.min+e,t.max=t.max+e}function Tw(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=We(t.min,t.max,s);im(t,e[n],e[r],o,e.scale)}const yF=["x","scaleX","originX"],_F=["y","scaleY","originY"];function Zs(t,e){Tw(t.x,e,yF),Tw(t.y,e,_F)}function TA(t,e){return _A(mF(t.getBoundingClientRect(),e))}function vF(t,e,n){const r=TA(t,n),{scroll:i}=e;return i&&(qr(r.x,i.offset.x),qr(r.y,i.offset.y)),r}const xA=({current:t})=>t?t.ownerDocument.defaultView:null,wF=new WeakMap;class TF{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=it(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rf(d,"page").point)},s=(d,u)=>{const{drag:f,dragPropagation:p,onDragStart:y}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=NS(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rn(w=>{let _=this.getAxisMotionValue(w).get()||0;if(ur.test(_)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[w];x&&(_=En(x)*(parseFloat(_)/100))}}this.originPoint[w]=_}),y&&Ne.update(()=>y(d,u),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(d,u)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:y,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=u;if(p&&this.currentDirection===null){this.currentDirection=xF(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",u.point,w),this.updateAxis("y",u.point,w),this.visualElement.render(),m&&m(d,u)},a=(d,u)=>this.stop(d,u),l=()=>Rn(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new gA(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:xA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ne.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ku(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=lF(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Qs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=uF(i.layoutBox,n):this.constraints=!1,this.elastic=dF(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Rn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=fF(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Qs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=vF(r,i.root,this.visualElement.getTransformPagePoint());let o=cF(i.layout.layoutBox,s);if(n){const a=n(pF(o));this.hasMutatedConstraints=!!a,a&&(o=_A(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Rn(d=>{if(!Ku(d,n,this.currentDirection))return;let u=l&&l[d]||{};o&&(u={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(yy(e,r,0,n))}stopAnimation(){Rn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rn(n=>{const{drag:r}=this.getProps();if(!Ku(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-We(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Qs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=hF({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rn(o=>{if(!Ku(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(We(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;wF.set(this.visualElement,this);const e=this.visualElement.current,n=Er(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Qs(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Tr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Rn(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=l[d].translate,u.set(u.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=nm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ku(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function xF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class EF extends Vi{constructor(e){super(e),this.removeGroupControls=nt,this.removeListeners=nt,this.controls=new TF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nt}unmount(){this.removeGroupControls(),this.removeListeners()}}const xw=t=>(e,n)=>{t&&Ne.update(()=>t(e,n))};class SF extends Vi{constructor(){super(...arguments),this.removePointerDownListener=nt}onPointerDown(e){this.session=new gA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:xw(e),onStart:xw(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ne.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Er(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function AF(){const t=D.useContext(Zh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=D.useId();return D.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const mc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ew(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ta={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=Ew(t,e.target.x),r=Ew(t,e.target.y);return`${n}% ${r}%`}},CF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Si.parse(t);if(i.length>5)return r;const s=Si.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=We(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class PF extends _h.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;DD(IF),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ne.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function EA(t){const[e,n]=AF(),r=D.useContext(ry);return _h.createElement(PF,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(_S),isPresent:e,safeToRemove:n})}const IF={borderRadius:{...Ta,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ta,borderTopRightRadius:Ta,borderBottomLeftRadius:Ta,borderBottomRightRadius:Ta,boxShadow:CF},SA=["TopLeft","TopRight","BottomLeft","BottomRight"],kF=SA.length,Sw=t=>typeof t=="string"?parseFloat(t):t,Aw=t=>typeof t=="number"||le.test(t);function bF(t,e,n,r,i,s){i?(t.opacity=We(0,n.opacity!==void 0?n.opacity:1,RF(r)),t.opacityExit=We(e.opacity!==void 0?e.opacity:1,0,VF(r))):s&&(t.opacity=We(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<kF;o++){const a=`border${SA[o]}Radius`;let l=Cw(e,a),c=Cw(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Aw(l)===Aw(c)?(t[a]=Math.max(We(Sw(l),Sw(c),r),0),(ur.test(c)||ur.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=We(e.rotate||0,n.rotate||0,r))}function Cw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const RF=AA(0,.5,GS),VF=AA(.5,.95,nt);function AA(t,e,n){return r=>r<t?0:r>e?1:n(Ml(t,e,r))}function Pw(t,e){t.min=e.min,t.max=e.max}function kn(t,e){Pw(t.x,e.x),Pw(t.y,e.y)}function Iw(t,e,n,r,i){return t-=e,t=lh(t,1/n,r),i!==void 0&&(t=lh(t,1/i,r)),t}function MF(t,e=0,n=1,r=.5,i,s=t,o=t){if(ur.test(e)&&(e=parseFloat(e),e=We(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=We(s.min,s.max,r);t===s&&(a-=e),t.min=Iw(t.min,e,n,a,i),t.max=Iw(t.max,e,n,a,i)}function kw(t,e,[n,r,i],s,o){MF(t,e[n],e[r],e[i],e.scale,s,o)}const DF=["x","scaleX","originX"],NF=["y","scaleY","originY"];function bw(t,e,n,r){kw(t.x,e,DF,n?n.x:void 0,r?r.x:void 0),kw(t.y,e,NF,n?n.y:void 0,r?r.y:void 0)}function Rw(t){return t.translate===0&&t.scale===1}function CA(t){return Rw(t.x)&&Rw(t.y)}function OF(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function PA(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Vw(t){return En(t.x)/En(t.y)}class FF{constructor(){this.members=[]}add(e){_y(this.members,e),e.scheduleRender()}remove(e){if(vy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Mw(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const LF=(t,e)=>t.depth-e.depth;class jF{constructor(){this.children=[],this.isDirty=!1}add(e){_y(this.children,e),this.isDirty=!0}remove(e){vy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(LF),this.isDirty=!1,this.children.forEach(e)}}function BF(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Vr(r),t(s-e))};return Ne.read(r,!0),()=>Vr(r)}function UF(t){window.MotionDebug&&window.MotionDebug.record(t)}function $F(t){return t instanceof SVGElement&&t.tagName!=="svg"}function zF(t,e,n){const r=ln(t)?t:Vo(t);return r.start(yy("",r,e,n)),r.animation}const Dw=["","X","Y","Z"],WF={visibility:"hidden"},Nw=1e3;let HF=0;const qi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function IA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=HF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qi.totalNodes=qi.resolvedTargetDeltas=qi.recalculatedProjection=0,this.nodes.forEach(KF),this.nodes.forEach(JF),this.nodes.forEach(eL),this.nodes.forEach(QF),UF(qi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new jF)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new wy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$F(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let u;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=BF(f,250),mc.hasAnimatedSinceResize&&(mc.hasAnimatedSinceResize=!1,this.nodes.forEach(Fw))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||sL,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=d.getProps(),v=!this.targetLayout||!PA(this.targetLayout,y)||p,x=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,x);const P={...gy(m,"layout"),onPlay:w,onComplete:_};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else f||Fw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tL),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ow);return}this.isUpdating||this.nodes.forEach(YF),this.isUpdating=!1,this.nodes.forEach(ZF),this.nodes.forEach(qF),this.nodes.forEach(GF),this.clearAllSnapshots();const a=performance.now();Dt.delta=Ei(0,1e3/60,a-Dt.timestamp),Dt.timestamp=a,Dt.isProcessing=!0,cd.update.process(Dt),cd.preRender.process(Dt),cd.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(XF),this.sharedNodes.forEach(nL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=it(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!CA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Hi(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),oL(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return it();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(qr(a.x,l.offset.x),qr(a.y,l.offset.y)),a}removeElementScroll(o){const a=it();kn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:u}=c;if(c!==this.root&&d&&u.layoutScroll){if(d.isRoot){kn(a,o);const{scroll:f}=this.root;f&&(qr(a.x,-f.offset.x),qr(a.y,-f.offset.y))}qr(a.x,d.offset.x),qr(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=it();kn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Zs(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Hi(d.latestValues)&&Zs(l,d.latestValues)}return Hi(this.latestValues)&&Zs(l,this.latestValues),l}removeTransform(o){const a=it();kn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Hi(c.latestValues))continue;rm(c.latestValues)&&c.updateSnapshot();const d=it(),u=c.measurePageBox();kn(d,u),bw(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Hi(this.latestValues)&&bw(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=Dt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=it(),this.relativeTargetOrigin=it(),Ya(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=it(),this.targetWithTransforms=it()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kn(this.target,this.layout.layoutBox),wA(this.target,this.targetDelta)):kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=it(),this.relativeTargetOrigin=it(),Ya(this.relativeTargetOrigin,this.target,p.target),kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rm(this.parent.latestValues)||vA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;kn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;gF(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Ys(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ys(),this.projectionDeltaWithTransform=Ys());const m=this.projectionTransform;Xa(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=Mw(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),qi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},u=Ys();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=it(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,m=p!==y,w=this.getStack(),_=!w||w.members.length<=1,v=!!(m&&!_&&this.options.crossfade===!0&&!this.path.some(iL));this.animationProgress=0;let x;this.mixTargetDelta=P=>{const R=P/1e3;Lw(u.x,o.x,R),Lw(u.y,o.y,R),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ya(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rL(this.relativeTarget,this.relativeTargetOrigin,f,R),x&&OF(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=it()),kn(x,this.relativeTarget)),m&&(this.animationValues=d,bF(d,c,this.latestValues,R,v,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(()=>{mc.hasAnimatedSinceResize=!0,this.currentAnimation=zF(0,Nw,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Nw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&kA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||it();const u=En(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+u;const f=En(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}kn(a,l),Zs(a,d),Xa(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new FF),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<Dw.length;d++){const u="rotate"+Dw[d];l[u]&&(c[u]=l[u],o.setStaticValue(u,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return WF;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=pc(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=pc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Hi(this.latestValues)&&(m.transform=d?d({},""):"none",this.hasProjected=!1),m}const f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=Mw(this.projectionDeltaWithTransform,this.treeScale,f),d&&(c.transform=d(f,c.transform));const{x:p,y}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,u.animationValues?c.opacity=u===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in th){if(f[m]===void 0)continue;const{correct:w,applyTo:_}=th[m],v=c.transform==="none"?f[m]:w(f[m],u);if(_){const x=_.length;for(let P=0;P<x;P++)c[_[P]]=v}else c[m]=v}return this.options.layoutId&&(c.pointerEvents=u===this?pc(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Ow),this.root.sharedNodes.clear()}}}function qF(t){t.updateLayout()}function GF(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Rn(u=>{const f=o?n.measuredBox[u]:n.layoutBox[u],p=En(f);f.min=r[u].min,f.max=f.min+p}):kA(s,n.layoutBox,r)&&Rn(u=>{const f=o?n.measuredBox[u]:n.layoutBox[u],p=En(r[u]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+p)});const a=Ys();Xa(a,r,n.layoutBox);const l=Ys();o?Xa(l,t.applyTransform(i,!0),n.measuredBox):Xa(l,r,n.layoutBox);const c=!CA(a);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:p}=u;if(f&&p){const y=it();Ya(y,n.layoutBox,f.layoutBox);const m=it();Ya(m,r,p.layoutBox),PA(y,m)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=y,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function KF(t){qi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function QF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XF(t){t.clearSnapshot()}function Ow(t){t.clearMeasurements()}function YF(t){t.isLayoutDirty=!1}function ZF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Fw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function JF(t){t.resolveTargetDelta()}function eL(t){t.calcProjection()}function tL(t){t.resetRotation()}function nL(t){t.removeLeadSnapshot()}function Lw(t,e,n){t.translate=We(e.translate,0,n),t.scale=We(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function jw(t,e,n,r){t.min=We(e.min,n.min,r),t.max=We(e.max,n.max,r)}function rL(t,e,n,r){jw(t.x,e.x,n.x,r),jw(t.y,e.y,n.y,r)}function iL(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const sL={duration:.45,ease:[.4,0,.1,1]},Bw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Uw=Bw("applewebkit/")&&!Bw("chrome/")?Math.round:nt;function $w(t){t.min=Uw(t.min),t.max=Uw(t.max)}function oL(t){$w(t.x),$w(t.y)}function kA(t,e,n){return t==="position"||t==="preserve-aspect"&&!tm(Vw(e),Vw(n),.2)}const aL=IA({attachResizeListener:(t,e)=>Tr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Td={current:void 0},bA=IA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Td.current){const t=new aL({});t.mount(window),t.setOptions({layoutScroll:!0}),Td.current=t}return Td.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lL={pan:{Feature:SF},drag:{Feature:EF,ProjectionNode:bA,MeasureLayout:EA}},uL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cL(t){const e=uL.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function sm(t,e,n=1){const[r,i]=cL(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return fA(o)?parseFloat(o):o}else return Kp(i)?sm(i,e,n+1):i}function hL(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Kp(s))return;const o=sm(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Kp(s))continue;const o=sm(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const fL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),RA=t=>fL.has(t),dL=t=>Object.keys(t).some(RA),zw=t=>t===Es||t===le,Ww=(t,e)=>parseFloat(t.split(", ")[e]),Hw=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Ww(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?Ww(s[1],t):0}},pL=new Set(["x","y","z"]),mL=Jl.filter(t=>!pL.has(t));function gL(t){const e=[];return mL.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Mo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Hw(4,13),y:Hw(5,14)};Mo.translateX=Mo.x;Mo.translateY=Mo.y;const yL=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Mo[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),t[c]=Mo[c](l,s)}),t},_L=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(RA);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],u=wa(d);const f=e[l];let p;if(rh(f)){const y=f.length,m=f[0]===null?1:0;d=f[m],u=wa(d);for(let w=m;w<y&&f[w]!==null;w++)p?hy(wa(f[w])===p):p=wa(f[w])}else p=wa(f);if(u!==p)if(zw(u)&&zw(p)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&p===le&&(e[l]=f.map(parseFloat))}else u!=null&&u.transform&&(p!=null&&p.transform)&&(d===0||f===0)?d===0?c.set(p.transform(d)):e[l]=u.transform(f):(o||(s=gL(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=yL(e,t,a);return s.length&&s.forEach(([d,u])=>{t.getValue(d).set(u)}),t.render(),Jh&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function vL(t,e,n,r){return dL(e)?_L(t,e,n,r):{target:e,transitionEnd:r}}const wL=(t,e,n,r)=>{const i=hL(t,e,r);return e=i.target,r=i.transitionEnd,vL(t,e,n,r)},om={current:null},VA={current:!1};function TL(){if(VA.current=!0,!!Jh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>om.current=t.matches;t.addListener(e),e()}else om.current=!1}function xL(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(ln(s))t.addValue(i,s),ah(r)&&r.add(i);else if(ln(o))t.addValue(i,Vo(s,{owner:t})),ah(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Vo(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const qw=new WeakMap,MA=Object.keys(Vl),EL=MA.length,Gw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],SL=ny.length;class AL{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ne.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=tf(n),this.isVariantNode=yS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const u in d){const f=d[u];a[u]!==void 0&&ln(f)&&(f.set(a[u],!1),ah(c)&&c.add(u))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,qw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),VA.current||TL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:om.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){qw.delete(this.current),this.projection&&this.projection.unmount(),Vr(this.notifyUpdate),Vr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=xs.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ne.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<EL;l++){const c=MA[l],{isEnabled:d,Feature:u,ProjectionNode:f,MeasureLayout:p}=Vl[c];f&&(o=f),d(n)&&(!this.features[c]&&u&&(this.features[c]=new u(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:u,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||u&&Qs(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):it()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Gw.length;r++){const i=Gw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=xL(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<SL;r++){const i=ny[r],s=this.props[i];(Rl(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Vo(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=cy(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ln(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DA extends AL{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=$O(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){BO(this,r,o);const a=wL(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function CL(t){return window.getComputedStyle(t)}class PL extends DA{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(xs.has(n)){const r=my(n);return r&&r.default||0}else{const r=CL(e),i=(TS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return TA(e,n)}build(e,n,r,i){sy(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return uy(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ln(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){PS(e,n,r,i)}}class IL extends DA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(xs.has(n)){const r=my(n);return r&&r.default||0}return n=IS.has(n)?n:ey(n),e.getAttribute(n)}measureInstanceViewportBox(){return it()}scrapeMotionValuesFromProps(e,n){return bS(e,n)}build(e,n,r,i){ay(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){kS(e,n,r,i)}mount(e){this.isSVGTag=ly(e.tagName),super.mount(e)}}const kL=(t,e)=>iy(t)?new IL(e,{enableHardwareAcceleration:!1}):new PL(e,{enableHardwareAcceleration:!0}),bL={layout:{ProjectionNode:bA,MeasureLayout:EA}},RL={...rF,...EN,...lL,...bL},Pe=VD((t,e)=>cN(t,e,RL,kL));function NA(){const t=D.useRef(!1);return Jg(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function VL(){const t=NA(),[e,n]=D.useState(0),r=D.useCallback(()=>{t.current&&n(e+1)},[e]);return[D.useCallback(()=>Ne.postRender(r),[r]),e]}class ML extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DL({children:t,isPresent:e}){const n=D.useId(),r=D.useRef(null),i=D.useRef({width:0,height:0,top:0,left:0});return D.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),D.createElement(ML,{isPresent:e,childRef:r,sizeRef:i},D.cloneElement(t,{ref:r}))}const xd=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=RS(NL),l=D.useId(),c=D.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:d=>{a.set(d,!0);for(const u of a.values())if(!u)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),s?void 0:[n]);return D.useMemo(()=>{a.forEach((d,u)=>a.set(u,!1))},[n]),D.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=D.createElement(DL,{isPresent:n},t)),D.createElement(Zh.Provider,{value:c},t)};function NL(){return new Map}function OL(t){return D.useEffect(()=>()=>t(),[])}const Gi=t=>t.key||"";function FL(t,e){t.forEach(n=>{const r=Gi(n);e.set(r,n)})}function LL(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const of=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=D.useContext(ry).forceRender||VL()[0],l=NA(),c=LL(t);let d=c;const u=D.useRef(new Map).current,f=D.useRef(d),p=D.useRef(new Map).current,y=D.useRef(!0);if(Jg(()=>{y.current=!1,FL(c,p),f.current=d}),OL(()=>{y.current=!0,p.clear(),u.clear()}),y.current)return D.createElement(D.Fragment,null,d.map(v=>D.createElement(xd,{key:Gi(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},v)));d=[...d];const m=f.current.map(Gi),w=c.map(Gi),_=m.length;for(let v=0;v<_;v++){const x=m[v];w.indexOf(x)===-1&&!u.has(x)&&u.set(x,void 0)}return o==="wait"&&u.size&&(d=[]),u.forEach((v,x)=>{if(w.indexOf(x)!==-1)return;const P=p.get(x);if(!P)return;const R=m.indexOf(x);let O=v;if(!O){const C=()=>{u.delete(x);const S=Array.from(p.keys()).filter(A=>!w.includes(A));if(S.forEach(A=>p.delete(A)),f.current=c.filter(A=>{const I=Gi(A);return I===x||S.includes(I)}),!u.size){if(l.current===!1)return;a(),r&&r()}};O=D.createElement(xd,{key:Gi(P),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:s,mode:o},P),u.set(x,O)}d.splice(R,0,O)}),d=d.map(v=>{const x=v.key;return u.has(x)?v:D.createElement(xd,{key:Gi(v),isPresent:!0,presenceAffectsLayout:s,mode:o},v)}),D.createElement(D.Fragment,null,u.size?d:d.map(v=>D.cloneElement(v)))};let Ed=null;function OA(){return Ed||(Ed=new AudioContext),Ed}function jL(){const t=OA();t.state==="suspended"&&t.resume()}function Va(t,e=.3){try{const n=OA();if(n.state==="suspended")return;const r=n.createGain();switch(r.connect(n.destination),r.gain.value=e,t){case"vote":BL(n,r);break;case"tick":UL(n,r);break;case"victory":$L(n,r);break;case"error":zL(n,r);break;case"whoosh":WL(n,r);break;case"chime":HL(n,r);break;case"buzz":qL(n,r);break}}catch(n){console.debug("Sound playback failed:",n)}}function BL(t,e){const n=t.createOscillator();n.type="sine",n.frequency.setValueAtTime(800,t.currentTime),n.frequency.exponentialRampToValueAtTime(1200,t.currentTime+.05),n.frequency.exponentialRampToValueAtTime(600,t.currentTime+.1),e.gain.setValueAtTime(.4,t.currentTime),e.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),n.connect(e),n.start(t.currentTime),n.stop(t.currentTime+.15)}function UL(t,e){const n=t.createOscillator();n.type="square",n.frequency.value=1e3,e.gain.setValueAtTime(.15,t.currentTime),e.gain.exponentialRampToValueAtTime(.01,t.currentTime+.05),n.connect(e),n.start(t.currentTime),n.stop(t.currentTime+.05)}function $L(t,e){[523.25,659.25,783.99,1046.5].forEach((r,i)=>{const s=t.createOscillator();s.type="triangle",s.frequency.value=r;const o=t.createGain();o.connect(e),o.gain.setValueAtTime(0,t.currentTime+i*.12),o.gain.linearRampToValueAtTime(.3,t.currentTime+i*.12+.02),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+i*.12+.3),s.connect(o),s.start(t.currentTime+i*.12),s.stop(t.currentTime+i*.12+.3)})}function zL(t,e){const n=t.createOscillator();n.type="sawtooth",n.frequency.value=150,e.gain.setValueAtTime(.2,t.currentTime),e.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),n.connect(e),n.start(t.currentTime),n.stop(t.currentTime+.2)}function WL(t,e){const n=t.createBufferSource(),r=t.sampleRate*.3,i=t.createBuffer(1,r,t.sampleRate),s=i.getChannelData(0);for(let a=0;a<r;a++)s[a]=Math.random()*2-1;n.buffer=i;const o=t.createBiquadFilter();o.type="bandpass",o.frequency.setValueAtTime(500,t.currentTime),o.frequency.exponentialRampToValueAtTime(2e3,t.currentTime+.15),o.frequency.exponentialRampToValueAtTime(500,t.currentTime+.3),o.Q.value=.5,e.gain.setValueAtTime(.01,t.currentTime),e.gain.linearRampToValueAtTime(.15,t.currentTime+.1),e.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),n.connect(o),o.connect(e),n.start(t.currentTime),n.stop(t.currentTime+.3)}function HL(t,e){[880,1108.73].forEach((r,i)=>{const s=t.createOscillator();s.type="sine",s.frequency.value=r;const o=t.createGain();o.connect(e),o.gain.setValueAtTime(.3,t.currentTime+i*.1),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+i*.1+.4),s.connect(o),s.start(t.currentTime+i*.1),s.stop(t.currentTime+i*.1+.4)})}function qL(t,e){const n=t.createOscillator();n.type="square",n.frequency.value=220;const r=t.createOscillator();r.frequency.value=20;const i=t.createGain();i.gain.value=50,r.connect(i),i.connect(n.frequency),e.gain.setValueAtTime(.2,t.currentTime),e.gain.setValueAtTime(.2,t.currentTime+.3),e.gain.exponentialRampToValueAtTime(.01,t.currentTime+.5),n.connect(e),r.start(t.currentTime),n.start(t.currentTime),n.stop(t.currentTime+.5),r.stop(t.currentTime+.5)}const Ss=t=>({"--icon-primary":"var(--tmp-icon-primary, #e84393)","--icon-secondary":"var(--tmp-icon-secondary, #5dade2)",...t});function GL({size:t=48,className:e="",style:n,animated:r=!1}){return E.jsxs("svg",{width:t,height:t,viewBox:"0 0 100 100",className:`tmp-icon tmp-d20 ${r?"tmp-icon-animated":""} ${e}`,style:Ss(n),"aria-label":"D20 die showing 1",children:[E.jsx("polygon",{points:"50,5 95,30 95,70 50,95 5,70 5,30",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("polygon",{points:"50,5 50,50 5,30",style:{fill:"var(--icon-primary)"},stroke:"currentColor",strokeWidth:"1.5"}),E.jsx("polygon",{points:"50,5 95,30 50,50",style:{fill:"var(--icon-secondary)",opacity:.8},stroke:"currentColor",strokeWidth:"1.5"}),E.jsx("polygon",{points:"50,50 95,30 95,70",style:{fill:"var(--icon-primary)",opacity:.9},stroke:"currentColor",strokeWidth:"1.5"}),E.jsx("polygon",{points:"50,50 95,70 50,95",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"1.5"}),E.jsx("polygon",{points:"50,50 50,95 5,70",style:{fill:"var(--icon-primary)"},stroke:"currentColor",strokeWidth:"1.5"}),E.jsx("polygon",{points:"50,50 5,70 5,30",style:{fill:"var(--icon-secondary)",opacity:.7},stroke:"currentColor",strokeWidth:"1.5"}),E.jsx("polygon",{points:"50,20 75,50 50,80 25,50",style:{fill:"var(--icon-primary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("text",{x:"50",y:"58",textAnchor:"middle",fontSize:"28",fontWeight:"bold",fontFamily:"sans-serif",fill:"currentColor",children:"1"})]})}function Kw({size:t=24,className:e="",style:n,animated:r=!0}){return E.jsxs("svg",{width:t,height:t,viewBox:"0 0 100 100",className:`tmp-icon tmp-voting-open ${r?"tmp-icon-pulse":""} ${e}`,style:Ss(n),"aria-label":"Voting Open",children:[E.jsx("circle",{cx:"50",cy:"50",r:"40",style:{fill:"var(--icon-primary)",opacity:.2}}),E.jsx("circle",{cx:"50",cy:"50",r:"30",style:{fill:"var(--icon-primary)",opacity:.3}}),E.jsx("path",{d:"M 20 80 L 45 45 L 48 48 L 23 83 Z",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"1"}),E.jsx("path",{d:"M 45 45 L 55 35 L 52 32 L 42 42 Z",style:{fill:"var(--icon-secondary)"}}),E.jsx("circle",{cx:"18",cy:"82",r:"5",style:{fill:"var(--icon-primary)"}}),E.jsx("path",{d:"M 80 80 L 55 45 L 52 48 L 77 83 Z",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"1"}),E.jsx("path",{d:"M 55 45 L 45 35 L 48 32 L 58 42 Z",style:{fill:"var(--icon-secondary)"}}),E.jsx("circle",{cx:"82",cy:"82",r:"5",style:{fill:"var(--icon-primary)"}}),E.jsx("circle",{cx:"50",cy:"45",r:"8",style:{fill:"var(--icon-primary)"}}),E.jsx("circle",{cx:"50",cy:"45",r:"4",fill:"#fff"})]})}function KL({size:t=24,className:e="",style:n}){return E.jsxs("svg",{width:t,height:t,viewBox:"0 0 100 100",className:`tmp-icon tmp-voting-closed ${e}`,style:Ss(n),"aria-label":"Voting Closed",children:[E.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"3",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("ellipse",{cx:"50",cy:"25",rx:"32",ry:"8",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("ellipse",{cx:"50",cy:"75",rx:"32",ry:"8",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("circle",{cx:"50",cy:"50",r:"15",style:{fill:"var(--icon-primary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("text",{x:"50",y:"56",textAnchor:"middle",fontSize:"18",fontWeight:"bold",fill:"currentColor",children:"1"})]})}function QL({size:t=24,className:e="",style:n}){return E.jsxs("svg",{width:t,height:t,viewBox:"0 0 100 100",className:`tmp-icon tmp-sound-on ${e}`,style:Ss(n),"aria-label":"Sound On",children:[E.jsx("path",{d:"M 15 40 L 35 35 L 35 65 L 15 60 Z",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("ellipse",{cx:"55",cy:"50",rx:"25",ry:"30",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("ellipse",{cx:"55",cy:"50",rx:"15",ry:"20",fill:"currentColor",opacity:"0.3"}),E.jsx("path",{d:"M 75 35 Q 90 50 75 65",fill:"none",style:{stroke:"var(--icon-primary)"},strokeWidth:"4",strokeLinecap:"round"}),E.jsx("path",{d:"M 82 25 Q 100 50 82 75",fill:"none",style:{stroke:"var(--icon-primary)",opacity:.7},strokeWidth:"3",strokeLinecap:"round"})]})}function XL({size:t=24,className:e="",style:n}){return E.jsxs("svg",{width:t,height:t,viewBox:"0 0 100 100",className:`tmp-icon tmp-sound-off ${e}`,style:Ss(n),"aria-label":"Sound Off",children:[E.jsx("path",{d:"M 15 40 L 35 35 L 35 65 L 15 60 Z",style:{fill:"var(--icon-secondary)",opacity:.5},stroke:"currentColor",strokeWidth:"2"}),E.jsx("ellipse",{cx:"55",cy:"50",rx:"25",ry:"30",style:{fill:"var(--icon-secondary)",opacity:.5},stroke:"currentColor",strokeWidth:"2"}),E.jsx("ellipse",{cx:"55",cy:"50",rx:"15",ry:"20",fill:"currentColor",opacity:"0.2"}),E.jsx("line",{x1:"70",y1:"30",x2:"95",y2:"70",style:{stroke:"var(--icon-primary)"},strokeWidth:"6",strokeLinecap:"round"}),E.jsx("line",{x1:"95",y1:"30",x2:"70",y2:"70",style:{stroke:"var(--icon-primary)"},strokeWidth:"6",strokeLinecap:"round"})]})}function YL({size:t=24,className:e="",style:n}){return E.jsxs("svg",{width:t,height:t,viewBox:"0 0 100 100",className:`tmp-icon tmp-warning ${e}`,style:Ss(n),"aria-label":"Warning",children:[E.jsx("path",{d:"M 40 15 L 40 30 L 25 50 L 25 80 Q 25 90 35 90 L 65 90 Q 75 90 75 80 L 75 50 L 60 30 L 60 15 Z",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("rect",{x:"38",y:"10",width:"24",height:"10",rx:"2",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("path",{d:"M 28 55 L 72 55 L 72 80 Q 72 87 65 87 L 35 87 Q 28 87 28 80 Z",style:{fill:"var(--icon-primary)",opacity:.7}}),E.jsx("path",{d:"M 55 25 L 60 40 L 52 55 L 62 75",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),E.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"#fff",opacity:"0.6"}),E.jsx("circle",{cx:"55",cy:"65",r:"3",fill:"#fff",opacity:"0.5"})]})}function ZL({size:t=24,className:e="",style:n}){return E.jsxs("svg",{width:t,height:t,viewBox:"0 0 100 100",className:`tmp-icon tmp-check ${e}`,style:Ss(n),"aria-label":"Confirmed",children:[E.jsx("circle",{cx:"50",cy:"50",r:"40",style:{fill:"var(--icon-primary)"},stroke:"currentColor",strokeWidth:"2"}),E.jsx("circle",{cx:"50",cy:"50",r:"35",style:{fill:"var(--icon-secondary)"},stroke:"currentColor",strokeWidth:"1"}),E.jsx("circle",{cx:"50",cy:"50",r:"25",style:{fill:"var(--icon-primary)"}}),E.jsx("path",{d:"M 30 50 L 45 65 L 72 35",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"})]})}const Sd="current-vote";function JL({config:t}){const[e,n]=D.useState({}),[r,i]=D.useState(!1),[s,o]=D.useState(null),[a,l]=D.useState(!0),[c,d]=D.useState(null),u=D.useRef(null),{question:f,options:p,isOpen:y,timer:m,startedAt:w,sessionId:_}=t||{},v=_?`voted-${_}`:`voted-${Sd}`,x=I=>{const V=p==null?void 0:p.find(b=>b.id===I);if(!V||!u.current)return;const M=document.createElement("div");M.textContent=V.emoji,M.style.cssText=`
      position: fixed;
      font-size: 3rem;
      z-index: 10000;
      pointer-events: none;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    `,M.classList.add("vote-fly-away"),document.body.appendChild(M),setTimeout(()=>M.remove(),700)};D.useEffect(()=>{const I=Un(Te(xe,"votes",Sd),V=>{if(V.exists()){const M=V.data();n(M.counts||{})}l(!1)},V=>{console.error("Vote listener error:",V),l(!1)});return()=>I()},[]),D.useEffect(()=>{const I=localStorage.getItem(v);I?(i(!0),o(I)):(i(!1),o(null))},[v]);const P=D.useRef(null);D.useEffect(()=>{if(!w||!m||!y){d(null);return}const I=()=>{const M=Math.floor((Date.now()-w)/1e3),b=Math.max(0,m-M);b<=10&&b>0&&b!==P.current&&Va("tick"),b===0&&P.current!==0&&Va("buzz"),P.current=b,d(b)};I();const V=setInterval(I,1e3);return()=>clearInterval(V)},[w,m,y]);const R=D.useCallback(async I=>{if(y&&(jL(),s!==I)){x(I);try{const V=Te(xe,"votes",Sd);r&&s?await bo(V,{[`counts.${s}`]:Wu(-1),[`counts.${I}`]:Wu(1)}):await bo(V,{[`counts.${I}`]:Wu(1),totalVotes:Wu(1)}),Va("vote"),localStorage.setItem(v,I),i(!0),o(I)}catch(V){console.error("Vote failed:",V),Va("error"),alert("Vote failed - please try again!")}}},[r,y,s,v]),O=Object.values(e).reduce((I,V)=>I+V,0),C=I=>O===0?100/((p==null?void 0:p.length)||2):(e[I]||0)/O*100,S=["left","right","center"];if(a)return E.jsx("div",{className:"vote-container",children:E.jsx("div",{className:"loading",children:"Loading..."})});const A=!y||c!==null&&c<=0;return E.jsxs("div",{className:"vote-container",ref:u,children:[E.jsx("h2",{children:f||"What should the party do?"}),c!==null&&c>0&&E.jsx(Pe.div,{className:"timer",animate:{scale:c<=10?[1,1.1,1]:1},transition:{repeat:c<=10?1/0:0,duration:1},children:E.jsxs("span",{className:c<=10?"urgent":"",children:[Math.floor(c/60),":",(c%60).toString().padStart(2,"0")]})}),A&&!r&&E.jsx("div",{className:"voting-closed-banner",children:"Voting has ended"}),E.jsx("div",{className:`vote-options ${(p==null?void 0:p.length)===3?"three-options":""}`,children:p==null?void 0:p.map((I,V)=>E.jsxs(Pe.button,{className:`vote-btn ${S[V]} ${s===I.id?"selected":""} ${A?"disabled":""}`,onClick:()=>!A&&R(I.id),whileHover:A?{}:{scale:1.03},whileTap:A?{}:{scale:.97},"aria-disabled":A,children:[E.jsx("span",{className:"emoji",children:I.emoji}),E.jsx("span",{className:"label",children:I.label}),r&&E.jsxs(Pe.span,{className:"count",initial:{opacity:0},animate:{opacity:1},children:[e[I.id]||0," votes"]}),s===I.id&&E.jsxs(Pe.span,{className:"your-vote",initial:{scale:0},animate:{scale:1},children:[E.jsx(ZL,{size:18})," Your vote"]})]},I.id))}),E.jsx("div",{className:"results-bar",children:p==null?void 0:p.map((I,V)=>E.jsx(Pe.div,{className:`bar-fill ${S[V]}`,initial:{width:`${100/((p==null?void 0:p.length)||2)}%`},animate:{width:`${C(I.id)}%`},transition:{type:"spring",stiffness:100,damping:20},children:C(I.id)>15&&E.jsxs("span",{className:"bar-label",children:[Math.round(C(I.id)),"%"]})},I.id))}),E.jsxs("p",{className:"total-votes",children:[O," adventurer",O!==1?"s have":" has"," voted"]}),E.jsx(of,{children:r&&!A&&E.jsx(Pe.p,{className:"voted-message",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:"Changed your mind? Tap another option! "})})]})}function e5({isAdmin:t=!1}){var f;const[e,n]=D.useState(null),[r,i]=D.useState(""),[s,o]=D.useState(!1),[a]=D.useState(()=>localStorage.getItem("audience-id")||Math.random().toString(36).substr(2,9));D.useEffect(()=>{localStorage.setItem("audience-id",a);const p=Un(Te(xe,"madlibs","current"),y=>{y.exists()?(n(y.data()),o(!1),i("")):n(null)});return()=>p()},[a]);const l=async()=>{if(!r.trim()||!e)return;const p=e.blanks[e.currentBlankIndex];try{await bo(Te(xe,"madlibs","current"),{[`submissions.${p}`]:Yg({word:r.trim(),userId:a,timestamp:Date.now()})}),o(!0)}catch(y){console.error("Failed to submit word:",y)}},c=p=>{p.key==="Enter"&&l()};if(!e||e.status==="idle")return E.jsxs("div",{className:"madlibs-container idle",children:[E.jsx("div",{className:"waiting-icon",children:""}),E.jsx("h2",{children:"Madlibs D&D"}),E.jsx("p",{children:"Waiting for the GM to start a madlib..."})]});const d=e.blanks[e.currentBlankIndex],u=((f=e.submissions)==null?void 0:f[d])||[];return e.status==="collecting"?E.jsxs("div",{className:"madlibs-container collecting",children:[E.jsx("h2",{children:"Fill in the blank!"}),E.jsx("div",{className:"template-preview",children:t5(e.template,e.winners,d)}),E.jsxs("div",{className:"current-blank",children:[E.jsx("span",{className:"blank-type",children:d}),E.jsxs("span",{className:"blank-hint",children:["(",r5(d),")"]})]}),s?E.jsxs("div",{className:"submitted-message",children:[E.jsx("span",{children:""})," Word submitted! Waiting for others..."]}):E.jsxs("div",{className:"submission-form",children:[E.jsx("input",{type:"text",value:r,onChange:p=>i(p.target.value),placeholder:`Enter a ${d.toLowerCase()}...`,maxLength:30,onKeyPress:c}),E.jsx("button",{onClick:l,disabled:!r.trim(),children:"Submit"})]}),E.jsxs("div",{className:"submission-count",children:[u.length," words submitted"]})]}):e.status==="revealing"?E.jsxs("div",{className:"madlibs-container revealing",children:[E.jsx("h2",{children:"And the word is..."}),E.jsx(Pe.div,{className:"winner-reveal",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",duration:.8},children:e.winners[d]})]}):e.status==="complete"?E.jsxs("div",{className:"madlibs-container complete",children:[E.jsx("h2",{children:"The Story"}),E.jsx(Pe.div,{className:"final-story",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:n5(e.template,e.winners)})]}):null}function t5(t,e,n){return t.split(/(\[[A-Z_]+\])/g).map((i,s)=>{const o=i.match(/\[([A-Z_]+)\]/);if(o){const a=o[1],l=e==null?void 0:e[a],c=a===n;return E.jsx("span",{className:`blank ${l?"filled":""} ${c?"current":""}`,children:l||`[${a}]`},s)}return E.jsx("span",{children:i},s)})}function n5(t,e){let n=t;return Object.entries(e).forEach(([r,i])=>{n=n.replace(`[${r}]`,i)}),n}function r5(t){return{ADJECTIVE:"describes something",NOUN:"person, place, or thing",VERB:"action word",ADVERB:"describes an action",CREATURE:"monster or beast",SPELL:"magical ability",WEAPON:"something to fight with",PLACE:"location or setting",NAME:"character name",EMOTION:"feeling or mood",BODY_PART:"part of the body",NUMBER:"any number",COLOR:"a color",FOOD:"something to eat"}[t]||"fill in the blank"}function i5({isAdmin:t=!1}){var p;const[e,n]=D.useState(null),[r,i]=D.useState(""),[s,o]=D.useState(!1),[a,l]=D.useState(!1),[c]=D.useState(()=>localStorage.getItem("audience-id")||Math.random().toString(36).substr(2,9));D.useEffect(()=>{localStorage.setItem("audience-id",c);const y=Un(Te(xe,"npc-naming","current"),m=>{var w;if(m.exists()){const _=m.data();n(_);const v=(w=_.submissions)==null?void 0:w.find(x=>x.userId===c);o(!!v)}else n(null)});return()=>y()},[c]);const d=async()=>{if(!(!r.trim()||!e))try{await bo(Te(xe,"npc-naming","current"),{submissions:Yg({name:r.trim(),userId:c,votes:0,timestamp:Date.now()})}),o(!0)}catch(y){console.error("Failed to submit name:",y)}},u=y=>{y.key==="Enter"&&d()},f=async y=>{if(!(a||!e))try{const m=[...e.submissions];m[y].votes+=1,await bo(Te(xe,"npc-naming","current"),{submissions:m}),l(!0)}catch(m){console.error("Failed to vote:",m)}};if(!e||e.status==="idle")return E.jsxs("div",{className:"npc-naming-container idle",children:[E.jsx("div",{className:"waiting-icon",children:""}),E.jsx("h2",{children:"NPC Naming"}),E.jsx("p",{children:"Waiting for a character to name..."})]});if(e.status==="collecting")return E.jsxs("div",{className:"npc-naming-container collecting",children:[E.jsx("h2",{children:"Name This NPC!"}),e.imageUrl&&E.jsx("div",{className:"npc-portrait",children:E.jsx("img",{src:e.imageUrl,alt:"NPC"})}),E.jsx("div",{className:"npc-description",children:e.description}),s?E.jsxs("div",{className:"submitted-message",children:[E.jsx("span",{children:""})," Name submitted!"]}):E.jsxs("div",{className:"submission-form",children:[E.jsx("input",{type:"text",value:r,onChange:y=>i(y.target.value),placeholder:"Enter a name...",maxLength:40,onKeyPress:u}),E.jsx("button",{onClick:d,disabled:!r.trim(),children:"Submit"})]}),E.jsxs("div",{className:"submission-count",children:[((p=e.submissions)==null?void 0:p.length)||0," names submitted"]})]});if(e.status==="voting"){const y=[...e.submissions||[]].sort((m,w)=>w.votes-m.votes);return E.jsxs("div",{className:"npc-naming-container voting",children:[E.jsx("h2",{children:"Vote for Your Favorite!"}),E.jsx("div",{className:"npc-description",children:e.description}),E.jsx("div",{className:"voting-options",children:y.slice(0,5).map((m,w)=>E.jsxs(Pe.button,{className:`vote-option ${a?"voted":""}`,onClick:()=>!a&&f(e.submissions.indexOf(m)),"aria-disabled":a,whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},children:[E.jsx("span",{className:"name",children:m.name}),a&&E.jsxs("span",{className:"vote-count",children:[m.votes," votes"]})]},w))}),a&&E.jsxs("div",{className:"submitted-message",children:[E.jsx("span",{children:""})," Vote cast!"]})]})}return e.status==="revealing"?E.jsxs("div",{className:"npc-naming-container revealing",children:[E.jsx("h2",{children:"Their Name Is..."}),E.jsx(Pe.div,{className:"winner-name",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",duration:.8},children:e.winner}),E.jsx("div",{className:"npc-description",children:e.description})]}):null}function s5({isAdmin:t=!1}){var y,m;const[e,n]=D.useState(null),[r,i]=D.useState(!1),[s,o]=D.useState(null),[a,l]=D.useState(!1),[c]=D.useState(()=>localStorage.getItem("audience-id")||Math.random().toString(36).substr(2,9));D.useEffect(()=>{localStorage.setItem("audience-id",c);const w=Un(Te(xe,"group-roll","current"),_=>{var v;if(_.exists()){const x=_.data();n(x);const P=(v=x.rolls)==null?void 0:v.find(R=>R.userId===c);P?(i(!0),o(P.result)):(i(!1),o(null))}else n(null)});return()=>w()},[c]);const d=async()=>{if(r||!e||a)return;l(!0);const w=parseInt(e.diceType.replace("d",""));for(let v=0;v<10;v++){await new Promise(P=>setTimeout(P,50));const x=Math.floor(Math.random()*w)+1;o(x)}const _=Math.floor(Math.random()*w)+1;o(_);try{await bo(Te(xe,"group-roll","current"),{rolls:Yg({userId:c,result:_,timestamp:Date.now()})}),i(!0)}catch(v){console.error("Failed to submit roll:",v)}l(!1)};if(!e||e.status==="idle")return E.jsxs("div",{className:"group-roll-container idle",children:[E.jsx(GL,{size:72,animated:!0,className:"waiting-icon tmp-icon-float"}),E.jsx("h2",{children:"Group Roll"}),E.jsx("p",{children:"Waiting for the GM to call for a roll..."})]});const u=((y=e.rolls)==null?void 0:y.length)||0,f=e.dc||10,p=e.modifier||0;if(e.status==="rolling")return E.jsxs("div",{className:"group-roll-container rolling",children:[E.jsx("h2",{children:e.prompt||"Roll!"}),E.jsxs("div",{className:"roll-info",children:[E.jsx("span",{className:"dice-type",children:e.diceType}),p!==0&&E.jsxs("span",{className:"modifier",children:[p>0?"+":"",p]}),E.jsxs("span",{className:"dc",children:["DC ",f]})]}),r?E.jsxs("div",{className:"my-roll-result",children:[E.jsxs("div",{className:`roll-value ${(s??0)+p>=f?"success":"fail"}`,children:[s,p!==0&&E.jsxs("span",{className:"modifier-display",children:["+",p,"=",(s??0)+p]})]}),E.jsx("div",{className:"roll-outcome",children:(s??0)+p>=f?" Success!":" Failed"})]}):E.jsx(Pe.button,{className:"roll-button",onClick:a?void 0:d,style:a?{pointerEvents:"none",opacity:.7}:{},whileHover:a?{}:{scale:1.05},whileTap:a?{}:{scale:.95},children:a?E.jsx("span",{className:"rolling-number",children:s}):E.jsx(E.Fragment,{children:" Roll!"})}),E.jsxs("div",{className:"roll-count",children:[u," adventurers have rolled"]}),E.jsx("div",{className:"live-rolls",children:E.jsx(of,{children:(m=e.rolls)==null?void 0:m.slice(-5).reverse().map(w=>E.jsx(Pe.div,{className:`roll-pip ${w.result+p>=f?"success":"fail"}`,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:w.result},w.timestamp))})})]});if(e.status==="results"){const w=e.rolls||[],_=w.filter(O=>O.result+p>=f).length,v=w.length-_,x=w.reduce((O,C)=>O+C.result,0),P=w.length>0?(x/w.length).toFixed(1):"0",R=w.length>0?Math.max(...w.map(O=>O.result)):0;return w.length>0&&Math.min(...w.map(O=>O.result)),E.jsxs("div",{className:"group-roll-container results",children:[E.jsx("h2",{children:"Results!"}),E.jsxs("div",{className:"results-grid",children:[E.jsxs("div",{className:"result-card successes",children:[E.jsx("div",{className:"result-value",children:_}),E.jsx("div",{className:"result-label",children:"Successes"})]}),E.jsxs("div",{className:"result-card failures",children:[E.jsx("div",{className:"result-value",children:v}),E.jsx("div",{className:"result-label",children:"Failures"})]}),E.jsxs("div",{className:"result-card average",children:[E.jsx("div",{className:"result-value",children:P}),E.jsx("div",{className:"result-label",children:"Average"})]}),E.jsxs("div",{className:"result-card highest",children:[E.jsx("div",{className:"result-value",children:R}),E.jsx("div",{className:"result-label",children:"Highest"})]})]}),E.jsx("div",{className:"success-bar",children:E.jsx("div",{className:"success-fill",style:{width:`${w.length>0?_/w.length*100:0}%`}})}),E.jsxs("div",{className:"success-label",children:[w.length>0?Math.round(_/w.length*100):0,"% success rate"]})]})}return null}function FA({size:t=200,className:e="",style:n,variant:r="full"}){return E.jsx("img",{src:"/images/TMAP-LOGO two color.png",alt:"The Misadventuring Party",className:`tmp-logo tmp-logo-${r} ${e}`,style:{width:typeof t=="number"?`${t}px`:t,height:"auto",...n}})}function o5(){const[t,e]=D.useState(null),[n,r]=D.useState(!0),[i,s]=D.useState(!1);return D.useEffect(()=>{let o;try{o=Un(Te(xe,"config","active-interaction"),a=>{a.exists()?e(a.data()):e({type:"none"}),r(!1),s(!1)},a=>{console.error("Firebase connection error:",a),s(!0),r(!1)})}catch(a){console.error("Firebase setup error:",a),s(!0),r(!1)}return()=>o&&o()},[]),n?E.jsx("div",{className:"audience-container",children:E.jsxs("div",{className:"loading-state",children:[E.jsx("div",{className:"loading-spinner"}),E.jsx("p",{children:"Connecting to the adventure..."})]})}):i?E.jsx("div",{className:"audience-container",children:E.jsxs("div",{className:"error-state",children:[E.jsx(YL,{size:64,className:"error-icon"}),E.jsx("h2",{children:"Connection Lost"}),E.jsx("p",{children:"Having trouble reaching the server. Check your connection and refresh."}),E.jsx("button",{onClick:()=>window.location.reload(),className:"retry-btn",children:"Try Again"})]})}):E.jsxs("div",{className:"audience-container",children:[E.jsxs("header",{className:"show-header",children:[E.jsx("h1",{children:"The Misadventuring Party"}),E.jsx("p",{className:"tagline",children:"Live Audience Interaction"})]}),E.jsxs("main",{className:"interaction-area",children:[(t==null?void 0:t.type)==="vote"&&E.jsx(JL,{config:t}),(t==null?void 0:t.type)==="none"&&E.jsxs("div",{className:"waiting-state",children:[E.jsx(FA,{size:180,className:"waiting-logo"}),E.jsx("h2",{children:"The Adventure Continues..."}),E.jsx("p",{children:"Stand by for your moment to influence the story!"})]}),(t==null?void 0:t.type)==="madlibs"&&E.jsx(e5,{}),(t==null?void 0:t.type)==="npc-naming"&&E.jsx(i5,{}),(t==null?void 0:t.type)==="group-roll"&&E.jsx(s5,{})]})]})}function gr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Tn={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Do={duration:.5,overwrite:!1,delay:0},Ty,At,Be,On=1e8,Ve=1/On,am=Math.PI*2,a5=am/4,l5=0,jA=Math.sqrt,u5=Math.cos,c5=Math.sin,gt=function(e){return typeof e=="string"},Ze=function(e){return typeof e=="function"},Mr=function(e){return typeof e=="number"},xy=function(e){return typeof e>"u"},fr=function(e){return typeof e=="object"},nn=function(e){return e!==!1},Ey=function(){return typeof window<"u"},Qu=function(e){return Ze(e)||gt(e)},BA=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},jt=Array.isArray,h5=/random\([^)]+\)/g,f5=/,\s*/g,Qw=/(?:-?\.?\d|\.)+/gi,UA=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Js=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ad=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$A=/[+-]=-?[.\d]+/,d5=/[^,'"\[\]\s]+/gi,p5=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ze,er,lm,Sy,Sn={},uh={},zA,WA=function(e){return(uh=No(e,Sn))&&un},Ay=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},Dl=function(e,n){return!n&&console.warn(e)},HA=function(e,n){return e&&(Sn[e]=n)&&uh&&(uh[e]=n)||Sn},Nl=function(){return 0},m5={suppressEvents:!0,isStart:!0,kill:!1},gc={suppressEvents:!0,kill:!1},g5={suppressEvents:!0},Cy={},mi=[],um={},qA,dn={},Cd={},Xw=30,yc=[],Py="",Iy=function(e){var n=e[0],r,i;if(fr(n)||Ze(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(i=yc.length;i--&&!yc[i].targetTest(n););r=yc[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new gC(e[i],r)))||e.splice(i,1);return e},os=function(e){return e._gsap||Iy(Fn(e))[0]._gsap},GA=function(e,n,r){return(r=e[n])&&Ze(r)?e[n]():xy(r)&&e.getAttribute&&e.getAttribute(n)||r},rn=function(e,n){return(e=e.split(",")).forEach(n)||e},et=function(e){return Math.round(e*1e5)/1e5||0},Ue=function(e){return Math.round(e*1e7)/1e7||0},ho=function(e,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},y5=function(e,n){for(var r=n.length,i=0;e.indexOf(n[i])<0&&++i<r;);return i<r},ch=function(){var e=mi.length,n=mi.slice(0),r,i;for(um={},mi.length=0,r=0;r<e;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},ky=function(e){return!!(e._initted||e._startAt||e.add)},KA=function(e,n,r,i){mi.length&&!At&&ch(),e.render(n,r,!!(At&&n<0&&ky(e))),mi.length&&!At&&ch()},QA=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(d5).length<2?n:gt(e)?e.trim():e},XA=function(e){return e},An=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},_5=function(e){return function(n,r){for(var i in r)i in n||i==="duration"&&e||i==="ease"||(n[i]=r[i])}},No=function(e,n){for(var r in n)e[r]=n[r];return e},Yw=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=fr(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},hh=function(e,n){var r={},i;for(i in e)i in n||(r[i]=e[i]);return r},Za=function(e){var n=e.parent||ze,r=e.keyframes?_5(jt(e.keyframes)):An;if(nn(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},v5=function(e,n){for(var r=e.length,i=r===n.length;i&&r--&&e[r]===n[r];);return r<0},YA=function(e,n,r,i,s){var o=e[i],a;if(s)for(a=n[s];o&&o[s]>a;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[i]=n,n._prev=o,n.parent=n._dp=e,n},af=function(e,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=n._prev,o=n._next;s?s._next=o:e[r]===n&&(e[r]=o),o?o._prev=s:e[i]===n&&(e[i]=s),n._next=n._prev=n.parent=null},Ai=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},as=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},w5=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},cm=function(e,n,r,i){return e._startAt&&(At?e._startAt.revert(gc):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,i))},T5=function t(e){return!e||e._ts&&t(e.parent)},Zw=function(e){return e._repeat?Oo(e._tTime,e=e.duration()+e._rDelay)*e:0},Oo=function(e,n){var r=Math.floor(e=Ue(e/n));return e&&r===e?r-1:r},fh=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},lf=function(e){return e._end=Ue(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ve)||0))},uf=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Ue(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),lf(e),r._dirty||as(r,e)),e},ZA=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=fh(e.rawTime(),n),(!n._dur||ru(0,n.totalDuration(),r)-n._tTime>Ve)&&n.render(r,!0)),as(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Ve}},nr=function(e,n,r,i){return n.parent&&Ai(n),n._start=Ue((Mr(r)?r:r||e!==ze?Vn(e,r,n):e._time)+n._delay),n._end=Ue(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),YA(e,n,"_first","_last",e._sort?"_start":0),hm(n)||(e._recent=n),i||ZA(e,n),e._ts<0&&uf(e,e._tTime),e},JA=function(e,n){return(Sn.ScrollTrigger||Ay("scrollTrigger",n))&&Sn.ScrollTrigger.create(n,e)},eC=function(e,n,r,i,s){if(Ry(e,n,s),!e._initted)return 1;if(!r&&e._pt&&!At&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&qA!==pn.frame)return mi.push(e),e._lazy=[s,i],1},x5=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},hm=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},E5=function(e,n,r,i){var s=e.ratio,o=n<0||!n&&(!e._start&&x5(e)&&!(!e._initted&&hm(e))||(e._ts<0||e._dp._ts<0)&&!hm(e))?0:1,a=e._rDelay,l=0,c,d,u;if(a&&e._repeat&&(l=ru(0,e._tDur,n),d=Oo(l,a),e._yoyo&&d&1&&(o=1-o),d!==Oo(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||At||i||e._zTime===Ve||!n&&e._zTime){if(!e._initted&&eC(e,n,i,r,l))return;for(u=e._zTime,e._zTime=n||(r?Ve:0),r||(r=n&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;n<0&&cm(e,n,r,!0),e._onUpdate&&!r&&yn(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&yn(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===o&&(o&&Ai(e,1),!r&&!At&&(yn(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},S5=function(e,n,r){var i;if(r>n)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},Fo=function(e,n,r,i){var s=e._repeat,o=Ue(n)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Ue(o*(s+1)+e._rDelay*s):o,a>0&&!i&&uf(e,e._tTime=e._tDur*a),e.parent&&lf(e),r||as(e.parent,e),e},Jw=function(e){return e instanceof Wt?as(e):Fo(e,e._dur)},A5={_start:0,endTime:Nl,totalDuration:Nl},Vn=function t(e,n,r){var i=e.labels,s=e._recent||A5,o=e.duration()>=On?s.endTime(!1):e._dur,a,l,c;return gt(n)&&(isNaN(n)||n in i)?(l=n.charAt(0),c=n.substr(-1)==="%",a=n.indexOf("="),l==="<"||l===">"?(a>=0&&(n=n.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0)*(c?(a<0?s:r).totalDuration()/100:1)):a<0?(n in i||(i[n]=o),i[n]):(l=parseFloat(n.charAt(a-1)+n.substr(a+1)),c&&r&&(l=l/100*(jt(r)?r[0]:r).totalDuration()),a>1?t(e,n.substr(0,a-1),r)+l:o+l)):n==null?o:+n},Ja=function(e,n,r){var i=Mr(n[1]),s=(i?2:1)+(e<2?0:1),o=n[s],a,l;if(i&&(o.duration=n[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=nn(l.vars.inherit)&&l.parent;o.immediateRender=nn(a.immediateRender),e<2?o.runBackwards=1:o.startAt=n[s-1]}return new st(n[0],o,n[s+1])},Mi=function(e,n){return e||e===0?n(e):n},ru=function(e,n,r){return r<e?e:r>n?n:r},Lt=function(e,n){return!gt(e)||!(n=p5.exec(e))?"":n[1]},C5=function(e,n,r){return Mi(r,function(i){return ru(e,n,i)})},fm=[].slice,tC=function(e,n){return e&&fr(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&fr(e[0]))&&!e.nodeType&&e!==er},P5=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return gt(i)&&!n||tC(i,1)?(s=r).push.apply(s,Fn(i)):r.push(i)})||r},Fn=function(e,n,r){return Be&&!n&&Be.selector?Be.selector(e):gt(e)&&!r&&(lm||!Lo())?fm.call((n||Sy).querySelectorAll(e),0):jt(e)?P5(e,r):tC(e)?fm.call(e,0):e?[e]:[]},dm=function(e){return e=Fn(e)[0]||Dl("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return Fn(n,r.querySelectorAll?r:r===e?Dl("Invalid scope")||Sy.createElement("div"):e)}},nC=function(e){return e.sort(function(){return .5-Math.random()})},rC=function(e){if(Ze(e))return e;var n=fr(e)?e:{each:e},r=ls(n.ease),i=n.from||0,s=parseFloat(n.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,c=n.axis,d=i,u=i;return gt(i)?d=u={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(d=i[0],u=i[1]),function(f,p,y){var m=(y||n).length,w=o[m],_,v,x,P,R,O,C,S,A;if(!w){if(A=n.grid==="auto"?0:(n.grid||[1,On])[1],!A){for(C=-On;C<(C=y[A++].getBoundingClientRect().left)&&A<m;);A<m&&A--}for(w=o[m]=[],_=l?Math.min(A,m)*d-.5:i%A,v=A===On?0:l?m*u/A-.5:i/A|0,C=0,S=On,O=0;O<m;O++)x=O%A-_,P=v-(O/A|0),w[O]=R=c?Math.abs(c==="y"?P:x):jA(x*x+P*P),R>C&&(C=R),R<S&&(S=R);i==="random"&&nC(w),w.max=C-S,w.min=S,w.v=m=(parseFloat(n.amount)||parseFloat(n.each)*(A>m?m-1:c?c==="y"?m/A:A:Math.max(A,m/A))||0)*(i==="edges"?-1:1),w.b=m<0?s-m:s,w.u=Lt(n.amount||n.each)||0,r=r&&m<0?dC(r):r}return m=(w[f]-w.min)/w.max||0,Ue(w.b+(r?r(m):m)*w.v)+w.u}},pm=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Ue(Math.round(parseFloat(r)/e)*e*n);return(i-i%1)/n+(Mr(r)?0:Lt(r))}},iC=function(e,n){var r=jt(e),i,s;return!r&&fr(e)&&(i=r=e.radius||On,e.values?(e=Fn(e.values),(s=!Mr(e[0]))&&(i*=i)):e=pm(e.increment)),Mi(n,r?Ze(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=On,d=0,u=e.length,f,p;u--;)s?(f=e[u].x-a,p=e[u].y-l,f=f*f+p*p):f=Math.abs(e[u]-a),f<c&&(c=f,d=u);return d=!i||c<=i?e[d]:o,s||d===o||Mr(o)?d:d+Lt(o)}:pm(e))},sC=function(e,n,r,i){return Mi(jt(e)?!n:r===!0?!!(r=0):!i,function(){return jt(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*i)/i})},I5=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduce(function(s,o){return o(s)},i)}},k5=function(e,n){return function(r){return e(parseFloat(r))+(n||Lt(r))}},b5=function(e,n,r){return aC(e,n,0,1,r)},oC=function(e,n,r){return Mi(r,function(i){return e[~~n(i)]})},R5=function t(e,n,r){var i=n-e;return jt(e)?oC(e,t(0,e.length),n):Mi(r,function(s){return(i+(s-e)%i)%i+e})},V5=function t(e,n,r){var i=n-e,s=i*2;return jt(e)?oC(e,t(0,e.length-1),n):Mi(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},Ol=function(e){return e.replace(h5,function(n){var r=n.indexOf("[")+1,i=n.substring(r||7,r?n.indexOf("]"):n.length-1).split(f5);return sC(r?i:+i[0],r?0:+i[1],+i[2]||1e-5)})},aC=function(e,n,r,i,s){var o=n-e,a=i-r;return Mi(s,function(l){return r+((l-e)/o*a||0)})},M5=function t(e,n,r,i){var s=isNaN(e+n)?0:function(p){return(1-p)*e+p*n};if(!s){var o=gt(e),a={},l,c,d,u,f;if(r===!0&&(i=1)&&(r=null),o)e={p:e},n={p:n};else if(jt(e)&&!jt(n)){for(d=[],u=e.length,f=u-2,c=1;c<u;c++)d.push(t(e[c-1],e[c]));u--,s=function(y){y*=u;var m=Math.min(f,~~y);return d[m](y-m)},r=n}else i||(e=No(jt(e)?[]:{},e));if(!d){for(l in n)by.call(a,e,l,"get",n[l]);s=function(y){return Dy(y,a)||(o?e.p:e)}}}return Mi(r,s)},eT=function(e,n,r){var i=e.labels,s=On,o,a,l;for(o in i)a=i[o]-n,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},yn=function(e,n,r){var i=e.vars,s=i[n],o=Be,a=e._ctx,l,c,d;if(s)return l=i[n+"Params"],c=i.callbackScope||e,r&&mi.length&&ch(),a&&(Be=a),d=l?s.apply(c,l):s.call(c),Be=o,d},Ma=function(e){return Ai(e),e.scrollTrigger&&e.scrollTrigger.kill(!!At),e.progress()<1&&yn(e,"onInterrupt"),e},eo,lC=[],uC=function(e){if(e)if(e=!e.name&&e.default||e,Ey()||e.headless){var n=e.name,r=Ze(e),i=n&&!r&&e.init?function(){this._props=[]}:e,s={init:Nl,render:Dy,add:by,kill:Q5,modifier:K5,rawVars:0},o={targetTest:0,get:0,getSetter:My,aliases:{},register:0};if(Lo(),e!==i){if(dn[n])return;An(i,An(hh(e,s),o)),No(i.prototype,No(s,hh(e,o))),dn[i.prop=n]=i,e.targetTest&&(yc.push(i),Cy[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}HA(n,i),e.register&&e.register(un,i,sn)}else lC.push(e)},Re=255,Da={aqua:[0,Re,Re],lime:[0,Re,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Re],navy:[0,0,128],white:[Re,Re,Re],olive:[128,128,0],yellow:[Re,Re,0],orange:[Re,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Re,0,0],pink:[Re,192,203],cyan:[0,Re,Re],transparent:[Re,Re,Re,0]},Pd=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*Re+.5|0},cC=function(e,n,r){var i=e?Mr(e)?[e>>16,e>>8&Re,e&Re]:0:Da.black,s,o,a,l,c,d,u,f,p,y;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Da[e])i=Da[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&Re,i&Re,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&Re,e&Re]}else if(e.substr(0,3)==="hsl"){if(i=y=e.match(Qw),!n)l=+i[0]%360/360,c=+i[1]/100,d=+i[2]/100,o=d<=.5?d*(c+1):d+c-d*c,s=d*2-o,i.length>3&&(i[3]*=1),i[0]=Pd(l+1/3,s,o),i[1]=Pd(l,s,o),i[2]=Pd(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(UA),r&&i.length<4&&(i[3]=1),i}else i=e.match(Qw)||Da.transparent;i=i.map(Number)}return n&&!y&&(s=i[0]/Re,o=i[1]/Re,a=i[2]/Re,u=Math.max(s,o,a),f=Math.min(s,o,a),d=(u+f)/2,u===f?l=c=0:(p=u-f,c=d>.5?p/(2-u-f):p/(u+f),l=u===s?(o-a)/p+(o<a?6:0):u===o?(a-s)/p+2:(s-o)/p+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(d*100+.5)),r&&i.length<4&&(i[3]=1),i},hC=function(e){var n=[],r=[],i=-1;return e.split(gi).forEach(function(s){var o=s.match(Js)||[];n.push.apply(n,o),r.push(i+=o.length+1)}),n.c=r,n},tT=function(e,n,r){var i="",s=(e+i).match(gi),o=n?"hsla(":"rgba(",a=0,l,c,d,u;if(!s)return e;if(s=s.map(function(f){return(f=cC(f,n,1))&&o+(n?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),r&&(d=hC(e),l=r.c,l.join(i)!==d.c.join(i)))for(c=e.replace(gi,"1").split(Js),u=c.length-1;a<u;a++)i+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(d.length?d:s.length?s:r).shift());if(!c)for(c=e.split(gi),u=c.length-1;a<u;a++)i+=c[a]+s[a];return i+c[u]},gi=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Da)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),D5=/hsl[a]?\(/,fC=function(e){var n=e.join(" "),r;if(gi.lastIndex=0,gi.test(n))return r=D5.test(n),e[1]=tT(e[1],r),e[0]=tT(e[0],r,hC(e[1])),!0},Fl,pn=function(){var t=Date.now,e=500,n=33,r=t(),i=r,s=1e3/240,o=s,a=[],l,c,d,u,f,p,y=function m(w){var _=t()-i,v=w===!0,x,P,R,O;if((_>e||_<0)&&(r+=_-n),i+=_,R=i-r,x=R-o,(x>0||v)&&(O=++u.frame,f=R-u.time*1e3,u.time=R=R/1e3,o+=x+(x>=s?4:s-x),P=1),v||(l=c(m)),P)for(p=0;p<a.length;p++)a[p](R,f,O,w)};return u={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(w){return f/(1e3/(w||60))},wake:function(){zA&&(!lm&&Ey()&&(er=lm=window,Sy=er.document||{},Sn.gsap=un,(er.gsapVersions||(er.gsapVersions=[])).push(un.version),WA(uh||er.GreenSockGlobals||!er.gsap&&er||{}),lC.forEach(uC)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&u.sleep(),c=d||function(w){return setTimeout(w,o-u.time*1e3+1|0)},Fl=1,y(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),Fl=0,c=Nl},lagSmoothing:function(w,_){e=w||1/0,n=Math.min(_||33,e)},fps:function(w){s=1e3/(w||240),o=u.time*1e3+s},add:function(w,_,v){var x=_?function(P,R,O,C){w(P,R,O,C),u.remove(x)}:w;return u.remove(w),a[v?"unshift":"push"](x),Lo(),x},remove:function(w,_){~(_=a.indexOf(w))&&a.splice(_,1)&&p>=_&&p--},_listeners:a},u}(),Lo=function(){return!Fl&&pn.wake()},ye={},N5=/^[\d.\-M][\d.\-,\s]/,O5=/["']/g,F5=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,c;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),n[i]=isNaN(c)?c.replace(O5,"").trim():+c,i=l.substr(a+1).trim();return n},L5=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n);return e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)},j5=function(e){var n=(e+"").split("("),r=ye[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[F5(n[1])]:L5(e).split(",").map(QA)):ye._CE&&N5.test(e)?ye._CE("",e):r},dC=function(e){return function(n){return 1-e(1-n)}},pC=function t(e,n){for(var r=e._first,i;r;)r instanceof Wt?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},ls=function(e,n){return e&&(Ze(e)?e:ye[e]||j5(e))||n},As=function(e,n,r,i){r===void 0&&(r=function(l){return 1-n(1-l)}),i===void 0&&(i=function(l){return l<.5?n(l*2)/2:1-n((1-l)*2)/2});var s={easeIn:n,easeOut:r,easeInOut:i},o;return rn(e,function(a){ye[a]=Sn[a]=s,ye[o=a.toLowerCase()]=r;for(var l in s)ye[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=ye[a+"."+l]=s[l]}),s},mC=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},Id=function t(e,n,r){var i=n>=1?n:1,s=(r||(e?.3:.45))/(n<1?n:1),o=s/am*(Math.asin(1/i)||0),a=function(d){return d===1?1:i*Math.pow(2,-10*d)*c5((d-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:mC(a);return s=am/s,l.config=function(c,d){return t(e,c,d)},l},kd=function t(e,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:mC(r);return i.config=function(s){return t(e,s)},i};rn("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;As(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});ye.Linear.easeNone=ye.none=ye.Linear.easeIn;As("Elastic",Id("in"),Id("out"),Id());(function(t,e){var n=1/e,r=2*n,i=2.5*n,s=function(a){return a<n?t*a*a:a<r?t*Math.pow(a-1.5/e,2)+.75:a<i?t*(a-=2.25/e)*a+.9375:t*Math.pow(a-2.625/e,2)+.984375};As("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);As("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});As("Circ",function(t){return-(jA(1-t*t)-1)});As("Sine",function(t){return t===1?1:-u5(t*a5)+1});As("Back",kd("in"),kd("out"),kd());ye.SteppedEase=ye.steps=Sn.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,i=e+(n?0:1),s=n?1:0,o=1-Ve;return function(a){return((i*ru(0,o,a)|0)+s)*r}}};Do.ease=ye["quad.out"];rn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Py+=t+","+t+"Params,"});var gC=function(e,n){this.id=l5++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:GA,this.set=n?n.getSetter:My},Ll=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Fo(this,+n.duration,1,1),this.data=n.data,Be&&(this._ctx=Be,Be.data.push(this)),Fl||pn.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Fo(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Lo(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(uf(this,r),!s._dp||s.parent||ZA(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&nr(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Ve||!this._initted&&this._dur&&r||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),KA(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+Zw(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+Zw(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Oo(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Ve?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?fh(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Ve?0:this._rts,this.totalTime(ru(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),lf(this),w5(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Lo(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ve&&(this._tTime-=Ve)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=Ue(r);var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&nr(i,this,this._start-this._delay),this}return this._start},e.endTime=function(r){return this._start+(nn(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?fh(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=g5);var i=At;return At=r,ky(this)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),At=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,Jw(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,Jw(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Vn(this,r),nn(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,nn(i)),this._dur||(this._zTime=-Ve),this},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Ve:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ve,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Ve)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this,s=i._prom;return new Promise(function(o){var a=Ze(r)?r:XA,l=function(){var d=i.then;i.then=null,s&&s(),Ze(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=d),o(a),i.then=d};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?l():i._prom=l})},e.kill=function(){Ma(this)},t}();An(Ll.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ve,_prom:0,_ps:!1,_rts:1});var Wt=function(t){LA(e,t);function e(r,i){var s;return r===void 0&&(r={}),s=t.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=nn(r.sortChildren),ze&&nr(r.parent||ze,gr(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&JA(gr(s),r.scrollTrigger),s}var n=e.prototype;return n.to=function(i,s,o){return Ja(0,arguments,this),this},n.from=function(i,s,o){return Ja(1,arguments,this),this},n.fromTo=function(i,s,o,a){return Ja(2,arguments,this),this},n.set=function(i,s,o){return s.duration=0,s.parent=this,Za(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new st(i,s,Vn(this,o),1),this},n.call=function(i,s,o){return nr(this,st.delayedCall(0,i,s),o)},n.staggerTo=function(i,s,o,a,l,c,d){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=d,o.parent=this,new st(i,o,Vn(this,l)),this},n.staggerFrom=function(i,s,o,a,l,c,d){return o.runBackwards=1,Za(o).immediateRender=nn(o.immediateRender),this.staggerTo(i,s,o,a,l,c,d)},n.staggerFromTo=function(i,s,o,a,l,c,d,u){return a.startAt=o,Za(a).immediateRender=nn(a.immediateRender),this.staggerTo(i,s,a,l,c,d,u)},n.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=i<=0?0:Ue(i),u=this._zTime<0!=i<0&&(this._initted||!c),f,p,y,m,w,_,v,x,P,R,O,C;if(this!==ze&&d>l&&i>=0&&(d=l),d!==this._tTime||o||u){if(a!==this._time&&c&&(d+=this._time-a,i+=this._time-a),f=d,P=this._start,x=this._ts,_=!x,u&&(c||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(O=this._yoyo,w=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(w*100+i,s,o);if(f=Ue(d%w),d===l?(m=this._repeat,f=c):(R=Ue(d/w),m=~~R,m&&m===R&&(f=c,m--),f>c&&(f=c)),R=Oo(this._tTime,w),!a&&this._tTime&&R!==m&&this._tTime-R*w-this._dur<=0&&(R=m),O&&m&1&&(f=c-f,C=1),m!==R&&!this._lock){var S=O&&R&1,A=S===(O&&m&1);if(m<R&&(S=!S),a=S?0:d%c?c:d,this._lock=1,this.render(a||(C?0:Ue(m*w)),s,!c)._lock=0,this._tTime=d,!s&&this.parent&&yn(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1,R=m),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,A&&(this._lock=2,a=S?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;pC(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=S5(this,Ue(a),Ue(f)),v&&(d-=f-(f=v._start))),this._tTime=d,this._time=f,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&d&&c&&!s&&!R&&(yn(this,"onStart"),this._tTime!==d))return this;if(f>=a&&i>=0)for(p=this._first;p;){if(y=p._next,(p._act||f>=p._start)&&p._ts&&v!==p){if(p.parent!==this)return this.render(i,s,o);if(p.render(p._ts>0?(f-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(f-p._start)*p._ts,s,o),f!==this._time||!this._ts&&!_){v=0,y&&(d+=this._zTime=-Ve);break}}p=y}else{p=this._last;for(var I=i<0?i:f;p;){if(y=p._prev,(p._act||I<=p._end)&&p._ts&&v!==p){if(p.parent!==this)return this.render(i,s,o);if(p.render(p._ts>0?(I-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(I-p._start)*p._ts,s,o||At&&ky(p)),f!==this._time||!this._ts&&!_){v=0,y&&(d+=this._zTime=I?-Ve:Ve);break}}p=y}}if(v&&!s&&(this.pause(),v.render(f>=a?0:-Ve)._zTime=f>=a?1:-1,this._ts))return this._start=P,lf(this),this.render(i,s,o);this._onUpdate&&!s&&yn(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&a)&&(P===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(d===l&&this._ts>0||!d&&this._ts<0)&&Ai(this,1),!s&&!(i<0&&!a)&&(d||a||!l)&&(yn(this,d===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,s){var o=this;if(Mr(s)||(s=Vn(this,s,i)),!(i instanceof Ll)){if(jt(i))return i.forEach(function(a){return o.add(a,s)}),this;if(gt(i))return this.addLabel(i,s);if(Ze(i))i=st.delayedCall(0,i);else return this}return this!==i?nr(this,i,s):this},n.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-On);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof st?s&&l.push(c):(o&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},n.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},n.remove=function(i){return gt(i)?this.removeLabel(i):Ze(i)?this.killTweensOf(i):(i.parent===this&&af(this,i),i===this._recent&&(this._recent=this._last),as(this))},n.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ue(pn.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},n.addLabel=function(i,s){return this.labels[i]=Vn(this,s),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,s,o){var a=st.delayedCall(0,s||Nl,o);return a.data="isPause",this._hasPause=1,nr(this,a,Vn(this,i))},n.removePause=function(i){var s=this._first;for(i=Vn(this,i);s;)s._start===i&&s.data==="isPause"&&Ai(s),s=s._next},n.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)ei!==a[l]&&a[l].kill(i,s);return this},n.getTweensOf=function(i,s){for(var o=[],a=Fn(i),l=this._first,c=Mr(s),d;l;)l instanceof st?y5(l._targets,a)&&(c?(!ei||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(d=l.getTweensOf(a,s)).length&&o.push.apply(o,d),l=l._next;return o},n.tweenTo=function(i,s){s=s||{};var o=this,a=Vn(o,i),l=s,c=l.startAt,d=l.onStart,u=l.onStartParams,f=l.immediateRender,p,y=st.to(o,An({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Ve,onStart:function(){if(o.pause(),!p){var w=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());y._dur!==w&&Fo(y,w,0,1).render(y._time,!0,!0),p=1}d&&d.apply(y,u||[])}},s));return f?y.render(0):y},n.tweenFromTo=function(i,s,o){return this.tweenTo(s,An({startAt:{time:Vn(this,i)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),eT(this,Vn(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),eT(this,Vn(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Ve)},n.shiftChildren=function(i,s,o){o===void 0&&(o=0);var a=this._first,l=this.labels,c;for(i=Ue(i);a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=i);return as(this)},n.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),as(this)},n.totalDuration=function(i){var s=0,o=this,a=o._last,l=On,c,d,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(u=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),d=a._start,d>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,nr(o,a,d-a._delay,1)._lock=0):l=d,d<0&&a._ts&&(s-=d,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=Ue(d/o._ts),o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Fo(o,o===ze&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(ze._ts&&(KA(ze,fh(i,ze)),qA=pn.frame),pn.frame>=Xw){Xw+=Tn.autoSleep||120;var s=ze._first;if((!s||!s._ts)&&Tn.autoSleep&&pn._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||pn.sleep()}}},e}(Ll);An(Wt.prototype,{_lock:0,_hasPause:0,_forcing:0});var B5=function(e,n,r,i,s,o,a){var l=new sn(this._pt,e,n,0,1,xC,null,s),c=0,d=0,u,f,p,y,m,w,_,v;for(l.b=r,l.e=i,r+="",i+="",(_=~i.indexOf("random("))&&(i=Ol(i)),o&&(v=[r,i],o(v,e,n),r=v[0],i=v[1]),f=r.match(Ad)||[];u=Ad.exec(i);)y=u[0],m=i.substring(c,u.index),p?p=(p+1)%5:m.substr(-5)==="rgba("&&(p=1),y!==f[d++]&&(w=parseFloat(f[d-1])||0,l._pt={_next:l._pt,p:m||d===1?m:",",s:w,c:y.charAt(1)==="="?ho(w,y)-w:parseFloat(y)-w,m:p&&p<4?Math.round:0},c=Ad.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=a,($A.test(i)||_)&&(l.e=0),this._pt=l,l},by=function(e,n,r,i,s,o,a,l,c,d){Ze(i)&&(i=i(s||0,e,o));var u=e[n],f=r!=="get"?r:Ze(u)?c?e[n.indexOf("set")||!Ze(e["get"+n.substr(3)])?n:"get"+n.substr(3)](c):e[n]():u,p=Ze(u)?c?H5:wC:Vy,y;if(gt(i)&&(~i.indexOf("random(")&&(i=Ol(i)),i.charAt(1)==="="&&(y=ho(f,i)+(Lt(f)||0),(y||y===0)&&(i=y))),!d||f!==i||mm)return!isNaN(f*i)&&i!==""?(y=new sn(this._pt,e,n,+f||0,i-(f||0),typeof u=="boolean"?G5:TC,0,p),c&&(y.fp=c),a&&y.modifier(a,this,e),this._pt=y):(!u&&!(n in e)&&Ay(n,i),B5.call(this,e,n,f,i,p,l||Tn.stringFilter,c))},U5=function(e,n,r,i,s){if(Ze(e)&&(e=el(e,s,n,r,i)),!fr(e)||e.style&&e.nodeType||jt(e)||BA(e))return gt(e)?el(e,s,n,r,i):e;var o={},a;for(a in e)o[a]=el(e[a],s,n,r,i);return o},yC=function(e,n,r,i,s,o){var a,l,c,d;if(dn[e]&&(a=new dn[e]).init(s,a.rawVars?n[e]:U5(n[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new sn(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==eo))for(c=r._ptLookup[r._targets.indexOf(s)],d=a._props.length;d--;)c[a._props[d]]=l;return a},ei,mm,Ry=function t(e,n,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,c=i.onUpdate,d=i.runBackwards,u=i.yoyoEase,f=i.keyframes,p=i.autoRevert,y=e._dur,m=e._startAt,w=e._targets,_=e.parent,v=_&&_.data==="nested"?_.vars.targets:w,x=e._overwrite==="auto"&&!Ty,P=e.timeline,R,O,C,S,A,I,V,M,b,q,te,Q,re;if(P&&(!f||!s)&&(s="none"),e._ease=ls(s,Do.ease),e._yEase=u?dC(ls(u===!0?s:u,Do.ease)):0,u&&e._yoyo&&!e._repeat&&(u=e._yEase,e._yEase=e._ease,e._ease=u),e._from=!P&&!!i.runBackwards,!P||f&&!i.stagger){if(M=w[0]?os(w[0]).harness:0,Q=M&&i[M.prop],R=hh(i,Cy),m&&(m._zTime<0&&m.progress(1),n<0&&d&&a&&!p?m.render(-1,!0):m.revert(d&&y?gc:m5),m._lazy=0),o){if(Ai(e._startAt=st.set(w,An({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!m&&nn(l),startAt:null,delay:0,onUpdate:c&&function(){return yn(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(At||!a&&!p)&&e._startAt.revert(gc),a&&y&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(d&&y&&!m){if(n&&(a=!1),C=An({overwrite:!1,data:"isFromStart",lazy:a&&!m&&nn(l),immediateRender:a,stagger:0,parent:_},R),Q&&(C[M.prop]=Q),Ai(e._startAt=st.set(w,C)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(At?e._startAt.revert(gc):e._startAt.render(-1,!0)),e._zTime=n,!a)t(e._startAt,Ve,Ve);else if(!n)return}for(e._pt=e._ptCache=0,l=y&&nn(l)||l&&!y,O=0;O<w.length;O++){if(A=w[O],V=A._gsap||Iy(w)[O]._gsap,e._ptLookup[O]=q={},um[V.id]&&mi.length&&ch(),te=v===w?O:v.indexOf(A),M&&(b=new M).init(A,Q||R,e,te,v)!==!1&&(e._pt=S=new sn(e._pt,A,b.name,0,1,b.render,b,0,b.priority),b._props.forEach(function(z){q[z]=S}),b.priority&&(I=1)),!M||Q)for(C in R)dn[C]&&(b=yC(C,R,e,te,A,v))?b.priority&&(I=1):q[C]=S=by.call(e,A,C,"get",R[C],te,v,0,i.stringFilter);e._op&&e._op[O]&&e.kill(A,e._op[O]),x&&e._pt&&(ei=e,ze.killTweensOf(A,q,e.globalTime(n)),re=!e.parent,ei=0),e._pt&&l&&(um[V.id]=1)}I&&EC(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!re,f&&n<=0&&P.render(On,!0,!0)},$5=function(e,n,r,i,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[n],d,u,f,p;if(!c)for(c=e._ptCache[n]=[],f=e._ptLookup,p=e._targets.length;p--;){if(d=f[p][n],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==n&&d.fp!==n;)d=d._next;if(!d)return mm=1,e.vars[n]="+=0",Ry(e,a),mm=0,l?Dl(n+" not eligible for reset"):1;c.push(d)}for(p=c.length;p--;)u=c[p],d=u._pt||u,d.s=(i||i===0)&&!s?i:d.s+(i||0)+o*d.c,d.c=r-d.s,u.e&&(u.e=et(r)+Lt(u.e)),u.b&&(u.b=d.s+Lt(u.b))},z5=function(e,n){var r=e[0]?os(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return n;s=No({},n);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},W5=function(e,n,r,i){var s=n.ease||i||"power1.inOut",o,a;if(jt(n))a=r[e]||(r[e]=[]),n.forEach(function(l,c){return a.push({t:c/(n.length-1)*100,v:l,e:s})});else for(o in n)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:n[o],e:s})},el=function(e,n,r,i,s){return Ze(e)?e.call(n,r,i,s):gt(e)&&~e.indexOf("random(")?Ol(e):e},_C=Py+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",vC={};rn(_C+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return vC[t]=1});var st=function(t){LA(e,t);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=t.call(this,o?i:Za(i))||this;var l=a.vars,c=l.duration,d=l.delay,u=l.immediateRender,f=l.stagger,p=l.overwrite,y=l.keyframes,m=l.defaults,w=l.scrollTrigger,_=l.yoyoEase,v=i.parent||ze,x=(jt(r)||BA(r)?Mr(r[0]):"length"in i)?[r]:Fn(r),P,R,O,C,S,A,I,V;if(a._targets=x.length?Iy(x):Dl("GSAP target "+r+" not found. https://gsap.com",!Tn.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,y||f||Qu(c)||Qu(d)){if(i=a.vars,P=a.timeline=new Wt({data:"nested",defaults:m||{},targets:v&&v.data==="nested"?v.vars.targets:x}),P.kill(),P.parent=P._dp=gr(a),P._start=0,f||Qu(c)||Qu(d)){if(C=x.length,I=f&&rC(f),fr(f))for(S in f)~_C.indexOf(S)&&(V||(V={}),V[S]=f[S]);for(R=0;R<C;R++)O=hh(i,vC),O.stagger=0,_&&(O.yoyoEase=_),V&&No(O,V),A=x[R],O.duration=+el(c,gr(a),R,A,x),O.delay=(+el(d,gr(a),R,A,x)||0)-a._delay,!f&&C===1&&O.delay&&(a._delay=d=O.delay,a._start+=d,O.delay=0),P.to(A,O,I?I(R,A,x):0),P._ease=ye.none;P.duration()?c=d=0:a.timeline=0}else if(y){Za(An(P.vars.defaults,{ease:"none"})),P._ease=ls(y.ease||i.ease||"none");var M=0,b,q,te;if(jt(y))y.forEach(function(Q){return P.to(x,Q,">")}),P.duration();else{O={};for(S in y)S==="ease"||S==="easeEach"||W5(S,y[S],O,y.easeEach);for(S in O)for(b=O[S].sort(function(Q,re){return Q.t-re.t}),M=0,R=0;R<b.length;R++)q=b[R],te={ease:q.e,duration:(q.t-(R?b[R-1].t:0))/100*c},te[S]=q.v,P.to(x,te,M),M+=te.duration;P.duration()<c&&P.to({},{duration:c-P.duration()})}}c||a.duration(c=P.duration())}else a.timeline=0;return p===!0&&!Ty&&(ei=gr(a),ze.killTweensOf(x),ei=0),nr(v,gr(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(u||!c&&!y&&a._start===Ue(v._time)&&nn(u)&&T5(gr(a))&&v.data!=="nested")&&(a._tTime=-Ve,a.render(Math.max(0,-d)||0)),w&&JA(gr(a),w),a}var n=e.prototype;return n.render=function(i,s,o){var a=this._time,l=this._tDur,c=this._dur,d=i<0,u=i>l-Ve&&!d?l:i<Ve?0:i,f,p,y,m,w,_,v,x,P;if(!c)E5(this,i,s,o);else if(u!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(f=u,x=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(m*100+i,s,o);if(f=Ue(u%m),u===l?(y=this._repeat,f=c):(w=Ue(u/m),y=~~w,y&&y===w?(f=c,y--):f>c&&(f=c)),_=this._yoyo&&y&1,_&&(P=this._yEase,f=c-f),w=Oo(this._tTime,m),f===a&&!o&&this._initted&&y===w)return this._tTime=u,this;y!==w&&(x&&this._yEase&&pC(x,_),this.vars.repeatRefresh&&!_&&!this._lock&&f!==m&&this._initted&&(this._lock=o=1,this.render(Ue(m*y),!0).invalidate()._lock=0))}if(!this._initted){if(eC(this,d?i:f,o,s,u))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&y!==w))return this;if(c!==this._dur)return this.render(i,s,o)}if(this._tTime=u,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(P||this._ease)(f/c),this._from&&(this.ratio=v=1-v),!a&&u&&!s&&!w&&(yn(this,"onStart"),this._tTime!==u))return this;for(p=this._pt;p;)p.r(v,p.d),p=p._next;x&&x.render(i<0?i:x._dur*x._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(d&&cm(this,i,s,o),yn(this,"onUpdate")),this._repeat&&y!==w&&this.vars.onRepeat&&!s&&this.parent&&yn(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(d&&!this._onUpdate&&cm(this,i,!0,!0),(i||!c)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&Ai(this,1),!s&&!(d&&!a)&&(u||a||_)&&(yn(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},n.resetTo=function(i,s,o,a,l){Fl||pn.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||Ry(this,c),d=this._ease(c/this._dur),$5(this,i,s,o,a,d,c,l)?this.resetTo(i,s,o,a,1):(uf(this,0),this.parent||YA(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Ma(this):this.scrollTrigger&&this.scrollTrigger.kill(!!At),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,ei&&ei.vars.overwrite!==!0)._first||Ma(this),this.parent&&o!==this.timeline.totalDuration()&&Fo(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Fn(i):a,c=this._ptLookup,d=this._pt,u,f,p,y,m,w,_;if((!s||s==="all")&&v5(a,l))return s==="all"&&(this._pt=0),Ma(this);for(u=this._op=this._op||[],s!=="all"&&(gt(s)&&(m={},rn(s,function(v){return m[v]=1}),s=m),s=z5(a,s)),_=a.length;_--;)if(~l.indexOf(a[_])){f=c[_],s==="all"?(u[_]=s,y=f,p={}):(p=u[_]=u[_]||{},y=s);for(m in y)w=f&&f[m],w&&((!("kill"in w.d)||w.d.kill(m)===!0)&&af(this,w,"_pt"),delete f[m]),p!=="all"&&(p[m]=1)}return this._initted&&!this._pt&&d&&Ma(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Ja(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Ja(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return ze.killTweensOf(i,s,o)},e}(Ll);An(st.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});rn("staggerTo,staggerFrom,staggerFromTo",function(t){st[t]=function(){var e=new Wt,n=fm.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var Vy=function(e,n,r){return e[n]=r},wC=function(e,n,r){return e[n](r)},H5=function(e,n,r,i){return e[n](i.fp,r)},q5=function(e,n,r){return e.setAttribute(n,r)},My=function(e,n){return Ze(e[n])?wC:xy(e[n])&&e.setAttribute?q5:Vy},TC=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},G5=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},xC=function(e,n){var r=n._pt,i="";if(!e&&n.b)i=n.b;else if(e===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},Dy=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},K5=function(e,n,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,n,r),s=o},Q5=function(e){for(var n=this._pt,r,i;n;)i=n._next,n.p===e&&!n.op||n.op===e?af(this,n,"_pt"):n.dep||(r=1),n=i;return!r},X5=function(e,n,r,i){i.mSet(e,n,i.m.call(i.tween,r,i.mt),i)},EC=function(e){for(var n=e._pt,r,i,s,o;n;){for(r=n._next,i=s;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=r}e._pt=s},sn=function(){function t(n,r,i,s,o,a,l,c,d){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||TC,this.d=l||this,this.set=c||Vy,this.pr=d||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=X5,this.m=r,this.mt=s,this.tween=i},t}();rn(Py+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return Cy[t]=1});Sn.TweenMax=Sn.TweenLite=st;Sn.TimelineLite=Sn.TimelineMax=Wt;ze=new Wt({sortChildren:!1,defaults:Do,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Tn.stringFilter=fC;var us=[],_c={},Y5=[],nT=0,Z5=0,bd=function(e){return(_c[e]||Y5).map(function(n){return n()})},gm=function(){var e=Date.now(),n=[];e-nT>2&&(bd("matchMediaInit"),us.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,c;for(a in i)o=er.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(r.revert(),l&&n.push(r))}),bd("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),nT=e,bd("matchMedia"))},SC=function(){function t(n,r){this.selector=r&&dm(r),this.data=[],this._r=[],this.isReverted=!1,this.id=Z5++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,i,s){Ze(r)&&(s=i,i=r,r=Ze);var o=this,a=function(){var c=Be,d=o.selector,u;return c&&c!==o&&c.data.push(o),s&&(o.selector=dm(s)),Be=o,u=i.apply(o,arguments),Ze(u)&&o._r.push(u),Be=c,o.selector=d,o.isReverted=!1,u};return o.last=a,r===Ze?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=Be;Be=null,r(this),Be=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof t?r.push.apply(r,i.getTweens()):i instanceof st&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return a.splice(a.indexOf(d),1)}));for(a.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,u){return u.g-d.g||-1/0}).forEach(function(d){return d.t.revert(r)}),l=s.data.length;l--;)c=s.data[l],c instanceof Wt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof st)&&c.revert&&c.revert(r);s._r.forEach(function(d){return d(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=us.length;o--;)us[o].id===this.id&&us.splice(o,1)},e.revert=function(r){this.kill(r||{})},t}(),J5=function(){function t(n){this.contexts=[],this.scope=n,Be&&Be.data.push(this)}var e=t.prototype;return e.add=function(r,i,s){fr(r)||(r={matches:r});var o=new SC(0,s||this.scope),a=o.conditions={},l,c,d;Be&&!o.selector&&(o.selector=Be.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(c in r)c==="all"?d=1:(l=er.matchMedia(r[c]),l&&(us.indexOf(o)<0&&us.push(o),(a[c]=l.matches)&&(d=1),l.addListener?l.addListener(gm):l.addEventListener("change",gm)));return d&&i(o,function(u){return o.add(null,u)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},t}(),dh={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(i){return uC(i)})},timeline:function(e){return new Wt(e)},getTweensOf:function(e,n){return ze.getTweensOf(e,n)},getProperty:function(e,n,r,i){gt(e)&&(e=Fn(e)[0]);var s=os(e||{}).get,o=r?XA:QA;return r==="native"&&(r=""),e&&(n?o((dn[n]&&dn[n].get||s)(e,n,r,i)):function(a,l,c){return o((dn[a]&&dn[a].get||s)(e,a,l,c))})},quickSetter:function(e,n,r){if(e=Fn(e),e.length>1){var i=e.map(function(d){return un.quickSetter(d,n,r)}),s=i.length;return function(d){for(var u=s;u--;)i[u](d)}}e=e[0]||{};var o=dn[n],a=os(e),l=a.harness&&(a.harness.aliases||{})[n]||n,c=o?function(d){var u=new o;eo._pt=0,u.init(e,r?d+r:d,eo,0,[e]),u.render(1,u),eo._pt&&Dy(1,eo)}:a.set(e,l);return o?c:function(d){return c(e,l,r?d+r:d,a,1)}},quickTo:function(e,n,r){var i,s=un.to(e,An((i={},i[n]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),o=function(l,c,d){return s.resetTo(n,l,c,d)};return o.tween=s,o},isTweening:function(e){return ze.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ls(e.ease,Do.ease)),Yw(Do,e||{})},config:function(e){return Yw(Tn,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!dn[a]&&!Sn[a]&&Dl(n+" effect requires "+a+" plugin.")}),Cd[n]=function(a,l,c){return r(Fn(a),An(l||{},s),c)},o&&(Wt.prototype[n]=function(a,l,c){return this.add(Cd[n](a,fr(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,n){ye[e]=ls(n)},parseEase:function(e,n){return arguments.length?ls(e,n):ye},getById:function(e){return ze.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new Wt(e),i,s;for(r.smoothChildTiming=nn(e.smoothChildTiming),ze.remove(r),r._dp=0,r._time=r._tTime=ze._time,i=ze._first;i;)s=i._next,(n||!(!i._dur&&i instanceof st&&i.vars.onComplete===i._targets[0]))&&nr(r,i,i._start-i._delay),i=s;return nr(ze,r,0),r},context:function(e,n){return e?new SC(e,n):Be},matchMedia:function(e){return new J5(e)},matchMediaRefresh:function(){return us.forEach(function(e){var n=e.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&e.revert()})||gm()},addEventListener:function(e,n){var r=_c[e]||(_c[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=_c[e],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:R5,wrapYoyo:V5,distribute:rC,random:sC,snap:iC,normalize:b5,getUnit:Lt,clamp:C5,splitColor:cC,toArray:Fn,selector:dm,mapRange:aC,pipe:I5,unitize:k5,interpolate:M5,shuffle:nC},install:WA,effects:Cd,ticker:pn,updateRoot:Wt.updateRoot,plugins:dn,globalTimeline:ze,core:{PropTween:sn,globals:HA,Tween:st,Timeline:Wt,Animation:Ll,getCache:os,_removeLinkedListItem:af,reverting:function(){return At},context:function(e){return e&&Be&&(Be.data.push(e),e._ctx=Be),Be},suppressOverwrites:function(e){return Ty=e}}};rn("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return dh[t]=st[t]});pn.add(Wt.updateRoot);eo=dh.to({},{duration:0});var e4=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},t4=function(e,n){var r=e._targets,i,s,o;for(i in n)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=e4(o,i)),o&&o.modifier&&o.modifier(n[i],e,r[s],i))},Rd=function(e,n){return{name:e,headless:1,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,c;if(gt(s)&&(l={},rn(s,function(d){return l[d]=1}),s=l),n){l={};for(c in s)l[c]=n(s[c]);s=l}t4(a,s)}}}},un=dh.registerPlugin({name:"attr",init:function(e,n,r,i,s){var o,a,l;this.tween=r;for(o in n)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",n[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,n){for(var r=n._pt;r;)At?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Rd("roundProps",pm),Rd("modifiers"),Rd("snap",iC))||dh;st.version=Wt.version=un.version="3.14.2";zA=1;Ey()&&Lo();ye.Power0;ye.Power1;ye.Power2;ye.Power3;ye.Power4;ye.Linear;ye.Quad;ye.Cubic;ye.Quart;ye.Quint;ye.Strong;ye.Elastic;ye.Back;ye.SteppedEase;ye.Bounce;ye.Sine;ye.Expo;ye.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var rT,ti,fo,Ny,es,iT,Oy,n4=function(){return typeof window<"u"},Dr={},Ki=180/Math.PI,po=Math.PI/180,Ms=Math.atan2,sT=1e8,Fy=/([A-Z])/g,r4=/(left|right|width|margin|padding|x)/i,i4=/[\s,\(]\S/,rr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ym=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},s4=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},o4=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},a4=function(e,n){return n.set(n.t,n.p,e===1?n.e:e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},l4=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},AC=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},CC=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},u4=function(e,n,r){return e.style[n]=r},c4=function(e,n,r){return e.style.setProperty(n,r)},h4=function(e,n,r){return e._gsap[n]=r},f4=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},d4=function(e,n,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},p4=function(e,n,r,i,s){var o=e._gsap;o[n]=r,o.renderTransform(s,o)},He="transform",on=He+"Origin",m4=function t(e,n){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in Dr&&s){if(this.tfm=this.tfm||{},e!=="transform")e=rr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=_r(i,a)}):this.tfm[e]=o.x?o[e]:_r(i,e),e===on&&(this.tfm.zOrigin=o.zOrigin);else return rr.transform.split(",").forEach(function(a){return t.call(r,a,n)});if(this.props.indexOf(He)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(on,n,"")),e=He}(s||n)&&this.props.push(e,n,s[e])},PC=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},g4=function(){var e=this.props,n=this.target,r=n.style,i=n._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?n[e[s]](e[s+2]):n[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Fy,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),s=Oy(),(!s||!s.isStart)&&!r[He]&&(PC(r),i.zOrigin&&r[on]&&(r[on]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},IC=function(e,n){var r={target:e,props:[],revert:g4,save:m4};return e._gsap||un.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(i){return r.save(i)}),r},kC,_m=function(e,n){var r=ti.createElementNS?ti.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ti.createElement(e);return r&&r.style?r:ti.createElement(e)},_n=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(Fy,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,jo(n)||n,1)||""},oT="O,Moz,ms,Ms,Webkit".split(","),jo=function(e,n,r){var i=n||es,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(oT[o]+e in s););return o<0?null:(o===3?"ms":o>=0?oT[o]:"")+e},vm=function(){n4()&&window.document&&(rT=window,ti=rT.document,fo=ti.documentElement,es=_m("div")||{style:{}},_m("div"),He=jo(He),on=He+"Origin",es.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",kC=!!jo("perspective"),Oy=un.core.reverting,Ny=1)},aT=function(e){var n=e.ownerSVGElement,r=_m("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",r.appendChild(i),fo.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),fo.removeChild(r),s},lT=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},bC=function(e){var n,r;try{n=e.getBBox()}catch{n=aT(e),r=1}return n&&(n.width||n.height)||r||(n=aT(e)),n&&!n.width&&!n.x&&!n.y?{x:+lT(e,["x","cx","x1"])||0,y:+lT(e,["y","cy","y1"])||0,width:0,height:0}:n},RC=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&bC(e))},Ci=function(e,n){if(n){var r=e.style,i;n in Dr&&n!==on&&(n=He),r.removeProperty?(i=n.substr(0,2),(i==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(i==="--"?n:n.replace(Fy,"-$1").toLowerCase())):r.removeAttribute(n)}},ni=function(e,n,r,i,s,o){var a=new sn(e._pt,n,r,0,1,o?CC:AC);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},uT={deg:1,rad:1,turn:1},y4={grid:1,flex:1},Pi=function t(e,n,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=es.style,l=r4.test(n),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(l?"Width":"Height"),u=100,f=i==="px",p=i==="%",y,m,w,_;if(i===o||!s||uT[i]||uT[o])return s;if(o!=="px"&&!f&&(s=t(e,n,r,"px")),_=e.getCTM&&RC(e),(p||o==="%")&&(Dr[n]||~n.indexOf("adius")))return y=_?e.getBBox()[l?"width":"height"]:e[d],et(p?s/y*u:s/100*y);if(a[l?"width":"height"]=u+(f?o:i),m=i!=="rem"&&~n.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===ti||!m.appendChild)&&(m=ti.body),w=m._gsap,w&&p&&w.width&&l&&w.time===pn.time&&!w.uncache)return et(s/w.width*u);if(p&&(n==="height"||n==="width")){var v=e.style[n];e.style[n]=u+i,y=e[d],v?e.style[n]=v:Ci(e,n)}else(p||o==="%")&&!y4[_n(m,"display")]&&(a.position=_n(e,"position")),m===e&&(a.position="static"),m.appendChild(es),y=es[d],m.removeChild(es),a.position="absolute";return l&&p&&(w=os(m),w.time=pn.time,w.width=m[d]),et(f?y*s/u:y&&s?u/y*s:0)},_r=function(e,n,r,i){var s;return Ny||vm(),n in rr&&n!=="transform"&&(n=rr[n],~n.indexOf(",")&&(n=n.split(",")[0])),Dr[n]&&n!=="transform"?(s=Bl(e,i),s=n!=="transformOrigin"?s[n]:s.svg?s.origin:mh(_n(e,on))+" "+s.zOrigin+"px"):(s=e.style[n],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=ph[n]&&ph[n](e,n,r)||_n(e,n)||GA(e,n)||(n==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Pi(e,n,s,r)+r:s},_4=function(e,n,r,i){if(!r||r==="none"){var s=jo(n,e,1),o=s&&_n(e,s,1);o&&o!==r?(n=s,r=o):n==="borderColor"&&(r=_n(e,"borderTopColor"))}var a=new sn(this._pt,e.style,n,0,1,xC),l=0,c=0,d,u,f,p,y,m,w,_,v,x,P,R;if(a.b=r,a.e=i,r+="",i+="",i.substring(0,6)==="var(--"&&(i=_n(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(m=e.style[n],e.style[n]=i,i=_n(e,n)||i,m?e.style[n]=m:Ci(e,n)),d=[r,i],fC(d),r=d[0],i=d[1],f=r.match(Js)||[],R=i.match(Js)||[],R.length){for(;u=Js.exec(i);)w=u[0],v=i.substring(l,u.index),y?y=(y+1)%5:(v.substr(-5)==="rgba("||v.substr(-5)==="hsla(")&&(y=1),w!==(m=f[c++]||"")&&(p=parseFloat(m)||0,P=m.substr((p+"").length),w.charAt(1)==="="&&(w=ho(p,w)+P),_=parseFloat(w),x=w.substr((_+"").length),l=Js.lastIndex-x.length,x||(x=x||Tn.units[n]||P,l===i.length&&(i+=x,a.e+=x)),P!==x&&(p=Pi(e,n,m,x)||0),a._pt={_next:a._pt,p:v||c===1?v:",",s:p,c:_-p,m:y&&y<4||n==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=n==="display"&&i==="none"?CC:AC;return $A.test(i)&&(a.e=0),this._pt=a,a},cT={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},v4=function(e){var n=e.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),n[0]=cT[r]||r,n[1]=cT[i]||i,n.join(" ")},w4=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,s=n.u,o=r._gsap,a,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Dr[a]&&(l=1,a=a==="transformOrigin"?on:He),Ci(r,a);l&&(Ci(r,He),o&&(o.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Bl(r,1),o.uncache=1,PC(i)))}},ph={clearProps:function(e,n,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new sn(e._pt,n,r,0,0,w4);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},jl=[1,0,0,1,0,0],VC={},MC=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},hT=function(e){var n=_n(e,He);return MC(n)?jl:n.substr(7).match(UA).map(et)},Ly=function(e,n){var r=e._gsap||os(e),i=e.style,s=hT(e),o,a,l,c;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?jl:s):(s===jl&&!e.offsetParent&&e!==fo&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,fo.appendChild(e)),s=hT(e),l?i.display=l:Ci(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):fo.removeChild(e))),n&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},wm=function(e,n,r,i,s,o){var a=e._gsap,l=s||Ly(e,!0),c=a.xOrigin||0,d=a.yOrigin||0,u=a.xOffset||0,f=a.yOffset||0,p=l[0],y=l[1],m=l[2],w=l[3],_=l[4],v=l[5],x=n.split(" "),P=parseFloat(x[0])||0,R=parseFloat(x[1])||0,O,C,S,A;r?l!==jl&&(C=p*w-y*m)&&(S=P*(w/C)+R*(-m/C)+(m*v-w*_)/C,A=P*(-y/C)+R*(p/C)-(p*v-y*_)/C,P=S,R=A):(O=bC(e),P=O.x+(~x[0].indexOf("%")?P/100*O.width:P),R=O.y+(~(x[1]||x[0]).indexOf("%")?R/100*O.height:R)),i||i!==!1&&a.smooth?(_=P-c,v=R-d,a.xOffset=u+(_*p+v*m)-_,a.yOffset=f+(_*y+v*w)-v):a.xOffset=a.yOffset=0,a.xOrigin=P,a.yOrigin=R,a.smooth=!!i,a.origin=n,a.originIsAbsolute=!!r,e.style[on]="0px 0px",o&&(ni(o,a,"xOrigin",c,P),ni(o,a,"yOrigin",d,R),ni(o,a,"xOffset",u,a.xOffset),ni(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",P+" "+R)},Bl=function(e,n){var r=e._gsap||new gC(e);if("x"in r&&!n&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=_n(e,on)||"0",d,u,f,p,y,m,w,_,v,x,P,R,O,C,S,A,I,V,M,b,q,te,Q,re,z,X,F,N,$,K,Z,ne;return d=u=f=m=w=_=v=x=P=0,p=y=1,r.svg=!!(e.getCTM&&RC(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[He]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[He]!=="none"?l[He]:"")),i.scale=i.rotate=i.translate="none"),C=Ly(e,r.svg),r.svg&&(r.uncache?(z=e.getBBox(),c=r.xOrigin-z.x+"px "+(r.yOrigin-z.y)+"px",re=""):re=!n&&e.getAttribute("data-svg-origin"),wm(e,re||c,!!re||r.originIsAbsolute,r.smooth!==!1,C)),R=r.xOrigin||0,O=r.yOrigin||0,C!==jl&&(V=C[0],M=C[1],b=C[2],q=C[3],d=te=C[4],u=Q=C[5],C.length===6?(p=Math.sqrt(V*V+M*M),y=Math.sqrt(q*q+b*b),m=V||M?Ms(M,V)*Ki:0,v=b||q?Ms(b,q)*Ki+m:0,v&&(y*=Math.abs(Math.cos(v*po))),r.svg&&(d-=R-(R*V+O*b),u-=O-(R*M+O*q))):(ne=C[6],K=C[7],F=C[8],N=C[9],$=C[10],Z=C[11],d=C[12],u=C[13],f=C[14],S=Ms(ne,$),w=S*Ki,S&&(A=Math.cos(-S),I=Math.sin(-S),re=te*A+F*I,z=Q*A+N*I,X=ne*A+$*I,F=te*-I+F*A,N=Q*-I+N*A,$=ne*-I+$*A,Z=K*-I+Z*A,te=re,Q=z,ne=X),S=Ms(-b,$),_=S*Ki,S&&(A=Math.cos(-S),I=Math.sin(-S),re=V*A-F*I,z=M*A-N*I,X=b*A-$*I,Z=q*I+Z*A,V=re,M=z,b=X),S=Ms(M,V),m=S*Ki,S&&(A=Math.cos(S),I=Math.sin(S),re=V*A+M*I,z=te*A+Q*I,M=M*A-V*I,Q=Q*A-te*I,V=re,te=z),w&&Math.abs(w)+Math.abs(m)>359.9&&(w=m=0,_=180-_),p=et(Math.sqrt(V*V+M*M+b*b)),y=et(Math.sqrt(Q*Q+ne*ne)),S=Ms(te,Q),v=Math.abs(S)>2e-4?S*Ki:0,P=Z?1/(Z<0?-Z:Z):0),r.svg&&(re=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!MC(_n(e,He)),re&&e.setAttribute("transform",re))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(p*=-1,v+=m<=0?180:-180,m+=m<=0?180:-180):(y*=-1,v+=v<=0?180:-180)),n=n||r.uncache,r.x=d-((r.xPercent=d&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=u-((r.yPercent=u&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=f+o,r.scaleX=et(p),r.scaleY=et(y),r.rotation=et(m)+a,r.rotationX=et(w)+a,r.rotationY=et(_)+a,r.skewX=v+a,r.skewY=x+a,r.transformPerspective=P+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!n&&r.zOrigin||0)&&(i[on]=mh(c)),r.xOffset=r.yOffset=0,r.force3D=Tn.force3D,r.renderTransform=r.svg?x4:kC?DC:T4,r.uncache=0,r},mh=function(e){return(e=e.split(" "))[0]+" "+e[1]},Vd=function(e,n,r){var i=Lt(n);return et(parseFloat(n)+parseFloat(Pi(e,"x",r+"px",i)))+i},T4=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,DC(e,n)},Bi="0deg",xa="0px",Ui=") ",DC=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,c=r.rotation,d=r.rotationY,u=r.rotationX,f=r.skewX,p=r.skewY,y=r.scaleX,m=r.scaleY,w=r.transformPerspective,_=r.force3D,v=r.target,x=r.zOrigin,P="",R=_==="auto"&&e&&e!==1||_===!0;if(x&&(u!==Bi||d!==Bi)){var O=parseFloat(d)*po,C=Math.sin(O),S=Math.cos(O),A;O=parseFloat(u)*po,A=Math.cos(O),o=Vd(v,o,C*A*-x),a=Vd(v,a,-Math.sin(O)*-x),l=Vd(v,l,S*A*-x+x)}w!==xa&&(P+="perspective("+w+Ui),(i||s)&&(P+="translate("+i+"%, "+s+"%) "),(R||o!==xa||a!==xa||l!==xa)&&(P+=l!==xa||R?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ui),c!==Bi&&(P+="rotate("+c+Ui),d!==Bi&&(P+="rotateY("+d+Ui),u!==Bi&&(P+="rotateX("+u+Ui),(f!==Bi||p!==Bi)&&(P+="skew("+f+", "+p+Ui),(y!==1||m!==1)&&(P+="scale("+y+", "+m+Ui),v.style[He]=P||"translate(0, 0)"},x4=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,c=r.skewX,d=r.skewY,u=r.scaleX,f=r.scaleY,p=r.target,y=r.xOrigin,m=r.yOrigin,w=r.xOffset,_=r.yOffset,v=r.forceCSS,x=parseFloat(o),P=parseFloat(a),R,O,C,S,A;l=parseFloat(l),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,l+=d),l||c?(l*=po,c*=po,R=Math.cos(l)*u,O=Math.sin(l)*u,C=Math.sin(l-c)*-f,S=Math.cos(l-c)*f,c&&(d*=po,A=Math.tan(c-d),A=Math.sqrt(1+A*A),C*=A,S*=A,d&&(A=Math.tan(d),A=Math.sqrt(1+A*A),R*=A,O*=A)),R=et(R),O=et(O),C=et(C),S=et(S)):(R=u,S=f,O=C=0),(x&&!~(o+"").indexOf("px")||P&&!~(a+"").indexOf("px"))&&(x=Pi(p,"x",o,"px"),P=Pi(p,"y",a,"px")),(y||m||w||_)&&(x=et(x+y-(y*R+m*C)+w),P=et(P+m-(y*O+m*S)+_)),(i||s)&&(A=p.getBBox(),x=et(x+i/100*A.width),P=et(P+s/100*A.height)),A="matrix("+R+","+O+","+C+","+S+","+x+","+P+")",p.setAttribute("transform",A),v&&(p.style[He]=A)},E4=function(e,n,r,i,s){var o=360,a=gt(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Ki:1),c=l-i,d=i+c+"deg",u,f;return a&&(u=s.split("_")[1],u==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),u==="cw"&&c<0?c=(c+o*sT)%o-~~(c/o)*o:u==="ccw"&&c>0&&(c=(c-o*sT)%o-~~(c/o)*o)),e._pt=f=new sn(e._pt,n,r,i,c,s4),f.e=d,f.u="deg",e._props.push(r),f},fT=function(e,n){for(var r in n)e[r]=n[r];return e},S4=function(e,n,r){var i=fT({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,c,d,u,f,p,y;i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[He]=n,a=Bl(r,1),Ci(r,He),r.setAttribute("transform",c)):(c=getComputedStyle(r)[He],o[He]=n,a=Bl(r,1),o[He]=c);for(l in Dr)c=i[l],d=a[l],c!==d&&s.indexOf(l)<0&&(p=Lt(c),y=Lt(d),u=p!==y?Pi(r,l,c,y):parseFloat(c),f=parseFloat(d),e._pt=new sn(e._pt,a,l,u,f-u,ym),e._pt.u=y||0,e._props.push(l));fT(a,i)};rn("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",i="Bottom",s="Left",o=(e<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map(function(a){return e<2?t+a:"border"+a+t});ph[e>1?"border"+t:t]=function(a,l,c,d,u){var f,p;if(arguments.length<4)return f=o.map(function(y){return _r(a,y,c)}),p=f.join(" "),p.split(f[0]).length===5?f[0]:p;f=(d+"").split(" "),p={},o.forEach(function(y,m){return p[y]=f[m]=f[m]||f[(m-1)/2|0]}),a.init(l,p,u)}});var NC={name:"css",register:vm,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,c,d,u,f,p,y,m,w,_,v,x,P,R,O,C,S,A;Ny||vm(),this.styles=this.styles||IC(e),S=this.styles.props,this.tween=r;for(m in n)if(m!=="autoRound"&&(d=n[m],!(dn[m]&&yC(m,n,r,i,e,s)))){if(p=typeof d,y=ph[m],p==="function"&&(d=d.call(r,i,e,s),p=typeof d),p==="string"&&~d.indexOf("random(")&&(d=Ol(d)),y)y(this,e,m,d,r)&&(C=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),d+="",gi.lastIndex=0,gi.test(c)||(w=Lt(c),_=Lt(d),_?w!==_&&(c=Pi(e,m,c,_)+_):w&&(d+=w)),this.add(a,"setProperty",c,d,i,s,0,0,m),o.push(m),S.push(m,0,a[m]);else if(p!=="undefined"){if(l&&m in l?(c=typeof l[m]=="function"?l[m].call(r,i,e,s):l[m],gt(c)&&~c.indexOf("random(")&&(c=Ol(c)),Lt(c+"")||c==="auto"||(c+=Tn.units[m]||Lt(_r(e,m))||""),(c+"").charAt(1)==="="&&(c=_r(e,m))):c=_r(e,m),f=parseFloat(c),v=p==="string"&&d.charAt(1)==="="&&d.substr(0,2),v&&(d=d.substr(2)),u=parseFloat(d),m in rr&&(m==="autoAlpha"&&(f===1&&_r(e,"visibility")==="hidden"&&u&&(f=0),S.push("visibility",0,a.visibility),ni(this,a,"visibility",f?"inherit":"hidden",u?"inherit":"hidden",!u)),m!=="scale"&&m!=="transform"&&(m=rr[m],~m.indexOf(",")&&(m=m.split(",")[0]))),x=m in Dr,x){if(this.styles.save(m),A=d,p==="string"&&d.substring(0,6)==="var(--"){if(d=_n(e,d.substring(4,d.indexOf(")"))),d.substring(0,5)==="calc("){var I=e.style.perspective;e.style.perspective=d,d=_n(e,"perspective"),I?e.style.perspective=I:Ci(e,"perspective")}u=parseFloat(d)}if(P||(R=e._gsap,R.renderTransform&&!n.parseTransform||Bl(e,n.parseTransform),O=n.smoothOrigin!==!1&&R.smooth,P=this._pt=new sn(this._pt,a,He,0,1,R.renderTransform,R,0,-1),P.dep=1),m==="scale")this._pt=new sn(this._pt,R,"scaleY",R.scaleY,(v?ho(R.scaleY,v+u):u)-R.scaleY||0,ym),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){S.push(on,0,a[on]),d=v4(d),R.svg?wm(e,d,0,O,0,this):(_=parseFloat(d.split(" ")[2])||0,_!==R.zOrigin&&ni(this,R,"zOrigin",R.zOrigin,_),ni(this,a,m,mh(c),mh(d)));continue}else if(m==="svgOrigin"){wm(e,d,1,O,0,this);continue}else if(m in VC){E4(this,R,m,f,v?ho(f,v+d):d);continue}else if(m==="smoothOrigin"){ni(this,R,"smooth",R.smooth,d);continue}else if(m==="force3D"){R[m]=d;continue}else if(m==="transform"){S4(this,d,e);continue}}else m in a||(m=jo(m)||m);if(x||(u||u===0)&&(f||f===0)&&!i4.test(d)&&m in a)w=(c+"").substr((f+"").length),u||(u=0),_=Lt(d)||(m in Tn.units?Tn.units[m]:w),w!==_&&(f=Pi(e,m,c,_)),this._pt=new sn(this._pt,x?R:a,m,f,(v?ho(f,v+u):u)-f,!x&&(_==="px"||m==="zIndex")&&n.autoRound!==!1?l4:ym),this._pt.u=_||0,x&&A!==d?(this._pt.b=c,this._pt.e=A,this._pt.r=a4):w!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=o4);else if(m in a)_4.call(this,e,m,c,v?v+d:d);else if(m in e)this.add(e,m,c||e[m],v?v+d:d,i,s);else if(m!=="parseTransform"){Ay(m,d);continue}x||(m in a?S.push(m,0,a[m]):typeof e[m]=="function"?S.push(m,2,e[m]()):S.push(m,1,c||e[m])),o.push(m)}}C&&EC(this)},render:function(e,n){if(n.tween._time||!Oy())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:_r,aliases:rr,getSetter:function(e,n,r){var i=rr[n];return i&&i.indexOf(",")<0&&(n=i),n in Dr&&n!==on&&(e._gsap.x||_r(e,"x"))?r&&iT===r?n==="scale"?f4:h4:(iT=r||{})&&(n==="scale"?d4:p4):e.style&&!xy(e.style[n])?u4:~n.indexOf("-")?c4:My(e,n)},core:{_removeProperty:Ci,_getMatrix:Ly}};un.utils.checkPrefix=jo;un.core.getStyleSaver=IC;(function(t,e,n,r){var i=rn(t+","+e+","+n,function(s){Dr[s]=1});rn(e,function(s){Tn.units[s]="deg",VC[s]=1}),rr[i[13]]=t+","+e,rn(r,function(s){var o=s.split(":");rr[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");rn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Tn.units[t]="px"});un.registerPlugin(NC);var wt=un.registerPlugin(NC)||un;wt.core.Tween;var jy={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;try{var F=new OffscreenCanvas(1,1),N=F.getContext("2d");N.fillRect(0,0,1,1);var $=F.transferToImageBitmap();N.createPattern($,"no-repeat")}catch{return!1}return!0}();function l(){}function c(F){var N=n.exports.Promise,$=N!==void 0?N:e.Promise;return typeof $=="function"?new $(F):(F(l,l),null)}var d=function(F,N){return{transform:function($){if(F)return $;if(N.has($))return N.get($);var K=new OffscreenCanvas($.width,$.height),Z=K.getContext("2d");return Z.drawImage($,0,0),N.set($,K),K},clear:function(){N.clear()}}}(a,new Map),u=function(){var F=Math.floor(16.666666666666668),N,$,K={},Z=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(N=function(ne){var se=Math.random();return K[se]=requestAnimationFrame(function J(de){Z===de||Z+F-1<de?(Z=de,delete K[se],ne()):K[se]=requestAnimationFrame(J)}),se},$=function(ne){K[ne]&&cancelAnimationFrame(K[ne])}):(N=function(ne){return setTimeout(ne,F)},$=function(ne){return clearTimeout(ne)}),{frame:N,cancel:$}}(),f=function(){var F,N,$={};function K(Z){function ne(se,J){Z.postMessage({options:se||{},callback:J})}Z.init=function(J){var de=J.transferControlToOffscreen();Z.postMessage({canvas:de},[de])},Z.fire=function(J,de,_e){if(N)return ne(J,null),N;var ve=Math.random().toString(36).slice(2);return N=c(function(pe){function B(ce){ce.data.callback===ve&&(delete $[ve],Z.removeEventListener("message",B),N=null,d.clear(),_e(),pe())}Z.addEventListener("message",B),ne(J,ve),$[ve]=B.bind(null,{data:{callback:ve}})}),N},Z.reset=function(){Z.postMessage({reset:!0});for(var J in $)$[J](),delete $[J]}}return function(){if(F)return F;if(!r&&s){var Z=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{F=new Worker(URL.createObjectURL(new Blob([Z])))}catch(ne){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",ne),null}K(F)}return F}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(F,N){return N?N(F):F}function m(F){return F!=null}function w(F,N,$){return y(F&&m(F[N])?F[N]:p[N],$)}function _(F){return F<0?0:Math.floor(F)}function v(F,N){return Math.floor(Math.random()*(N-F))+F}function x(F){return parseInt(F,16)}function P(F){return F.map(R)}function R(F){var N=String(F).replace(/[^0-9a-f]/gi,"");return N.length<6&&(N=N[0]+N[0]+N[1]+N[1]+N[2]+N[2]),{r:x(N.substring(0,2)),g:x(N.substring(2,4)),b:x(N.substring(4,6))}}function O(F){var N=w(F,"origin",Object);return N.x=w(N,"x",Number),N.y=w(N,"y",Number),N}function C(F){F.width=document.documentElement.clientWidth,F.height=document.documentElement.clientHeight}function S(F){var N=F.getBoundingClientRect();F.width=N.width,F.height=N.height}function A(F){var N=document.createElement("canvas");return N.style.position="fixed",N.style.top="0px",N.style.left="0px",N.style.pointerEvents="none",N.style.zIndex=F,N}function I(F,N,$,K,Z,ne,se,J,de){F.save(),F.translate(N,$),F.rotate(ne),F.scale(K,Z),F.arc(0,0,1,se,J,de),F.restore()}function V(F){var N=F.angle*(Math.PI/180),$=F.spread*(Math.PI/180);return{x:F.x,y:F.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:F.startVelocity*.5+Math.random()*F.startVelocity,angle2D:-N+(.5*$-Math.random()*$),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:F.color,shape:F.shape,tick:0,totalTicks:F.ticks,decay:F.decay,drift:F.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:F.gravity*3,ovalScalar:.6,scalar:F.scalar,flat:F.flat}}function M(F,N){N.x+=Math.cos(N.angle2D)*N.velocity+N.drift,N.y+=Math.sin(N.angle2D)*N.velocity+N.gravity,N.velocity*=N.decay,N.flat?(N.wobble=0,N.wobbleX=N.x+10*N.scalar,N.wobbleY=N.y+10*N.scalar,N.tiltSin=0,N.tiltCos=0,N.random=1):(N.wobble+=N.wobbleSpeed,N.wobbleX=N.x+10*N.scalar*Math.cos(N.wobble),N.wobbleY=N.y+10*N.scalar*Math.sin(N.wobble),N.tiltAngle+=.1,N.tiltSin=Math.sin(N.tiltAngle),N.tiltCos=Math.cos(N.tiltAngle),N.random=Math.random()+2);var $=N.tick++/N.totalTicks,K=N.x+N.random*N.tiltCos,Z=N.y+N.random*N.tiltSin,ne=N.wobbleX+N.random*N.tiltCos,se=N.wobbleY+N.random*N.tiltSin;if(F.fillStyle="rgba("+N.color.r+", "+N.color.g+", "+N.color.b+", "+(1-$)+")",F.beginPath(),o&&N.shape.type==="path"&&typeof N.shape.path=="string"&&Array.isArray(N.shape.matrix))F.fill(re(N.shape.path,N.shape.matrix,N.x,N.y,Math.abs(ne-K)*.1,Math.abs(se-Z)*.1,Math.PI/10*N.wobble));else if(N.shape.type==="bitmap"){var J=Math.PI/10*N.wobble,de=Math.abs(ne-K)*.1,_e=Math.abs(se-Z)*.1,ve=N.shape.bitmap.width*N.scalar,pe=N.shape.bitmap.height*N.scalar,B=new DOMMatrix([Math.cos(J)*de,Math.sin(J)*de,-Math.sin(J)*_e,Math.cos(J)*_e,N.x,N.y]);B.multiplySelf(new DOMMatrix(N.shape.matrix));var ce=F.createPattern(d.transform(N.shape.bitmap),"no-repeat");ce.setTransform(B),F.globalAlpha=1-$,F.fillStyle=ce,F.fillRect(N.x-ve/2,N.y-pe/2,ve,pe),F.globalAlpha=1}else if(N.shape==="circle")F.ellipse?F.ellipse(N.x,N.y,Math.abs(ne-K)*N.ovalScalar,Math.abs(se-Z)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI):I(F,N.x,N.y,Math.abs(ne-K)*N.ovalScalar,Math.abs(se-Z)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI);else if(N.shape==="star")for(var ie=Math.PI/2*3,Me=4*N.scalar,Kt=8*N.scalar,cn=N.x,$n=N.y,Yn=5,Qt=Math.PI/Yn;Yn--;)cn=N.x+Math.cos(ie)*Kt,$n=N.y+Math.sin(ie)*Kt,F.lineTo(cn,$n),ie+=Qt,cn=N.x+Math.cos(ie)*Me,$n=N.y+Math.sin(ie)*Me,F.lineTo(cn,$n),ie+=Qt;else F.moveTo(Math.floor(N.x),Math.floor(N.y)),F.lineTo(Math.floor(N.wobbleX),Math.floor(Z)),F.lineTo(Math.floor(ne),Math.floor(se)),F.lineTo(Math.floor(K),Math.floor(N.wobbleY));return F.closePath(),F.fill(),N.tick<N.totalTicks}function b(F,N,$,K,Z){var ne=N.slice(),se=F.getContext("2d"),J,de,_e=c(function(ve){function pe(){J=de=null,se.clearRect(0,0,K.width,K.height),d.clear(),Z(),ve()}function B(){r&&!(K.width===i.width&&K.height===i.height)&&(K.width=F.width=i.width,K.height=F.height=i.height),!K.width&&!K.height&&($(F),K.width=F.width,K.height=F.height),se.clearRect(0,0,K.width,K.height),ne=ne.filter(function(ce){return M(se,ce)}),ne.length?J=u.frame(B):pe()}J=u.frame(B),de=pe});return{addFettis:function(ve){return ne=ne.concat(ve),_e},canvas:F,promise:_e,reset:function(){J&&u.cancel(J),de&&de()}}}function q(F,N){var $=!F,K=!!w(N||{},"resize"),Z=!1,ne=w(N,"disableForReducedMotion",Boolean),se=s&&!!w(N||{},"useWorker"),J=se?f():null,de=$?C:S,_e=F&&J?!!F.__confetti_initialized:!1,ve=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,pe;function B(ie,Me,Kt){for(var cn=w(ie,"particleCount",_),$n=w(ie,"angle",Number),Yn=w(ie,"spread",Number),Qt=w(ie,"startVelocity",Number),su=w(ie,"decay",Number),hf=w(ie,"gravity",Number),Ko=w(ie,"drift",Number),Cs=w(ie,"colors",P),ou=w(ie,"ticks",Number),at=w(ie,"shapes"),yt=w(ie,"scalar"),Ps=!!w(ie,"flat"),Qo=O(ie),Xo=cn,Yo=[],Di=F.width*Qo.x,au=F.height*Qo.y;Xo--;)Yo.push(V({x:Di,y:au,angle:$n,spread:Yn,startVelocity:Qt,color:Cs[Xo%Cs.length],shape:at[v(0,at.length)],ticks:ou,decay:su,gravity:hf,drift:Ko,scalar:yt,flat:Ps}));return pe?pe.addFettis(Yo):(pe=b(F,Yo,de,Me,Kt),pe.promise)}function ce(ie){var Me=ne||w(ie,"disableForReducedMotion",Boolean),Kt=w(ie,"zIndex",Number);if(Me&&ve)return c(function(Qt){Qt()});$&&pe?F=pe.canvas:$&&!F&&(F=A(Kt),document.body.appendChild(F)),K&&!_e&&de(F);var cn={width:F.width,height:F.height};J&&!_e&&J.init(F),_e=!0,J&&(F.__confetti_initialized=!0);function $n(){if(J){var Qt={getBoundingClientRect:function(){if(!$)return F.getBoundingClientRect()}};de(Qt),J.postMessage({resize:{width:Qt.width,height:Qt.height}});return}cn.width=cn.height=null}function Yn(){pe=null,K&&(Z=!1,e.removeEventListener("resize",$n)),$&&F&&(document.body.contains(F)&&document.body.removeChild(F),F=null,_e=!1)}return K&&!Z&&(Z=!0,e.addEventListener("resize",$n,!1)),J?J.fire(ie,cn,Yn):B(ie,cn,Yn)}return ce.reset=function(){J&&J.reset(),pe&&pe.reset()},ce}var te;function Q(){return te||(te=q(null,{useWorker:!0,resize:!0})),te}function re(F,N,$,K,Z,ne,se){var J=new Path2D(F),de=new Path2D;de.addPath(J,new DOMMatrix(N));var _e=new Path2D;return _e.addPath(de,new DOMMatrix([Math.cos(se)*Z,Math.sin(se)*Z,-Math.sin(se)*ne,Math.cos(se)*ne,$,K])),_e}function z(F){if(!o)throw new Error("path confetti are not supported in this browser");var N,$;typeof F=="string"?N=F:(N=F.path,$=F.matrix);var K=new Path2D(N),Z=document.createElement("canvas"),ne=Z.getContext("2d");if(!$){for(var se=1e3,J=se,de=se,_e=0,ve=0,pe,B,ce=0;ce<se;ce+=2)for(var ie=0;ie<se;ie+=2)ne.isPointInPath(K,ce,ie,"nonzero")&&(J=Math.min(J,ce),de=Math.min(de,ie),_e=Math.max(_e,ce),ve=Math.max(ve,ie));pe=_e-J,B=ve-de;var Me=10,Kt=Math.min(Me/pe,Me/B);$=[Kt,0,0,Kt,-Math.round(pe/2+J)*Kt,-Math.round(B/2+de)*Kt]}return{type:"path",path:N,matrix:$}}function X(F){var N,$=1,K="#000000",Z='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof F=="string"?N=F:(N=F.text,$="scalar"in F?F.scalar:$,Z="fontFamily"in F?F.fontFamily:Z,K="color"in F?F.color:K);var ne=10*$,se=""+ne+"px "+Z,J=new OffscreenCanvas(ne,ne),de=J.getContext("2d");de.font=se;var _e=de.measureText(N),ve=Math.ceil(_e.actualBoundingBoxRight+_e.actualBoundingBoxLeft),pe=Math.ceil(_e.actualBoundingBoxAscent+_e.actualBoundingBoxDescent),B=2,ce=_e.actualBoundingBoxLeft+B,ie=_e.actualBoundingBoxAscent+B;ve+=B+B,pe+=B+B,J=new OffscreenCanvas(ve,pe),de=J.getContext("2d"),de.font=se,de.fillStyle=K,de.fillText(N,ce,ie);var Me=1/$;return{type:"bitmap",bitmap:J.transferToImageBitmap(),matrix:[Me,0,0,Me,-ve*Me/2,-pe*Me/2]}}n.exports=function(){return Q().apply(this,arguments)},n.exports.reset=function(){Q().reset()},n.exports.create=q,n.exports.shapeFromPath=z,n.exports.shapeFromText=X})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),jy,!1);const cf=jy.exports;jy.exports.create;let Qr=null,iu=null;function OC(){Qr||(Qr=document.createElement("canvas"),Qr.style.cssText=`
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10000;
  `,document.body.appendChild(Qr),iu=cf.create(Qr,{resize:!0,useWorker:!0}))}function gh(t){const e=iu||cf,n=(t==null?void 0:t.colors)||["#FFD700","#FFA500","#FF6B6B","#4ECDC4","#45B7D1"],i={normal:{particleCount:100,spread:70,duration:1},epic:{particleCount:200,spread:100,duration:2},legendary:{particleCount:300,spread:180,duration:3}}[(t==null?void 0:t.intensity)||"epic"];e({particleCount:i.particleCount,spread:i.spread,origin:{y:.7,x:.5},colors:n,startVelocity:45,gravity:.8,ticks:300}),i.duration>=2&&setTimeout(()=>{e({particleCount:50,angle:60,spread:55,origin:{x:0,y:.6},colors:n}),e({particleCount:50,angle:120,spread:55,origin:{x:1,y:.6},colors:n})},200),i.duration>=3&&setTimeout(()=>{e({particleCount:150,spread:180,origin:{y:.5,x:.5},colors:n,startVelocity:30,gravity:.5})},500)}function tl(t){(iu||cf)({particleCount:30,spread:50,origin:t||{y:.7,x:.5},colors:["#FFD700","#FFA500"],startVelocity:25,gravity:1.2,ticks:100})}function A4(t){gh({colors:{"soggy-bottom-pirates":["#E4A11B","#4A90A4","#5C4033","#F5E6D3","#FF6B35"],"neon-nightmares":["#FF00FF","#00FFFF","#FF0080","#80FF00","#FFFF00"]}[t],intensity:"epic"})}function FC(t=3e3){const e=iu||cf,n=Date.now()+t,r=["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"],i=()=>{e({particleCount:3,angle:60,spread:55,origin:{x:0,y:.6},colors:r}),e({particleCount:3,angle:120,spread:55,origin:{x:1,y:.6},colors:r}),Date.now()<n&&requestAnimationFrame(i)};i()}function C4(){Qr&&(Qr.remove(),Qr=null,iu=null)}function By(){const{themeId:t,theme:e}=Or(),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>{if(!r.current)return OC(),ft.init(),r.current=!0,()=>{n.current&&n.current.kill()}},[]),D.useEffect(()=>{ft.loadTheme(t)},[t]);const i=D.useCallback((v,x)=>{ft.play(v,x)},[]),s=D.useCallback(()=>{ft.startBattleMusic()},[]),o=D.useCallback(()=>{ft.stopBattleMusic()},[]),a=D.useCallback(()=>{ft.startAmbient()},[]),l=D.useCallback(()=>{ft.stopAmbient()},[]),c=D.useCallback((v={})=>{const{intensity:x="medium",duration:P=.5}=v,O={subtle:{x:2,y:2,rotation:.5},medium:{x:5,y:5,rotation:1},heavy:{x:10,y:8,rotation:2},earthquake:{x:20,y:15,rotation:4}}[x],C=document.body,S=wt.timeline({onComplete:()=>{wt.set(C,{x:0,y:0,rotation:0})}}),A=Math.floor(P*20);for(let I=0;I<A;I++){const M=1-I/A;S.to(C,{x:(Math.random()-.5)*O.x*2*M,y:(Math.random()-.5)*O.y*2*M,rotation:(Math.random()-.5)*O.rotation*2*M,duration:P/A,ease:"none"})}return S},[]),d=D.useCallback(v=>{const{barsContainer:x,winnerBar:P,intensity:R="epic",confettiColors:O,onComplete:C}=v;n.current&&n.current.kill();const S=wt.timeline({onComplete:C});if(n.current=S,S.call(()=>{i("timerEnd")}),S.to(document.body,{scale:1.02,duration:.3,ease:"power2.in"}),S.add(c({intensity:"heavy",duration:.4}),"<"),S.to(document.body,{scale:1,duration:.2,ease:"power2.out"}),x){const A=x.querySelectorAll("[data-vote-bar]");S.fromTo(A,{scaleX:0,transformOrigin:"left center"},{scaleX:1,duration:.8,stagger:.15,ease:"power3.out"},"+=0.2")}return P&&(S.call(()=>{i("victory")}),S.to(P,{scale:1.1,duration:.3,ease:"back.out(1.7)"}),S.to(P,{boxShadow:"0 0 30px currentColor, 0 0 60px currentColor",duration:.2},"<"),S.call(()=>{P.classList.add("winner-glow")}),S.to(P,{scale:1,duration:.4,ease:"power2.out"},"+=0.3")),S.call(()=>{const A=O||P4(t);gh({colors:A,intensity:R})},[],"+=0.1"),S},[i,c,t]),u=D.useCallback(v=>{const{diceElement:x,sides:P,result:R,dc:O,isCritical:C,onComplete:S}=v;n.current&&n.current.kill();const A=wt.timeline({onComplete:()=>S==null?void 0:S(R)});if(n.current=A,!x)return console.warn("No dice element provided"),A;A.to(x,{scale:.8,rotateZ:-10,duration:.3,ease:"power2.in"}),A.call(()=>{i("diceRoll")});const I=1.5,V=15;for(let te=0;te<V;te++){const Q=te/V,re=1-Math.pow(1-Q,3);A.to(x,{rotateX:`+=${Math.random()*180+90}`,rotateY:`+=${Math.random()*180+90}`,rotateZ:`+=${Math.random()*90-45}`,scale:.8+re*.4,y:-20*(1-re),duration:I/V*(1+re*.5),ease:"power1.out"})}A.call(()=>{i("diceImpact"),c({intensity:"subtle",duration:.2})}),A.to(x,{rotateX:0,rotateY:0,rotateZ:0,scale:1.2,y:0,duration:.2,ease:"back.out(1.7)"}),A.to(x,{scale:1,duration:.3,ease:"power2.out"}),A.call(()=>{x.setAttribute("data-result",String(R))},[],"-=0.2");const M=O!==void 0&&R>=O;return P===20&&R===20||C&&M?(A.call(()=>{i("victory"),gh({intensity:"legendary",colors:["#FFD700","#FFFF00","#FFA500"]})}),A.to(x,{scale:1.5,duration:.3,ease:"back.out(2)"}),A.to(x,{boxShadow:"0 0 50px #FFD700, 0 0 100px #FFA500",duration:.2},"<")):R===1?(A.call(()=>{i("error")}),A.to(x,{filter:"grayscale(100%) brightness(0.5)",scale:.9,duration:.3}),A.to(x,{filter:"none",scale:1,duration:.5},"+=0.5")):M&&A.call(()=>{i("victory",{volume:.6}),tl({x:.5,y:.3})}),A},[i,c]),f=D.useCallback(v=>{if(ft.playCountdownTick(v),v<=5&&v>0){const x=1-v/5;wt.to(document.body,{scale:1+.02*x,duration:.1,yoyo:!0,repeat:1,ease:"power2.inOut"})}},[]),p=D.useCallback(v=>{i("votecast"),tl({x:.5,y:.7})},[i]),y=D.useCallback(()=>{s();const v=wt.timeline();return v.to(document.body,{filter:"saturate(1.3) contrast(1.1)",duration:.5}),c({intensity:"medium",duration:.3}),v},[s,c]),m=D.useCallback(()=>{o(),wt.to(document.body,{filter:"none",duration:1})},[o]),w=D.useCallback((v,x)=>{const P=wt.timeline();return P.to(document.body,{opacity:0,scale:.95,duration:.3,ease:"power2.in"}),P.call(()=>{ft.loadTheme(v),x(v),i("whoosh")}),P.to(document.body,{opacity:1,scale:1,duration:.5,ease:"power2.out"}),P.call(()=>{v==="neon-nightmares"?wt.to(document.body,{skewX:2,duration:.05,yoyo:!0,repeat:5}):v==="soggy-bottom-pirates"&&wt.from(document.body,{rotateZ:-1,duration:.5,ease:"sine.inOut",yoyo:!0,repeat:2})}),P},[i]),_=D.useCallback((v="quick")=>{switch(v){case"quick":tl();break;case"winner":A4(t);break;case"fireworks":FC(5e3);break}},[t]);return{playSound:i,startBattleMusic:s,stopBattleMusic:o,startAmbient:a,stopAmbient:l,shakeScreen:c,triggerCelebration:_,triggerWinnerReveal:d,triggerDiceRoll:u,triggerCountdownTick:f,triggerVoteCast:p,enterBattleMode:y,exitBattleMode:m,transitionTheme:w,audioMixer:ft}}function P4(t){const e={"tmp-base":["#FF1493","#00CED1","#FFD700","#FF6B6B","#4ECDC4"],"soggy-bottom-pirates":["#E4A11B","#4A90A4","#5C4033","#F5E6D3","#FF6B35"],"neon-nightmares":["#FF00FF","#00FFFF","#FF0080","#80FF00","#FFFF00"]};return e[t]||e["tmp-base"]}async function to(t,e){try{const n={type:t,timestamp:Date.now(),serverTime:fD()};(e==null?void 0:e.intensity)!==void 0&&(n.intensity=e.intensity),(e==null?void 0:e.soundKey)!==void 0&&(n.soundKey=e.soundKey),await Mt(Te(xe,"config","live-cues"),n),console.log(` Broadcast cue: ${t}`,e)}catch(n){console.error("Failed to broadcast cue:",n)}}async function I4(){await to("none")}function k4(t={}){const{enabled:e=!0,onCue:n}=t,{playSound:r,shakeScreen:i,triggerCelebration:s,enterBattleMode:o,exitBattleMode:a,startAmbient:l,stopAmbient:c}=By(),d=D.useRef(0),u=D.useRef(!0),f=D.useCallback(p=>{if(!e){console.log(" Cue skipped (disabled)");return}if(p.timestamp<=d.current){console.log(" Cue skipped (already processed)",p.timestamp,"<=",d.current);return}if(u.current){console.log(" Cue skipped (first load - preventing replay of old cue)"),u.current=!1,d.current=p.timestamp;return}if(d.current=p.timestamp,n==null||n(p),p.type!=="none")switch(console.log(` EXECUTING CUE: ${p.type}`,p),p.type){case"battle-start":o();break;case"battle-end":a();break;case"celebration-quick":s("quick");break;case"celebration-winner":s("winner");break;case"celebration-fireworks":s("fireworks");break;case"shake-light":i({intensity:"subtle"});break;case"shake-heavy":i({intensity:"heavy"});break;case"shake-earthquake":i({intensity:"earthquake",duration:1});break;case"fanfare":r("victory");break;case"ambient-start":l();break;case"ambient-stop":c();break;case"sound-effect":p.soundKey&&r(p.soundKey);break;default:console.warn(`Unknown cue type: ${p.type}`)}},[e,n,r,i,s,o,a,l,c]);return D.useEffect(()=>{if(!e)return;console.log(" Cue listener starting up...");const p=Un(Te(xe,"config","live-cues"),y=>{if(y.exists()){const m=y.data();console.log(" Received cue from Firebase:",m.type,"timestamp:",m.timestamp),f(m)}else console.log(" No cue document exists yet")},y=>{console.error("Cue listener error:",y)});return()=>{console.log(" Cue listener shutting down"),p()}},[e,f]),{broadcastCue:to,clearCue:I4}}const b4="misadventure2025";function R4(){var pe;const[t,e]=D.useState(!1),[n,r]=D.useState(""),[i,s]=D.useState({type:"none"}),[o,a]=D.useState({question:"What should the party do?",options:[{id:"a",label:"Fight",emoji:""},{id:"b",label:"Flee",emoji:""}],isOpen:!1,timer:60}),[l,c]=D.useState({template:"The [ADJECTIVE] wizard casts [SPELL] at the [CREATURE]!"}),[d,u]=D.useState({description:"A mysterious tavern keeper with a scar across their face",selectionMode:"random"}),[f,p]=D.useState({prompt:"Stealth check to sneak past the guards!",diceType:"d20",dc:15,modifier:0}),[y,m]=D.useState({}),[w,_]=D.useState(0),[v,x]=D.useState(!1),{themeId:P,setThemeId:R}=Or(),{playSound:O,startAmbient:C,stopAmbient:S,shakeScreen:A,triggerCelebration:I,enterBattleMode:V,exitBattleMode:M,audioMixer:b}=By(),q=B=>{B?(V(),x(!0)):(M(),x(!1)),to(B?"battle-start":"battle-end")},te=B=>{I(B),to(`celebration-${B}`)},Q=B=>{A({intensity:B==="light"?"subtle":B}),to(`shake-${B}`)},re=B=>{B?C():S(),to(B?"ambient-start":"ambient-stop")};D.useEffect(()=>{sessionStorage.getItem("mtp-admin-auth")==="true"&&e(!0)},[]),D.useEffect(()=>{if(!t)return;const B=Un(Te(xe,"config","active-interaction"),ce=>{ce.exists()&&s(ce.data())});return()=>B()},[t]),D.useEffect(()=>{if(!t)return;const B=Un(Te(xe,"votes","current-vote"),ce=>{if(ce.exists()){const ie=ce.data();m(ie.counts||{}),_(ie.totalVotes||0)}else m({}),_(0)});return()=>B()},[t]);const z=B=>{B.preventDefault(),n===b4?(e(!0),sessionStorage.setItem("mtp-admin-auth","true")):alert("Wrong password, adventurer!")},X=()=>{e(!1),sessionStorage.removeItem("mtp-admin-auth")},F=async()=>{try{console.log("Attempting to launch voting...");const B=`vote-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;await Mt(Te(xe,"config","active-interaction"),{type:"vote",question:o.question,options:o.options,isOpen:!0,timer:o.timer,startedAt:Date.now(),sessionId:B}),console.log("active-interaction written successfully");const ce={};o.options.forEach(ie=>{ce[ie.id]=0}),await Mt(Te(xe,"votes","current-vote"),{counts:ce,totalVotes:0}),console.log("votes/current-vote written successfully")}catch(B){console.error("Failed to launch voting:",B),alert(`Failed to launch voting: ${B.message}`)}},N=async()=>{await Mt(Te(xe,"config","active-interaction"),{...i,isOpen:!1})},$=async()=>{await Mt(Te(xe,"config","active-interaction"),{...i,isOpen:!0,startedAt:Date.now()})},K=async()=>{await Mt(Te(xe,"config","active-interaction"),{type:"none"})},Z=async()=>{var ie;if(!confirm("Reset all votes? This cannot be undone."))return;const B=`vote-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ce={};(ie=i.options)==null||ie.forEach(Me=>{ce[Me.id]=0}),await Mt(Te(xe,"config","active-interaction"),{...i,sessionId:B,startedAt:Date.now()}),await Mt(Te(xe,"votes","current-vote"),{counts:ce,totalVotes:0})},ne=async()=>{try{const B=[...l.template.matchAll(/\[([A-Z_]+)\]/g)].map(ie=>ie[1]),ce={};B.forEach(ie=>{ce[ie]=[]}),await Mt(Te(xe,"config","active-interaction"),{type:"madlibs"}),await Mt(Te(xe,"madlibs","current"),{template:l.template,blanks:B,currentBlankIndex:0,submissions:ce,winners:{},status:"collecting"})}catch(B){console.error("Failed to launch madlibs:",B),alert(`Failed to launch madlibs: ${B.message}`)}},se=async()=>{try{await Mt(Te(xe,"config","active-interaction"),{type:"npc-naming"}),await Mt(Te(xe,"npc-naming","current"),{description:d.description,imageUrl:d.imageUrl||null,submissions:[],winner:null,status:"collecting",selectionMode:d.selectionMode})}catch(B){console.error("Failed to launch NPC naming:",B),alert(`Failed to launch NPC naming: ${B.message}`)}},J=async()=>{try{await Mt(Te(xe,"config","active-interaction"),{type:"group-roll"}),await Mt(Te(xe,"group-roll","current"),{prompt:f.prompt,diceType:f.diceType,dc:f.dc,modifier:f.modifier,rolls:[],status:"rolling"})}catch(B){console.error("Failed to launch group roll:",B),alert(`Failed to launch group roll: ${B.message}`)}},de=(B,ce,ie)=>{const Me=[...o.options];Me[B]={...Me[B],[ce]:ie},a({...o,options:Me})},_e=()=>{o.options.length>=3||a({...o,options:[...o.options,{id:"c",label:"Option C",emoji:""}]})},ve=B=>{if(o.options.length<=2)return;const ce=o.options.filter((ie,Me)=>Me!==B);a({...o,options:ce})};return t?E.jsxs("div",{className:"admin-container",children:[E.jsxs("header",{className:"admin-header",children:[E.jsx("h1",{children:" GM Control Panel"}),E.jsx("button",{onClick:X,className:"logout-btn",children:"Logout"})]}),E.jsxs("div",{className:"admin-grid",children:[E.jsxs("section",{className:"admin-card status-card",children:[E.jsx("h2",{children:"Current Status"}),E.jsxs("div",{className:"status-indicator",children:[E.jsx("span",{className:`status-dot ${i.type!=="none"?"active":""}`}),E.jsxs("span",{children:[i.type==="none"&&"No active interaction",i.type==="vote"&&`Voting: ${i.isOpen?"OPEN":"CLOSED"}`]})]}),i.type==="vote"&&E.jsxs("div",{className:"live-stats",children:[E.jsxs("p",{children:[E.jsx("strong",{children:w})," votes cast"]}),E.jsx("div",{className:"vote-breakdown",children:(pe=i.options)==null?void 0:pe.map(B=>E.jsxs("div",{className:"vote-stat",children:[E.jsxs("span",{children:[B.emoji," ",B.label]}),E.jsx("span",{children:y[B.id]||0})]},B.id))})]})]}),i.type!=="none"&&E.jsxs("section",{className:"admin-card actions-card",children:[E.jsx("h2",{children:"Quick Actions"}),E.jsxs("div",{className:"action-buttons",children:[i.isOpen?E.jsx("button",{onClick:N,className:"btn-warning",children:" Close Voting"}):E.jsx("button",{onClick:$,className:"btn-success",children:" Reopen Voting"}),E.jsx("button",{onClick:Z,className:"btn-danger",children:" Reset Votes"}),E.jsx("button",{onClick:K,className:"btn-secondary",children:" End Interaction"})]})]}),E.jsxs("section",{className:"admin-card config-card",children:[E.jsx("h2",{children:"Configure Voting"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Question"}),E.jsx("input",{type:"text",value:o.question,onChange:B=>a({...o,question:B.target.value}),placeholder:"What should the party do?"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Timer (seconds)"}),E.jsx("input",{type:"number",value:o.timer,onChange:B=>a({...o,timer:parseInt(B.target.value)||60}),min:"10",max:"300"})]}),E.jsxs("div",{className:"options-config",children:[E.jsxs("label",{children:["Options (",o.options.length,"/3)"]}),o.options.map((B,ce)=>E.jsxs("div",{className:"option-row",children:[E.jsx("input",{type:"text",value:B.emoji,onChange:ie=>de(ce,"emoji",ie.target.value),className:"emoji-input",placeholder:""}),E.jsx("input",{type:"text",value:B.label,onChange:ie=>de(ce,"label",ie.target.value),placeholder:"Option label"}),o.options.length>2&&E.jsx("button",{onClick:()=>ve(ce),className:"remove-btn",children:""})]},ce)),o.options.length<3&&E.jsx("button",{onClick:_e,className:"add-option-btn",children:"+ Add Third Option"})]}),E.jsx("button",{onClick:F,className:"btn-primary launch-btn",disabled:i.type!=="none",children:" Launch Voting"}),i.type!=="none"&&E.jsx("p",{className:"hint",children:"End current interaction first"})]}),E.jsxs("section",{className:"admin-card theme-card",children:[E.jsx("h2",{children:" Show Theme"}),E.jsx("p",{className:"theme-hint",children:"Changes apply to all connected audiences instantly"}),E.jsx("div",{className:"theme-options",children:Object.values(Ro).map(B=>E.jsxs("button",{className:`theme-btn ${P===B.id?"active":""}`,onClick:async()=>{R(B.id),await Mt(Te(xe,"config","theme"),{themeId:B.id})},children:[E.jsx("span",{className:"theme-name",children:B.name}),E.jsx("span",{className:"theme-desc",children:B.description})]},B.id))})]}),E.jsxs("section",{className:"admin-card cue-card",children:[E.jsx("h2",{children:" Awesome Mix - Live Cues"}),E.jsx("p",{className:"theme-hint",children:"Manual effect triggers for dramatic moments"}),E.jsxs("div",{className:"cue-grid",children:[E.jsxs("div",{className:"cue-group",children:[E.jsx("h3",{children:" Sound FX"}),E.jsxs("div",{className:"cue-buttons",children:[E.jsx("button",{className:"cue-btn sfx",onClick:()=>O("victory"),title:"Victory fanfare",children:" Victory"}),E.jsx("button",{className:"cue-btn sfx",onClick:()=>O("error"),title:"Failure sound",children:" Fail"}),E.jsx("button",{className:"cue-btn sfx",onClick:()=>O("whoosh"),title:"Transition swoosh",children:" Whoosh"}),E.jsx("button",{className:"cue-btn sfx",onClick:()=>O("diceRoll"),title:"Dice rolling sound",children:" Dice"})]})]}),E.jsxs("div",{className:"cue-group",children:[E.jsx("h3",{children:" Battle Mode"}),E.jsx("div",{className:"cue-buttons",children:E.jsx("button",{className:`cue-btn battle ${v?"active":""}`,onClick:()=>q(!v),children:v?" End Combat":" Start Combat!"})}),E.jsx("small",{className:"cue-hint",children:v?"Battle music playing... (synced to all displays)":"Triggers battle music + visual intensity on ALL displays"})]}),E.jsxs("div",{className:"cue-group",children:[E.jsx("h3",{children:" Ambient"}),E.jsxs("div",{className:"cue-buttons",children:[E.jsx("button",{className:"cue-btn ambient",onClick:()=>re(!0),title:"Start ambient loop on all displays",children:" Start Ambient"}),E.jsx("button",{className:"cue-btn ambient",onClick:()=>re(!1),title:"Stop ambient loop on all displays",children:" Stop"})]})]}),E.jsxs("div",{className:"cue-group",children:[E.jsx("h3",{children:" Celebrations"}),E.jsxs("div",{className:"cue-buttons",children:[E.jsx("button",{className:"cue-btn celebration",onClick:()=>te("quick"),title:"Small confetti burst (all displays)",children:" Quick"}),E.jsx("button",{className:"cue-btn celebration epic",onClick:()=>te("winner"),title:"Winner reveal celebration (all displays)",children:" Winner"}),E.jsx("button",{className:"cue-btn celebration legendary",onClick:()=>te("fireworks"),title:"Full fireworks display (all displays)",children:" Fireworks"})]})]}),E.jsxs("div",{className:"cue-group",children:[E.jsx("h3",{children:" Screen FX"}),E.jsxs("div",{className:"cue-buttons",children:[E.jsx("button",{className:"cue-btn screen",onClick:()=>Q("light"),children:"Shake (Light)"}),E.jsx("button",{className:"cue-btn screen",onClick:()=>Q("heavy"),children:"Shake (Heavy)"}),E.jsx("button",{className:"cue-btn screen danger",onClick:()=>Q("earthquake"),children:" EARTHQUAKE"})]})]}),E.jsxs("div",{className:"cue-group",children:[E.jsx("h3",{children:" Audio Test"}),E.jsxs("div",{className:"cue-buttons",children:[E.jsx("button",{className:"cue-btn test",onClick:()=>{b.init(),O("uiClick")},title:"Initialize audio (required for first interaction)",children:" Unlock Audio"}),E.jsx("button",{className:"cue-btn test",onClick:()=>b.toggleMute(),children:" Toggle Mute"})]}),E.jsx("small",{className:"cue-hint",children:'Click "Unlock Audio" once to enable sounds (browser requirement)'})]})]})]}),E.jsxs("section",{className:"admin-card config-card",children:[E.jsx("h2",{children:" Madlibs D&D"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Template"}),E.jsx("textarea",{value:l.template,onChange:B=>c({...l,template:B.target.value}),placeholder:"The [ADJECTIVE] wizard casts [SPELL]...",rows:3}),E.jsx("small",{children:"Use [ADJECTIVE], [NOUN], [VERB], [CREATURE], [SPELL], etc."})]}),E.jsx("button",{onClick:ne,className:"btn-primary",disabled:i.type!=="none",children:" Launch Madlibs"})]}),E.jsxs("section",{className:"admin-card config-card",children:[E.jsx("h2",{children:" NPC Naming"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"NPC Description"}),E.jsx("textarea",{value:d.description,onChange:B=>u({...d,description:B.target.value}),placeholder:"A mysterious tavern keeper...",rows:2})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Selection Mode"}),E.jsxs("select",{value:d.selectionMode,onChange:B=>u({...d,selectionMode:B.target.value}),children:[E.jsx("option",{value:"random",children:"Random Pick"}),E.jsx("option",{value:"vote",children:"Audience Vote"}),E.jsx("option",{value:"gm-pick",children:"GM Picks"})]})]}),E.jsx("button",{onClick:se,className:"btn-primary",disabled:i.type!=="none",children:" Launch NPC Naming"})]}),E.jsxs("section",{className:"admin-card config-card",children:[E.jsx("h2",{children:" Group Roll"}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Prompt"}),E.jsx("input",{type:"text",value:f.prompt,onChange:B=>p({...f,prompt:B.target.value}),placeholder:"Stealth check!"})]}),E.jsxs("div",{className:"form-row",children:[E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Dice"}),E.jsxs("select",{value:f.diceType,onChange:B=>p({...f,diceType:B.target.value}),children:[E.jsx("option",{value:"d20",children:"d20"}),E.jsx("option",{value:"d12",children:"d12"}),E.jsx("option",{value:"d10",children:"d10"}),E.jsx("option",{value:"d8",children:"d8"}),E.jsx("option",{value:"d6",children:"d6"}),E.jsx("option",{value:"d4",children:"d4"})]})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"DC"}),E.jsx("input",{type:"number",value:f.dc,onChange:B=>p({...f,dc:parseInt(B.target.value)||10}),min:"1",max:"30"})]}),E.jsxs("div",{className:"form-group",children:[E.jsx("label",{children:"Modifier"}),E.jsx("input",{type:"number",value:f.modifier,onChange:B=>p({...f,modifier:parseInt(B.target.value)||0}),min:"-10",max:"10"})]})]}),E.jsx("button",{onClick:J,className:"btn-primary",disabled:i.type!=="none",children:" Launch Group Roll"})]})]})]}):E.jsx("div",{className:"admin-container",children:E.jsxs("div",{className:"login-card",children:[E.jsx("h1",{children:" GM Portal"}),E.jsx("p",{children:"Enter the secret phrase to continue"}),E.jsxs("form",{onSubmit:z,children:[E.jsx("input",{type:"password",value:n,onChange:B=>r(B.target.value),placeholder:"Password",autoFocus:!0}),E.jsx("button",{type:"submit",children:"Enter the Tavern"})]})]})})}function V4({testData:t}){var _,v,x;const{themeId:e,theme:n}=Or(),{playSound:r,shakeScreen:i}=By(),[s,o]=D.useState(t??null),[a,l]=D.useState(null),[c,d]=D.useState(!1),[u,f]=D.useState(0),p=D.useRef(null),y=D.useRef(null);D.useEffect(()=>{if(t)return;const P=Un(Te(xe,"group-roll","current"),R=>{R.exists()?o(R.data()):o(null)});return()=>P()},[t]),D.useEffect(()=>{var R;if(!s||s.status!=="rolling")return;const P=((R=s.rolls)==null?void 0:R.length)||0;if(P>u&&P>0){const O=s.rolls[s.rolls.length-1];m(O.result)}f(P)},[(_=s==null?void 0:s.rolls)==null?void 0:_.length]),D.useEffect(()=>{(s==null?void 0:s.status)==="rolling"&&(l(null),f(0))},[s==null?void 0:s.status]);const m=D.useCallback(P=>{if(!p.current||c)return;d(!0),r("diceRoll");const R=p.current,O=(s==null?void 0:s.diceType)||"d20",C=parseInt(O.replace("d","")),S=(s==null?void 0:s.dc)||10,A=(s==null?void 0:s.modifier)||0,I=P+A,V=C===20&&P===20,M=P===1,b=I>=S,q=wt.timeline({onComplete:()=>{d(!1),l(P)}});q.to(R,{y:-50,scale:.8,rotateX:-30,rotateY:-30,duration:.3,ease:"power2.out"});const te=12,Q=1.2,re=R.querySelector(".dice-number");for(let z=0;z<te;z++){const X=z/te,F=Q/te*(1+X*.8),N=1-X*.7;q.to(R,{rotateX:`+=${180+Math.random()*180}`,rotateY:`+=${180+Math.random()*180}`,rotateZ:`+=${(Math.random()-.5)*60}`,y:-30*N,scale:.85+X*.35,duration:F,ease:X<.5?"none":"power1.out",onStart:()=>{if(re){const $=Math.floor(Math.random()*C)+1;re.textContent=String($)}}})}q.call(()=>{r("diceImpact"),i({intensity:V||M?"heavy":"medium",duration:.3})}),q.to(R,{y:10,rotateX:0,rotateY:0,rotateZ:0,scale:1.3,duration:.15,ease:"power4.in"}),q.to(R,{y:0,scale:1.1,duration:.2,ease:"bounce.out"}),q.call(()=>{re&&(re.textContent=String(P))},[],"<"),V?(q.call(()=>{r("victory"),R.classList.add("nat-20")}),q.to(R,{scale:1.5,boxShadow:"0 0 60px #FFD700, 0 0 120px #FFA500, 0 0 180px #FFD700",duration:.4,ease:"back.out(2)"}),q.call(()=>{FC(4e3)},[],"-=0.2")):M?(q.call(()=>{r("error"),R.classList.add("nat-1")}),q.to(R,{filter:"grayscale(100%) brightness(0.5)",scale:.9,rotateZ:5,duration:.3}),q.to(R,{rotateZ:-5,duration:.1,repeat:3,yoyo:!0}),q.to(R,{filter:"none",scale:1,rotateZ:0,duration:.5},"+=0.5")):b?(q.call(()=>{R.classList.add("success"),tl({x:.5,y:.4})}),q.to(R,{boxShadow:`0 0 30px ${n.colors.status.success}`,duration:.3})):(q.call(()=>{R.classList.add("fail")}),q.to(R,{boxShadow:`0 0 20px ${n.colors.status.error}`,duration:.3})),q.to(R,{scale:1,duration:.4,ease:"power2.out"},"+=0.5")},[c,r,i,s,n]),w=D.useCallback(()=>{var te;if(!((te=s==null?void 0:s.rolls)!=null&&te.length))return null;const P=s.rolls,R=s.modifier||0,O=s.dc||10,C=P.filter(Q=>Q.result+R>=O).length,S=P.length-C,A=P.reduce((Q,re)=>Q+re.result,0),I=A/P.length,V=Math.max(...P.map(Q=>Q.result)),M=Math.min(...P.map(Q=>Q.result)),b=P.filter(Q=>Q.result===20).length,q=P.filter(Q=>Q.result===1).length;return{successes:C,failures:S,total:A,average:I,highest:V,lowest:M,nat20s:b,nat1s:q,successRate:C/P.length*100}},[s]);if(!s||s.status==="idle")return E.jsxs("div",{className:`dice-roller-display idle theme-${e}`,ref:y,children:[E.jsx(Pe.div,{className:"idle-dice",animate:{rotateY:[0,360],rotateX:[0,15,0,-15,0]},transition:{rotateY:{duration:8,repeat:1/0,ease:"linear"},rotateX:{duration:4,repeat:1/0,ease:"easeInOut"}},children:E.jsx("div",{className:"dice-3d d20",children:E.jsx("div",{className:"dice-face",children:E.jsx("span",{className:"dice-number",children:"20"})})})}),E.jsx("h2",{className:"idle-text",children:"Awaiting Roll..."})]});if(s.status==="rolling"){const P=((v=s.rolls)==null?void 0:v.length)||0,R=s.diceType||"d20";return E.jsxs("div",{className:`dice-roller-display rolling theme-${e}`,ref:y,children:[E.jsx("h2",{className:"roll-prompt",children:s.prompt||"Roll!"}),E.jsxs("div",{className:"roll-info-bar",children:[E.jsx("span",{className:"dice-type-badge",children:R}),s.modifier!==0&&E.jsxs("span",{className:"modifier-badge",children:[s.modifier>0?"+":"",s.modifier]}),E.jsxs("span",{className:"dc-badge",children:["DC ",s.dc]})]}),E.jsx("div",{className:"dice-stage",children:E.jsx("div",{ref:p,className:`dice-3d ${R} ${c?"rolling":""}`,children:E.jsx("div",{className:"dice-face",children:E.jsx("span",{className:"dice-number",children:a??"?"})})})}),E.jsxs(Pe.div,{className:"roll-counter",initial:{scale:1.2,opacity:0},animate:{scale:1,opacity:1},children:[E.jsx("span",{className:"count",children:P}),E.jsx("span",{className:"label",children:"Adventurers Rolling"})]},P),E.jsx("div",{className:"live-roll-feed",children:E.jsx(of,{mode:"popLayout",children:(x=s.rolls)==null?void 0:x.slice(-8).map(O=>E.jsx(Pe.div,{className:`roll-pip ${O.result===20?"nat-20":O.result===1?"nat-1":O.result+(s.modifier||0)>=(s.dc||10)?"success":"fail"}`,initial:{scale:0,x:50,opacity:0},animate:{scale:1,x:0,opacity:1},exit:{scale:0,x:-50,opacity:0},transition:{type:"spring",stiffness:500,damping:25},children:O.result},O.timestamp))})})]})}if(s.status==="results"){const P=w();return P?E.jsxs("div",{className:`dice-roller-display results theme-${e}`,ref:y,children:[E.jsx(Pe.h2,{className:"results-title",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},children:"The Dice Have Spoken!"}),E.jsxs("div",{className:"results-hero",children:[E.jsxs(Pe.div,{className:"hero-stat successes",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:[E.jsx("span",{className:"value",children:P.successes}),E.jsx("span",{className:"label",children:"Successes"})]}),E.jsxs(Pe.div,{className:"hero-stat failures",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:[E.jsx("span",{className:"value",children:P.failures}),E.jsx("span",{className:"label",children:"Failures"})]})]}),E.jsxs("div",{className:"success-rate-container",children:[E.jsx("div",{className:"success-rate-bar",children:E.jsx(Pe.div,{className:"success-fill",initial:{width:0},animate:{width:`${P.successRate}%`},transition:{delay:.5,duration:1,ease:"easeOut"}})}),E.jsxs(Pe.span,{className:"success-rate-label",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:[Math.round(P.successRate),"% Success Rate"]})]}),E.jsxs(Pe.div,{className:"stats-grid",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:[E.jsxs("div",{className:"stat",children:[E.jsx("span",{className:"value",children:P.average.toFixed(1)}),E.jsx("span",{className:"label",children:"Average"})]}),E.jsxs("div",{className:"stat highlight",children:[E.jsx("span",{className:"value",children:P.highest}),E.jsx("span",{className:"label",children:"Highest"})]}),E.jsxs("div",{className:"stat",children:[E.jsx("span",{className:"value",children:P.lowest}),E.jsx("span",{className:"label",children:"Lowest"})]}),P.nat20s>0&&E.jsxs("div",{className:"stat nat-20",children:[E.jsx("span",{className:"value",children:P.nat20s}),E.jsx("span",{className:"label",children:"NAT 20s! "})]}),P.nat1s>0&&E.jsxs("div",{className:"stat nat-1",children:[E.jsx("span",{className:"value",children:P.nat1s}),E.jsx("span",{className:"label",children:"NAT 1s "})]})]})]}):null}return null}function M4({enabled:t=!0}){var s,o,a,l,c,d,u;const{theme:e}=Or(),n=D.useRef(null),r=[((o=(s=e==null?void 0:e.colors)==null?void 0:s.voting)==null?void 0:o.optionA)||"#FFD700",((l=(a=e==null?void 0:e.colors)==null?void 0:a.voting)==null?void 0:l.optionB)||"#00D4FF",((d=(c=e==null?void 0:e.colors)==null?void 0:c.voting)==null?void 0:d.optionC)||"#FF6B35",((u=e==null?void 0:e.colors)==null?void 0:u.primary)||"#FFFFFF"],i=D.useCallback((f,p)=>{if(!t||!n.current)return;const y=n.current,m=y.getBoundingClientRect(),w=["top","left","right","bottom"],_=w[Math.floor(Math.random()*w.length)];let v,x;switch(_){case"top":v=Math.random()*m.width,x=-20;break;case"bottom":v=Math.random()*m.width,x=m.height+20;break;case"left":v=-20,x=Math.random()*m.height;break;case"right":v=m.width+20,x=Math.random()*m.height;break}let P=m.width/2,R=m.height/2;if(p){const I=p.getBoundingClientRect();P=I.left+I.width/2-m.left,R=I.top+I.height/2-m.top}const O=document.createElement("div");O.className="vote-particle";const S=r[f==="a"?0:f==="b"?1:f==="c"?2:3]||r[Math.floor(Math.random()*r.length)],A=40+Math.random()*30;O.style.cssText=`
      left: ${v}px;
      top: ${x}px;
      width: ${A}px;
      height: ${A}px;
      background: ${S};
      box-shadow: 0 0 ${A}px ${S}, 0 0 ${A*2}px ${S}, 0 0 ${A*3}px ${S};
      --target-x: ${P-v}px;
      --target-y: ${R-x}px;
    `,y.appendChild(O),requestAnimationFrame(()=>{O.classList.add("flying")}),O.addEventListener("animationend",()=>{O.remove()}),setTimeout(()=>O.remove(),2e3),console.log(` DOM Particle emitted for ${f} from (${v.toFixed(0)}, ${x.toFixed(0)}) to (${P.toFixed(0)}, ${R.toFixed(0)})`)},[t,r]);return D.useEffect(()=>{const f=window;return f.emitVoteParticle=i,console.log(" Vote particle emitter registered"),()=>{delete f.emitVoteParticle}},[i]),t?E.jsx("div",{ref:n,className:"vote-particles-simple-container","aria-hidden":"true"}):null}function D4(){return{emitVoteParticle:D.useCallback((e,n=1)=>{const r=window.emitVoteParticle;r?(r(e),console.log(` useVoteParticles: emitted for ${e}`)):console.warn("Vote particles not ready - window.emitVoteParticle not found")},[])}}function N4({winner:t,winnerId:e,message:n="THE PEOPLE HAVE SPOKEN!",percentage:r,onAnimationComplete:i,show:s}){var m,w;const{theme:o}=Or(),a=D.useRef(null),l=D.useRef(null),c=D.useRef(null),d=D.useRef(null),[u,f]=D.useState(!1),p=((w=(m=o.assets)==null?void 0:m.winnerBanner)==null?void 0:w.particles)||"confetti",y=D.useCallback(()=>{if(!a.current||!l.current)return;f(!0);const _=wt.timeline({onComplete:()=>{f(!1),i==null||i()}});return wt.set(a.current,{opacity:0}),wt.set(l.current,{scale:0,rotation:-15}),wt.set(c.current,{y:30,opacity:0}),wt.set(d.current,{y:50,opacity:0,scale:.8}),_.to(a.current,{opacity:1,duration:.2}),_.to(l.current,{scale:1,rotation:0,duration:.6,ease:"elastic.out(1.2, 0.5)"},"-=0.1"),_.call(()=>{Va("victory"),p==="confetti"?gh({intensity:"epic"}):(p==="sparkle"||p==="splash")&&tl()},[],"-=0.3"),_.to(c.current,{y:0,opacity:1,duration:.4,ease:"power2.out"},"-=0.2"),_.to(d.current,{y:0,opacity:1,scale:1,duration:.5,ease:"elastic.out(1, 0.6)"},"-=0.2"),_.to(l.current,{boxShadow:o.id==="neon-nightmares"?"0 0 60px rgba(255, 45, 149, 0.8), 0 0 100px rgba(0, 245, 255, 0.5)":"0 0 40px rgba(228, 161, 27, 0.6)",duration:.8,repeat:2,yoyo:!0,ease:"sine.inOut"},"-=0.3"),_},[o.id,p,i]);return D.useEffect(()=>{s&&!u&&y()},[s,y,u]),s?E.jsx("div",{ref:a,className:`winner-banner-overlay winner-banner--${o.id}`,role:"alert","aria-live":"assertive",children:E.jsxs("div",{ref:l,className:"winner-banner",children:[E.jsx("div",{className:"winner-banner__flourish winner-banner__flourish--top"}),E.jsx("div",{ref:c,className:"winner-banner__message",children:n}),E.jsxs("div",{ref:d,className:"winner-banner__winner",children:[e&&E.jsx(Zg,{iconKey:e==="a"?"optionA":e==="b"?"optionB":"optionC",size:80,selected:!0,className:"winner-banner__icon"}),E.jsx("span",{className:"winner-banner__name",children:t}),r!==void 0&&E.jsxs("span",{className:"winner-banner__percentage",children:[Math.round(r),"% of the vote"]})]}),E.jsx("div",{className:"winner-banner__flourish winner-banner__flourish--bottom"})]})}):null}function O4(){var R,O,C;const[t,e]=D.useState({type:"none"}),[n,r]=D.useState({}),[i,s]=D.useState(!0),[o,a]=D.useState("Connecting..."),[l,c]=D.useState(!1),[d,u]=D.useState(!1),{theme:f}=Or();k4();const{emitVoteParticle:p}=D4(),y=D.useRef({}),m=D.useRef({type:"none"}),w=D.useRef(0);D.useEffect(()=>(OC(),()=>C4()),[]);const _=()=>{yD(),ft.init(),s(!0)};D.useEffect(()=>{console.log("DisplayView: Setting up listener for active-interaction");const S=Un(Te(xe,"config","active-interaction"),A=>{if(console.log("DisplayView: Got snapshot",A.exists(),A.data()),A.exists()){const I=A.data();I.type!=="none"&&m.current.type==="none"&&(ft.play("whoosh"),u(!1)),m.current.isOpen&&!I.isOpen&&I.type==="vote"&&(ft.play("uiClick"),c(!0),setTimeout(()=>c(!1),800),setTimeout(()=>{u(!0)},600)),m.current=I,e(I),a(`Type: ${A.data().type}`)}else e({type:"none"}),a("No active interaction doc")},A=>{console.error("DisplayView: Listener error",A),a(`Error: ${A.message}`)});return()=>S()},[]),D.useEffect(()=>{const S=Un(Te(xe,"votes","current-vote"),A=>{if(A.exists()){const I=A.data(),V=I.counts||{};console.log(" Vote update:",{total:I.totalVotes,prevTotal:w.current,counts:V,prevCounts:y.current}),I.totalVotes&&I.totalVotes>w.current&&ft.play("timerTick",{volume:.3}),Object.keys(V).forEach(M=>{const b=y.current[M]||0,q=V[M]||0,te=q-b;if(console.log(` Option ${M}: ${b}  ${q} (diff: ${te})`),te>0){const Q=Math.min(te,5);console.log(` Emitting ${Q} particles for option ${M}`);for(let re=0;re<Q;re++)setTimeout(()=>p(M,1),re*100)}}),y.current={...V},w.current=I.totalVotes||0,r(I)}});return()=>S()},[]);const v=n.totalVotes||0,x=S=>{var A;return v===0?0:(((A=n.counts)==null?void 0:A[S])||0)/v*100},P=()=>{if(!t.options||v===0)return null;let S=0,A=null;return t.options.forEach(I=>{var M;const V=((M=n.counts)==null?void 0:M[I.id])||0;V>S&&(S=V,A=I)}),A};return E.jsxs("div",{className:`display-container crt-overlay ${l?"shake-intense":""}`,children:[E.jsx(M4,{enabled:t.type==="vote"}),E.jsxs("div",{style:{position:"absolute",top:"1rem",left:"1rem",color:"#666",fontSize:"0.8rem",zIndex:100},children:[o," | Active: ",t.type]}),E.jsx("button",{className:"sound-toggle",onClick:_,title:i?"Sound enabled":"Click to enable sound",children:i?E.jsx(QL,{size:28}):E.jsx(XL,{size:28})}),E.jsxs(of,{mode:"wait",children:[t.type==="none"&&E.jsx(Pe.div,{className:"idle-state",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:E.jsxs("div",{className:"idle-content",children:[E.jsx(Pe.div,{className:"idle-logo",animate:{y:[0,-15,0],filter:["drop-shadow(0 0 8px var(--tmp-color-primary))","drop-shadow(0 0 20px var(--tmp-color-primary))","drop-shadow(0 0 8px var(--tmp-color-primary))"]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:E.jsx(FA,{size:280})}),E.jsx("p",{className:"join-prompt",children:"Join the adventure"}),E.jsx("div",{className:"url-display",children:"play.misadventuringparty.com"})]})},"idle"),t.type==="vote"&&E.jsxs(Pe.div,{className:"vote-display",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[E.jsx(Pe.h2,{className:"vote-question",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:t.question}),E.jsxs(Pe.div,{className:"vote-count",initial:{scale:0},animate:{scale:1},transition:{delay:.4,type:"spring"},children:[E.jsx("span",{className:"count-number",children:v}),E.jsx("span",{className:"count-label",children:"votes cast"})]}),E.jsx("div",{className:"display-results-bar",children:(R=t.options)==null?void 0:R.map((S,A)=>{var q,te,Q;const I=x(S.id),V=["bar-a","bar-b","bar-c"],M=["optionA","optionB","optionC"],b=(te=(q=f.assets)==null?void 0:q.voteIcons)==null?void 0:te[M[A]];return E.jsx(Pe.div,{className:`display-bar-segment ${V[A]}`,initial:{width:`${100/(((Q=t.options)==null?void 0:Q.length)||2)}%`},animate:{width:`${Math.max(I,5)}%`},transition:{type:"spring",stiffness:50,damping:15},children:E.jsxs("div",{className:"segment-content",children:[b?E.jsx(Zg,{iconKey:M[A],size:48,className:"segment-icon"}):E.jsx("span",{className:"segment-emoji",children:S.emoji}),E.jsx("span",{className:"segment-label",children:S.label}),E.jsxs("span",{className:"segment-percent",children:[Math.round(I),"%"]})]})},S.id)})}),E.jsx(Pe.div,{className:`voting-status ${t.isOpen?"open":"closed"}`,animate:t.isOpen?{scale:[1,1.05,1]}:{},transition:{repeat:1/0,duration:1.5},children:t.isOpen?E.jsxs(E.Fragment,{children:[E.jsx(Kw,{size:32})," VOTING OPEN ",E.jsx(Kw,{size:32})]}):E.jsxs(E.Fragment,{children:[E.jsx(KL,{size:32})," VOTING CLOSED"]})}),E.jsx(N4,{show:!t.isOpen&&v>0&&d,winner:((O=P())==null?void 0:O.label)||"",winnerId:(C=P())==null?void 0:C.id,percentage:P()?x(P().id):0,onAnimationComplete:()=>{setTimeout(()=>u(!1),5e3)}})]},"vote"),t.type==="madlibs"&&E.jsx(Pe.div,{className:"coming-soon-display",children:E.jsx("h2",{children:" Madlibs Reveal Coming Soon"})},"madlibs"),t.type==="group-roll"&&E.jsx(V4,{},"roll")]})]})}function F4(){return E.jsx("div",{className:"app-container",children:E.jsxs(Sb,{children:[E.jsx(lc,{path:"/",element:E.jsx(o5,{})}),E.jsx(lc,{path:"/admin",element:E.jsx(R4,{})}),E.jsx(lc,{path:"/display",element:E.jsx(O4,{})})]})})}Md.createRoot(document.getElementById("root")).render(E.jsx(_h.StrictMode,{children:E.jsx(Pb,{children:E.jsx(wD,{children:E.jsx(F4,{})})})}));
